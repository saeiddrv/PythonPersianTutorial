.. role:: emoji-size

.. meta::
      :description: ูพุงุชูู ุจู ูพุงุฑุณ - ฺฉุชุงุจ ุขููุงู ู ุขุฒุงุฏ ุขููุฒุด ุฒุจุงู ุจุฑูุงููโููุณ ูพุงุชูู - ุฏุฑุณ ุจุณุช ู ุณูู: ูุฏุฑุช ุฎุทุง ุฏุฑ ูพุงุชูู: Exception ุTraceback ู Exception Handling


.. _lesson-23: 

ุฏุฑุณ ฒณ: ูุฏุฑุช ุฎุทุง ุฏุฑ ูพุงุชูู: Exception ุTraceback ู Exception Handling
===================================================================================================

.. figure:: /_static/pages/23-python-exception-error-warning-try.jpg
    :align: center
    :alt: ูุฏุฑุช ุฎุทุง ุฏุฑ ูพุงุชูู: Exception ุTraceback ู Exception Handling ู try/except/else/finally
    :class: page-image

    Photo by `krakenimages <https://unsplash.com/photos/8RXmc8pLX_I>`__
  

ุงู ุฏุฑุณ ุจู ุดุฑุญ ฺฉ ุงุฒ ููุงูู ุฌุฏุงูุดุฏู ุงุฒ ุจุฑูุงููโููุณ ุนู **ุฎุทุง (Error)** ูพุฑุฏุงุฎุชู ู ฺฺฏููฺฏ ุจุฑูุฒ ู ูุฏุฑุช ุขู ุฏุฑ ุฒุจุงู ุจุฑูุงููโููุณ ูพุงุชูู ุฑุง ุจุฑุฑุณ ุฎูุงูุฏ ฺฉุฑุฏ. ุฏุฑ ุงู ุฏุฑุณ ุฎูุงูู ุขููุฎุช ฺฉู ุฑุฏุงุจ ุฎุทุง ุฏุฑ ูพุงุชูู ุชูุณุท **Traceback** ฺฺฏููู ุฎูุงูุฏ ุจูุฏ ู ุงูฺฉู ุงุณุงุณุง **Exception** ฺุณุช ู ฺู ููููู ุฏุฑ ูพุงุชูู ุฏุงุฑุฏุ ูพุงุฏูโุณุงุฒ ุฏุณุชูุฑ **try/except** ุฏุฑ ูพุงุชูู ฺฺฏููู ูโุจุงุดุฏ ู ููฺูู ููุด ุฏุณุชูุฑุงุช ุฏฺฏุฑ ุจู ูุงููุฏ **else** ู **finally** ุฏุฑ ฺฉูุงุฑ ุฏุณุชูุฑ **try** ูพุงุชูู ฺุณุช.

ุงู ุฏุฑุณ ุชูุงู ููุงูู ูุฑุจูุท ุจู **Error** ู **Exception** ุฑุง ุฏุฑ ุฒุจุงูโ ุจุฑูุงููโููุณ ูพุงุชูู ูพูุดุด ููโุฏูุฏ ู ูุทุงูุจ ุจุงู ูุงูุฏู ุท ุฏุฑุณ ุจุนุฏ ุงุฑุงุฆู ุฎูุงูุฏ ุดุฏ.



:emoji-size:`โ` ุณุทุญ: ูุชูุณุท

----


.. contents:: ุณุฑูุตูโูุง
    :depth: 2

----


.. _introduction-to-python-errors: 

ููุฏูู
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

ุจุฑูุฒ **ุฎุทุง (Error)** ูููุงุฑู ุฌุฒ ุงุฒ ุจุฑูุงููโููุณ ุจูุฏู ู ูุณุช. ุฎุทุงูุง ุจุฑูุงููโููุณ ุงููุงุน ฺฏููุงฺฏูู ุฏุงุฑูุฏุ ยซุฎุทุงูุง ุฒูุงู ฺฉุงููพุงูยป (Compile-time errors) ฺฉู ุขููุฏุฑ ูุงุญุด ูุณุชูุฏ ฺฉู ูุงูุน ุงุฒ ุชุฑุฌูู ฺฉุฏูุง ุจุฑูุงูู ุจู ุฒุจุงู ูุงุดู ู ุฏุฑ ููุงุช ุงุฌุฑุง ุขู ุฎูุงููุฏ ุดุฏ ู ุจุฑุฎ ุฏฺฏุฑ ฺฉู ูโุชูุงููุฏ ุขููุฏุฑ ูุงููุง ุจุงุดูุฏ ฺฉู ุชุง ูุฏุชโูุง ูพุณ ุงุฒ ุงุฌุฑุง ูุฒ ุฎูุฏุดุงู ุฑุง ูุดุงู ูุฏููุฏ! ุจู ุงู ุฏุณุชู ุงุฒ ุฎุทุงูุง ุจู ุงุตุทูุงุญ ยซุฎุทุงูุง ุฒูุงู ุงุฌุฑุงยป (Runtime errors) ูโฺฏููุฏ.

**ยซุฎุทุงูุง ุฒูุงู ฺฉุงููพุงูยป (Compile-time errors)** ุญุงุตู ุงุดุชุจุงู ูุงุญุด ุจุฑูุงููโููุณ ุจูุฏู ู ูุนูููุง ูุฒ ฺฉุดู ู ุจุฑุทุฑู ูููุฏู ุขูโูุง ูุฒ ุจุณุงุฑ ุณุงุฏู ูโุจุงุดุฏ ู ุงุฒ ุนุฏู ุฑุนุงุช ุฏุฑุณุช ููุงุนุฏ ุฒุจุงู ุจุฑูุงููโููุณ ูุงููุฏ ุณูุชฺฉุณ ูุดุงุช ูโฺฏุฑูุฏ.

ุงูุง ุจุฑูุฒ **ยซุฎุทุงูุง ุฒูุงู ุงุฌุฑุงยป (Runtime errors)** ูโุชูุงูุฏ ุจู ุนูุงูู ฺฏููุงฺฏูู ูุงุจุณุชู ุจุงุดุฏ ููุงููุฏ ุฏุฎุงูุช ฺฉ ุนุงูู ุจุฑูู ุง ูุดฺฉูุงุช ุณุฎุชโุงูุฒุงุฑ ฺฉู ูุงฺฏูุงู ุจู ุจุฑูุงูู ุชุญูู ูโฺฏุฑุฏูุฏ ฺฉู ุงฺฏุฑ ุงุฒ ูุฑุถ ุงู ุงุญุชูุงู ูุฒ ุตุฑู ูุธุฑ ฺฉูู!ุ ุจุงุฒ ูู ุจุฑุง ุฏูุงุน ุฏุฑ ุจุฑุงุจุฑ ุงู ุฏุณุชู ุงุฒ ุฎุทุงูุงุ ุจุฑูุงููโููุณ ูโุจุงุณุช ฺฉุงููุง ููุดุงุฑ ุจุงุดุฏ. ุจู ุฎุตูุต ุฏุฑ ุฒุจุงูโูุง ุจุฑูุงููโููุณ ูพูุง ุจู ูุงููุฏ ูพุงุชูู ฺฉู ุงููุงุน ุฏุงุฏู ุฏุฑ ุฒูุงู ุงุฌุฑุง ุชุนู ูโฺฏุฑุฏูุฏ. ุจุฑุง ูุซุงู ูุฑุถ ฺฉูุฏ ุฏุฑ ุฏุงุฎู ฺฉ ุชุงุจุน ูุฑุงุฑ ุงุณุช ุจุง ฺฉ ููุน ``int`` ฺฉุงุฑ ุดูุฏ ูู ุจู ุนูุช ุถุนู ุจุฑูุงููโููุณ ู ุนุฏู ฺฉูุชุฑู ูุฑูุฏโูุงุ ฺฉ ุฏุงุฏู ุจุง ููุน ``str`` ุจู ุขู ุงุฑุณุงู ฺฏุฑุฏุฏ ฺฉู ุฏุฑ ุงู ุตูุฑุช ูุชุฌู ูุดุฎุต ุงุณุช! ุงูุจุชู ุฌููฺฏุฑ ุงุฒ ุงู ุฏุณุช ุฎุทุงูุง ูุฒ ููฺูุงู ุณุงุฏู ูโุจุงุดุฏ!. ฺฏุงู ููฺฉู ุงุณุช ูุถุนุช ุขูฺูุงู ูููฺฉ ุจุงุดุฏ ฺฉู ุง ุฎู ุฏุฑ ุจู ูุฌูุฏ ฺฉ ุฎุทุง ุฏุฑ ุจุฑูุงูู ูพ ุจุจุฑู ุง ุจุฑุง ฺฉุดู ุนูุช ุขู ุฒูุงู ุฒุงุฏ ุตุฑู ฺฉูู ุง ูุฑ ุฏู! ุจู ุงู ููุน ุงุฒ ุฎุทุงูุง ุฒูุงู ุงุฌุฑุงุ ยซุฎุทุงูุง ููุทูยป (Logical errors) ฺฏูุชู ูโุดูุฏ.

**ยซุฎุทุงูุง ููุทูยป (Logical errors)** ุจุฑุฎูุงู ุฏฺฏุฑ ุฎุทุงูุง ุจุงุนุซ ุชููู ุงุฌุฑุง ุจุฑูุงูู ูุดุฏู ุจูฺฉู ุจุงุนุซ ุชููุฏ ูุชุงุฌ ูุงุฏุฑุณุช ูโุดููุฏ ฺฉู ุงุฒ ุฏุฏฺฏุงู ุจุฑูุงููโููุณ ุฏุฑุณุช ุจูุฏู ูู ุงุฒ ุฏุฏฺฏุงู ููุทู ฺฉุงููุง ุงุดุชุจุงู ูุณุชูุฏ. ุจู ุนููุงู ฺฉ ูุซุงู ุณุงุฏู ูุฑุถ ฺฉูุฏ ูุฑููู ูุญุงุณุจู ูุนุฏู ุงุดุชุจุงู ูพุงุฏูโุณุงุฒ ุดุฏู ุจุงุดุฏ! ุงู ููุน ุฎุทุง ูุตุฏุงู ุจุงุฑุฒ ยซุจุงฺฏยป (Bug) ุฏุฑ ุจุฑูุงูู ุงุณุช ฺฉู ููุดู ูพุดฺฏุฑุ ุงุฒ ฺฉุดู ู ุงุตูุงุญ ุขูโูุง ุจู ูุฑุงุชุจ ุณุงุฏูโุชุฑ ุฎูุงูุฏ ุจูุฏ.


ุจุง ูุฌูุฏ ุงู ุชูุถุญุงุช ู ููุงูุทูุฑ ฺฉู ูุดุงูุฏู ุฎูุงูุฏ ฺฉุฑุฏุ ุจุฑูุฒ ุฎุทุง ูููุงุฑู ฺฉ ุงูุฑ ุฒุดุช ู ูุงุฎูุงุณุชู ูุจูุฏู ุจูฺฉู ฺฏุงู ูุฒ ฺฉ ุงุณุชุฑุงุชฺ ุงุฒ ุณู ุจุฑูุงููโููุณ ุฎูุงูุฏ ุจูุฏ ุชุง ฺฉ ูุถุนุช ุฑุง ุจู ุณุทูุญ ุฏฺฏุฑ ุงุฒ ุจุฑูุงูู ุงุนูุงู ุง ุงูฺฉู ูุณุชููุง ุชุบุฑ ุฏุฑ ุฑููุฏ ุงุฌุฑุง ุจุฑูุงูู ุงุฌุงุฏ ฺฉูุฏ. ุฏุฑ ุงู ุตูุฑุช ุฎุทุงูุง ุฏฺฏุฑ ุจุง ูุงู ุฒุดุช ุฎุทุง ุฎูุงูุฏู ููโุดููุฏ ุจูฺฉู ุจู ุขููุง **ุงุณุชุซูุง ุง ุงุนุชุฑุงุถ ุง Exception** ูโฺฏููุฏ.


ุจู ุตูุฑุช ฺฉูุ **Exception** ุงูฺฉุงู ุจุฑุง ุฎุฑูุฌ ุจุฑูุงูู ุงุฒ ฺฉ ูุถุนุช ูุดุฎุต ุงุณุช ู ุจุฑูุฒ ุขูุ ููุงููุฏ ุงุนูุงู ุนููู ฺฉ ุฎุจุฑ ููู ุฏุฑ ุจุฑูุงูู ูโุจุงุดุฏ. ูโุชูุงู ุจุง ูพุดโุจู ุจุฑูุฒ Exceptionูุง ุฏุฑ ุจุฑูุงููุ ุจู ุงุตุทูุงุญ ุขูโูุง ุฑุง **catch** ูููุฏ ู ูุฑุขูุฏ - ุง ุจู ุงุตุทูุงุญ ฺฉ **handler** - ุฑุง ุจุฑุง ูุฏุฑุช ุขูโูุง ูพุงุฏูโุณุงุฒ ฺฉุฑุฏ. 

ุฏุฑฺฉ ูููุน ฺฉ Exception ู ุงูฺฉุงู ุงุฌุงุฏ ฺฉ ูุฑุขูุฏ ุจุฑุง ูุฏุฑุช ุขู (ูพุงุฏูโุณุงุฒ handler)ุ ูุงุจูุช ููู ุฏุฑ ฺฉ ุฒุจุงูโุจุฑูุงููโููุณ ูุญุณูุจ ูโุดูุฏ. ฺุฑุง ฺฉู ูโุชูุงู ุงุฒ Exception ุฏุฑ ุฏู ููุด ุฒุฑ ุจูุฑู ฺฏุฑูุช:

**ฑ) ูุฏุฑุช ุฎุทุง (Error handling):** ูุฑ Exception ูโุชูุงูุฏ ูุนุฑู ฺฉ ููุน ุฎุทุง ุง ูุถุนุช ูุงุฏุฑุณุช ุฏุฑ ุจุฑูุงูู ุจุงุดุฏุ ูโุชูุงู ุจุฑ ุงุณุงุณ ููุน Exception ู ุฎุทุง ฺฉู ุฑุฎ ุฏุงุฏู ุจุฑุง ุขู ุงุฒ ูพุด ฺุงุฑูโุงูุฏุด ู ูุฑุขูุฏ ุฑุง ุจุฑุง ูุฏุฑุช ุขู ุฎุทุง ุฏุฑ ุจุฑูุงูู ูพุดโุจู ฺฉุฑุฏ.


**ฒ) ุงุทูุงุนโุฑุณุงู ฺฉ ุฑูุฏุงุฏ (Event notification):** ุงุฒ Exceptionูุง ูโุชูุงู ุจุฑุง ุงุนูุงู ูููุน ฺฉ ุญุงุฏุซู ูุซุจุช ูุฒ ุฏุฑ ุจุฑูุงูู ุงุณุชูุงุฏู ฺฉุฑุฏ. ุจู ุงู ุตูุฑุช ูโุชูุงู ุฏุฑ ุฒูุงู ุงุฌุฑุง ุจุฑูุงูู ู ุจุฑ ุญุณุจ ุดุฑุงุทุ ุฑููุฏ ุงุฌุฑุง ุจุฑูุงูู ุฑุง ุชุบุฑ ุฏุงุฏ.

----

**ุงูุง ููููู ุฎุทุง ุฏุฑ ุฒุจุงู ุจุฑูุงููโููุณ ูพุงุชูู ฺฺฏููู ุงุณุชุ** ุงููุงุน ุฎุทุงูุง ุฏุฑ ูพุงุชูู ุฑุง ูโุชูุงู ุฏุฑ ุฏู ุฏุณุชู ฺฉู ุฒุฑ ุฏุฑ ูุธุฑ ฺฏุฑูุช:

* ุฎุทุง ุณูุชฺฉุณ (Syntax error)

* ุฎุทุง ุฒูุงู ุงุฌุฑุง (Runtime error)

ุจุฑุง ุฏุฑฺฉ ุงู ุฏุณุชูโุจูุฏ ู ูุทุงุจูุช ุฏุงุฏู ุขู ุจุง ุชูุถุญุงุช ูพุด ูุงุฒู ุงุณุช ุชุง ุจุงุฑ ุฏฺฏุฑ ุจู ุฑููุฏ ุงุฌุฑุง ฺฉุฏูุง ูพุงุชูู ุชูุฌู ููุงู (ุฏุฑุณ ุณูู - ูพุดุช ุตุญูู ุงุฌุฑุง). ูโุฏุงูู ูพุงุชูู ฺฉ ุฒุจุงู ููุณุฑ ุงุณุชุ ูู ูพุดโ ุงุฒ ุงุฌุฑุงุ ฺฉุฏูุง ูพุงุชูู ุจู ฺฉ ุฒุงู ูุงู ุจู ูุงู ุจุงุชโฺฉุฏ (ByteCode) ุชุฑุฌูู ุง ฺฉุงููพุงู ูโุดููุฏุ ุฏุฑ ุงู ูุฑุญูู ููุงุนุฏ ูพุงุชูู ุจุฑุฑุณ ู ุฏุฑ ุตูุฑุช ฺฉู ูุดฺฉู ุง ุฎุทุง ูุฌูุฏ ูุฏุงุดุชู ุจุงุดุฏุ ุจุงุชโฺฉุฏ ุงุฌุงุฏ ู ุจู ุงุฌุฑุง ุฏุฑ ูโุขุฏ. ุฎุทุงูุง ฺฉู ุฏุฑ ุงู ูุฑุญูู (ุนู ุชูุงุด ุจุฑุง ุชุฑุฌูู ู ุงุฌุงุฏ ุจุงุชโฺฉุฏ) ููฺฉู ุงุณุช ุฑุฎ ุฏููุฏุ ุฏุฑ ูพุงุชูู **ุฎุทุง ุณูุชฺฉุณ (Syntax error)** ูุงูุฏู ูโุดููุฏ.

ุฒูุงู ฺฉู ุจุฑูุงูู ูพุงุชูู ุจู ุงุฌุฑุง ุฏุฑูโุขุฏุ ุนู ุงุฒ ูุธุฑ ุฑุนุงุช ููุงูู ุง ุณูุชฺฉุณ ูุดฺฉู ูุฌูุฏ ูุฏุงุดุชู ุงุณุชุ ุจูุงุจุฑุงู ุจุงู ุฎุทุงูุง ุฏุฑ ุฒูุงู ุงุฌุฑุง ุฑุฎ ุฎูุงููุฏ ุฏุงุฏ. ุฏุฑ ุฒุจุงู ุจุฑูุงููโููุณ ูพุงุชูู ุชูุงู ุฎุทุงูุง ุฒูุงู ุงุฌุฑุง ุฏุฑ ูุงูุจ ฺฉ Exception ุงุนูุงู ุง ุจู ุงุตุทูุงุญ **raise** ุฎูุงููุฏ ุดุฏ.

.. _python-traceback: 

ุฑุฏุงุจ ุฎุทุง ุฏุฑ ูพุงุชูู (Traceback)
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

ูพุณ ุงุฒ ูููุน ฺฉ ุฎุทุง ุฏุฑ ุฒูุงู ุงุฌุฑุง ฺฉ ุจุฑูุงูู ูพุงุชููุ ุจุฑุง ุฑุฏุงุจ ู ฺฉุดู ุนูุช ุฑุฎ ุฏุงุฏู ุขู ุฎุทุง ุงุฒ Traceback ุงุณุชูุงุฏู ูโฺฏุฑุฏุฏ. ููุธูุฑ ุงุฒ **Traceback**ุ ฺฏุฒุงุฑุด ุงุณุช ฺฉู ุฌูุช ุฑุงูููุง ุจุฑูุงููโููุณ ุฏุฑ ููฺฏุงู ูููุน ฺฉ ุฎุทุง ุฒูุงู ุงุฌุฑุงุ ุชูุณุท ููุณุฑ ูพุงุชูู ุงุฑุงุฆู ุฏุงุฏู ูโุดูุฏ ู ฺฏุงู ูุฒ ุงุฒ ุขู ุจู ุนููุงู **Stack Trace** ุงุฏ ูโุดูุฏ:


.. code-block:: python
    :linenos:
    
    def sum_int(a, b):
        return a + b
    
    res = sum_int(2, 3)
    print(res)

    res = sum_int(3, 'C')
    print(res)

::

    5
    Traceback (most recent call last):
      File "sample.py", line 7, in <module>
        res = sum_int(3, 'C')
      File "sample.py", line 2, in sum_int
        return a + b
    TypeError: unsupported operand type(s) for +: 'int' and 'str'

ููููู ฺฉุฏ ุจุงูุง ููุงุด ูุซุงู ุงุฒ ุจุฑูุฒ ุฎุทุง ุฏุฑ ุฒูุงู ุงุฌุฑุงุณุช ฺฉู ูพุดโุชุฑ ูุฒ ุจู ุขู ุงุดุงุฑู ฺฉุฑุฏู. ุฏุฑ ุงู ูุซุงูุ ฺฉ ุงุณฺฉุฑูพุช ุจุง ูุงู ``sample.py`` ุงุฌุงุฏ ฺฉุฑุฏูโุงู ฺฉู ฺฉุฏ ุจุงูุง ุฏุฑ ุขู ุฏุฑุฌ ฺฏุฑุฏุฏู ุงุณุช. ุชุงุจุน ``sum_int`` ฺฉ ุจุงุฑ ุจุง ููุฏุงุฑ ูุงุจู ูพุฐุฑุด (ูุฑ ุฏู ุงุฒ ููุน ``int``) ูุฑุงุฎูุงู ูโฺฏุฑุฏุฏ (ุณุทุฑ ด) ู ูุชุฌู (ุนู ููุฏุงุฑ ``5``) ูุฒ ุจุง ููููุช ุฏุฑ ุฎุฑูุฌ ฺุงูพ ูโฺฏุฑุฏุฏ (ุชูุณุท ุฏุณุชูุฑ ููุฌูุฏ ุฏุฑ ุณุทุฑ ต). ุงูุง ุฏุฑ ุณุทุฑ ููุชูุ ุขุฑฺฏููุงูโูุง ุจุง ููุน ูุงูุชูุงุณุจ ุจุฑุง ุนููฺฏุฑ ุฌูุน ุฑุงุถ (``+``) ุงุฑุณุงู ูโฺฏุฑุฏุฏ ู ุจุงุนุซ ุจุฑูุฒ ฺฉ ุฎุทุง ุง ุงฺฏุฑ ุจูุชุฑ ุจฺฏููุ raise ุดุฏู ฺฉ Exception ุจู ูุงู ``TypeError`` ูโฺฏุฑุฏุฏ.

ุฎุฑูุฌ ุญุงุตู ุงุฒ ูููุน Exception ููู ููุงุด Traceback ุฏุฑ ูพุงุชูู ูโุจุงุดุฏ. Traceback ูพุงุชูู ฺฉ ุฑุงูููุง ฺฉุงูู ุงุฒ ููุน Exception ู ูุฑุงุชุจ ูููุน ุขู ุฑุง ุจู ุจุฑูุงููโููุณ ฺฏุฒุงุฑุด ูโุฏูุฏ ฺฉู ุฏุฑฺฉ ุฏุฑุณุช ุขู ฺฉ ุงูุฒุงู ุจุฑุง ุจุฑูุงููโููุณ ูโุจุงุดุฏ.

ุจุฑุฎูุงู ุจุฑุฎ ุฏฺฏุฑ ุงุฒ ุฒุจุงูโูุง ุจุฑูุงููโููุณ ุจู ูุงููุฏ Java ุจุงุฏ ุชูุฌู ุฏุงุดุช ฺฉู Traceback ูพุงุชูู ุฑุง  ูโุจุงุณุช ุงุฒ ูพุงูุ ุนู ุณุทุฑ ูพุงุงู ููุฑุฏ ุจุฑุฑุณ ูุฑุงุฑ ุฏุงุฏุ ุงู ุณุทุฑ ุชูุถุญ ุงุฒ ููุน Exception ุฑุฎ ุฏุงุฏู ุฑุง ุงุฑุงุฆู ูโุฏูุฏ ู ุงุฒ ุงู ุณุทุฑ ุจู ุจุงูุง ูุฑุงุญู ุงุฒ ุฑููุฏ ุงุฌุฑุง ุจุฑูุงูู ฺฉู ุจุงุนุซ ุจุฑูุฒ ุงู Exception ุดุฏู ุงุณุช ุฑุง ุจู ุชุฑุชุจ ููุงุด ูโุฏูุฏ. ุชุฑุชุจ ููุงุด ูุฑุงุชุจ Exception ูุฒุ ุงุฒ ููุงุด ููุทู ุจุฑูุฒ Exception ุจู ูุจู ูโุจุงุดุฏ. ุจู ุนููุงู ููููู ุจุฑุง ูุซุงู ูุจูุ ูโุชูุงูู ูุดุงูุฏู ฺฉูู ฺฉู ฺฏูุชู ุดุฏู:

* **ููุน Exception ฺุณุชุ** Exception ุงุฒ  ููุน ``TypeError`` ูโุจุงุดุฏ ฺฉู ุฏุฑ ุฒูุงู ุงุณุชูุงุฏู ุงุฒ ุงููุงุน ูุงุฏุฑุณุช ุงุฒ ููุงุฏุฑ  ุจุฑุง ุนููฺฏุฑ ``+`` ุฑุฎ ุฏุงุฏู ุงุณุช ฺฉู ุฏุฑ ุงูุฌุงุ ุงู ุฏู ููุน ุนุจุงุฑุชูุฏ ุงุฒ: ``'int' and 'str'``. 

* **Exception ุฏุฑ ฺฉุฌุง ุฑุฎ ุฏุงุฏู ุงุณุชุโ** ุฏุฑ ุณุทุฑ ุฏูู ุงุฒ ``sample.py`` ู  ุฏุงุฎู ุจุฏูู ``sum_int`` ู ููฺฏุงู ุงุฌุฑุง ุฏุณุชูุฑ ``return a + b``.

* **ููุทู ูุจู ุงุฒ ูุฑูุฏ ุจู ูุงุญู Exception ฺฉุฌุง ุจูุฏู ุงุณุชุ** ุฏุฑ ุณุทุฑ ููุชู ุงุฒ ``sample.py`` ู ุฏุงุฎู ุญูุฒู ูุงฺููุ ุชุงุจุน ``sum_int`` ุจุง ููุงุฏุฑ ``3`` ู ``'C'`` ูุฑุงุฎูุงู ุดุฏู ุงุณุช:โ ``res = sum_int(3, 'C')``.

* **ุขุง ููุทู ูุจูโุชุฑ ูุฒ ูุฌูุฏ ุฏุงุฑุฏุ** ุฎุฑ

ูพุงุชูู ุชุง ฺูุฏู ุณุทุญ ูุจูโุชุฑ ุงุฒ ููุทู ุจุฑูุฒ Exception ุฑุง ุชูุณุท Traceback ุขุดฺฉุงุฑ ูโฺฉูุฏ. ุงู ุงูุฑ ฺฉูฺฉ ุจุณุงุฑ ุฏุฑ ูููุฏู ูุณุฑ ุฑุณุฏู ุจู Exception ุฑุง ุฏุฑ ุงุฎุชุงุฑ ุจุฑูุงููโููุณ ูุฑุงุฑ ูโุฏูุฏ.

ุงฺฉููู ุงุฌุงุฒู ุฏูุฏ ููููู ฺฉุฏ ูุฑุจูุท ุจู ูุซุงู ูุจู ุนู ุงุณฺฉุฑูพุช ``sample.py`` ุฑุง ุจุง ุญูุธ ูุดฺฉู ``TypeError`` ู ุงูุฒูุฏู ฺฉู ุชุบุฑ ุจุฑุง ููุงุด **ุฎุทุง ุณูุชฺฉุณ (Syntax error)** ุขูุงุฏู ููุงูุ ุจุฑ ููู ุงุณุงุณ ุจู  ููููู ฺฉุฏ ุฒุฑ ฺฉู ุญุงู ุฏู ุฎุทุง ุงุฒ ููุน Syntax error ูโุจุงุดุฏ ู ุฎุฑูุฌ ุขู ุฏุฑ ุฒูุงู ุงุฌุฑุง ุชูุฌู ููุงุฏ:

.. code-block:: python
    :linenos:
    
    def sum_int(a, b)
        return a + b
    
    res = sum_int(2, 3)
    print(res)

    res = sum_int(3, 'C')
    print(res)
    
    
    '

::

    File "sample.py", line 1
        def sum_int(a, b)
                        ^
    SyntaxError: invalid syntax

ุฏุฑ ูุฎุณุชู ุจุงุฑ ุงุฌุฑุง ุงุณฺฉุฑูพุช ``sample.py``ุ ูพุงุชูู ูุชูุฌู ฺฉ ุฎุทุง ``SyntaxError`` ุฏุฑ ุณุทุฑ ฺฉู ูโุดูุฏ ู ุฌูู ูุฑุงุญู ุชุจุฏู ุจู ุจุงุชโฺฉุฏ ู ุฏุฑ ููุงุช ุงุฌุฑุง ุจุฑูุงูู ุฑุง ุฏุฑ ููุงู ููุทู ูโฺฏุฑุฏ. ุทุจู ุชูุถุญุงุช ฺุงูพ ุดุฏูุ ุฎุทุง ูุฑุจูุท ุจู ุนุฏู ุฑุนุงุช ุณูุชฺฉุณ ุฏุฑุณุช ุจุฑุง ุชุนุฑู ุชุงุจุน ูโุจุงุดุฏ. ฺฉุงุฑุงฺฉุชุฑ ``^`` ุจู ุฌุงฺฏุงู ูุงุฏุฑุณุช ุงุดุงุฑู ูโฺฉูุฏ. ุฏุฑ ุงูุชูุง ุชุนุฑู ุณุฑุขูุฏ ุชุงุจุน ุงุดฺฉุงู ูุฌูุฏ ุฏุงุฑุฏ ฺฉู ุจุง ฺฉู ุฏูุช ูโุชูุงู ุฏุฑุงูุช ฺฉู ุนูุช ุจู ุนุฏู ูุฌูุฏ ฺฉุงุฑุงฺฉุชุฑ ุงูุชูุง ุณุฑุขูุฏ ุชุงุจุน ุฏุฑ ูพุงุชูู ุนู ``:`` ูโุจุงุดุฏ. ุงู ููุฑุฏ ุฑุง ุงุตูุงุญ ฺฉุฑุฏู ู ุฏูุจุงุฑู ุงูุฏุงู ุจู ุงุฌุฑุง ุงุณฺฉุฑูพุช ``sample.py`` ูโููุงู:


.. code-block:: python
    :linenos:
    
    def sum_int(a, b):
        return a + b
    
    res = sum_int(2, 3)
    print(res)

    res = sum_int(3, 'C')
    print(res)
    
    
    '

::

    File "sample.py", line 11
        '
        ^
    SyntaxError: EOL while scanning string literal

ุงูโุจุงุฑ ูุฑุขูุฏ ุงุฌุฑุง ุจุฑูุงูู ุฏุฑ ููุทูโุง ุฏฺฏุฑ ูุชููู ูโฺฏุฑุฏุฏุ ุณุทุฑ ุงุฒุฏูู ุงุฒ ``sample.py``. ุงู ุฎุทุง ูุฒ ุงุฒ ููุน ``SyntaxError`` ูโุจุงุดุฏ ูู ุจุง ุชูุถุญ ูุชูุงูุช. ูุชู ุฎุทุง ูโฺฏูุฏ ฺฉู ูุญูู ูุฑุงุฑ ฺฏุฑูุชู ฺฉุงุฑุงฺฉุชุฑ ``'`` ุงุดุชุจุงู ุงุณุช. ุณุทุฑ ุงุฒุฏูู ุจุง ฺฉ ฺฉุงุฑุงฺฉุชุฑ ฺฉูุชุดู ูพุงุงู ุงูุชู ฺฉู ุฌูุช ุขู ู ูุฒ ุนุจุงุฑุช ุง ุฏุณุชูุฑ ูุฑุชุจุท ุจุง ุขู ุฏุฑ ุณุทุฑ ูุฐฺฉูุฑ ููุฌูุฏ ููโุจุงุดุฏ. 

ุจุง ุงุตูุงุญ ุงู ูุดฺฉูุ ุจุฑูุงูู ุงุฒ ุญุงูุช ``SyntaxError`` ุฎุงุฑุฌ ุดุฏู ู ฺฉุฏ ุงุณฺฉุฑูพุช ``sample.py`` ุจุง ููููุช ุจู ุจุงุชโฺฉุฏ ุชุฑุฌูู ู  ุจู ุงุฌุฑุง ุฏุฑูโุขุฏ. ุงฺฉููู ุฏุฑ ุฒูุงู ุงุฌุฑุงุ ุจุง ``TypeError`` ฺฉู ูพุดโุชุฑ ุจุฑุฑุณ ฺฉุฑุฏู ุจุฑุฎูุฑุฏ ุฎูุงูู ฺฉุฑุฏ!


ุงู ูฺฉุชู ุฑุง ูุฒ ุฏุฑ ูุธุฑ ุจฺฏุฑุฏ - ููุงูุทูุฑ ฺฉู ุงฺฏุฑ ุจู ุฎุฑูุฌโูุง ุฏูุช ฺฉุฑุฏู ุจุงุดุฏ ุญุชูุง ูุชูุฌู ุดุฏูโุงุฏ ุฏุฑ ุฏู ุญุงูุช ูุฑุจูุท ุจู ฺฏุฒุงุฑุด ุฎุทุง ูุฑุจูุท ุจู ``SyntaxError`` ุฎุจุฑ ุงุฒ ุณุทุฑ ``:Traceback (most recent call last)``  ฺฉู ุฏุฑ ุญุงูุช ุฎุทุง ุฒูุงู ุงุฌุฑุง ``TypeError`` ูุดุงูุฏู ฺฉุฑุฏูุ ููโุจุงุดุฏ. ุฏุฑ ูุงูุน ุงู ุณุทุฑ ุชููุง ุฏุฑ ฺฏุฒุงุฑุด ุฎุทุงูุง ฺฉู ูพุณ ุงุฒ ุงุฌุฑุง ุจุฑูุงูู ุฑุฎ ุฏููุฏ (Runtime errors)ุ ููุงุด ุฏุงุฏู ุฎูุงูุฏ ุดุฏ. ุฏุฑ ุฒูุงู ุจุฑุฑุณ ู ุชุฑุฌูู ฺฉุฏ ูพุงุชูู ุจู ุจุงุชโฺฉุฏ ูุฑุฌุง ูุดฺฉู ุจุงุดุฏ ุนููุงุช ุฏุฑ ููุงู ููุทู ูุชููู ูโุดูุฏ ู ุตุฑูุง ฺฏุฒุงุฑุด ูุจู ุจุฑ ุงุจุฑุงุฒ ุขู ููุทู ุจู ุจุฑูุงููโููุณ ุงุฑุงูู ูโฺฏุฑุฏุฏ ู ูู ฺุฒ ฺฉู ุจุชูุงู ุขู ุฑุง ฺฉ ฺฏุฒุงุฑุด ุฑุฏุงุจ ุจุง Traceback ูุงูุฏ ฺุฑุง ฺฉู ูููุฒ ุจุฑูุงูู ุจู ุงุฌุฑุง ุฏุฑูุงูุฏู ู ุงุตูุง ูุงุฒ ุจู ุงู ฺฉุงุฑ ูุณุช!


.. _python-exception-handling: 

ูุฏุฑุช ุฎุทุง (Exception Handling)
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

ุฏุฑ ุฒุจุงูโูุง ุจุฑูุงููโููุณ ุตุฏุง ุงุนุชุฑุงุถ ฺฉ Exception ูุงุจู ุฏุฑฺฉ ู ุชุดุฎุต ุงุณุช ู ูโุชูุงู ุจุฑุง ุขูโูุง ูุฑุขูุฏ ุฑุง ูพุดโุจู ฺฉุฑุฏ ฺฉู ุจุฑูุฒ ุขูโูุง ูู ุชููุง ุจุงุนุซ ุงุชูุงู ุจุฑูุงูู ูุดูุฏ ุจูฺฉู ุจุฑูุงูู ุจุชูุงูุฏ ุฏุฑ ูุณุฑ ุฏุฑุณุช ุจู ุงุฌุฑุง ุฎูุฏ ุงุฏุงูู ุฏูุฏ.

ุฏุฑ ุฒุจุงู ุจุฑูุงููโููุณ ูพุงุชูู ุฏุณุชูุฑ ``try/except`` ุจุฑุง ููู ููุธูุฑ ูุฑุงูู ุฏุฏู ุดุฏู ุงุณุช [`ุงุณูุงุฏ ูพุงุชูู <https://docs.python.org/3/reference/compound_stmts.html#the-try-statement>`__] ู ุฏุฑ ุงุฏุงูู ุจู ุจุฑุฑุณ ุงููุงุน ุณุงุฎุชุงุฑ ูุงุจู ูพุงุฏูโุณุงุฒ ุงุฒ ุงู ุฏุณุชูุฑ ุฎูุงูู ูพุฑุฏุงุฎุช.

``try/except``
------------------------


ุณุงุฎุชุงุฑ ุงู ุฏุณุชูุฑ ุจู ุดฺฉู ุฒุฑ ุงุณุช::

    try:
        pass

    except:
        pass

ุฏุฑ ุงู ุณุงุฎุชุงุฑ ุขู ูุทุนู ฺฉุฏ ฺฉู ูุญุชูู ุจุฑูุฒ Exception ูโุจุงุดุฏุ ุฏุงุฎู ุจุฏูู ``try`` ู ูุทุนู ฺฉุฏ ฺฉู ูโุจุงุณุช ูพุณ ุงุฒ ูููุน Exception ุจู ุงุฌุฑุง ุฏุฑุขุฏ (ุจุฎุด handler)ุ ุฏุงุฎู ุจุฏูู ``except`` ูุฑุงุฑ ูโฺฏุฑูุฏ::

    >>> def print_int_sum(a, b):
    ...     try:
    ...         print(a + b)
    ...     except:
    ...         print(f'ERROR: {a}+{b}')
    ... 
    >>> print_int_sum(2, 3)
    5
    >>> print_int_sum(9, 3)
    12
    >>> print_int_sum(5, 'D')
    ERROR: 5+D

ุญุงูุช ูุนู ุงุฒ ุฏุณุชูุฑ ``except`` ูุฑ ููุน Exceptionุง ฺฉู ุฏุฑ ุฏุงุฎู ุจุฏูู ``try`` ุฑุฎ ุฏูุฏ ุฑุง ุชุดุฎุต ู ุงุฏุงูู ุงุฌุฑุง ุจุฑูุงูู ุฑุง ุจู ุฏุณุช ูโฺฏุฑุฏุ ุจู ุงุตุทูุงุญ ฺฉ expression-less except ุงุณุช. ูู ูโุชูุงู ุฏุณุชูุฑ ``except`` ุฑุง ูุญุฏูุฏ ุจู ุชุดุฎุต ููุน ุฎุงุต ุงุฒ Exception ฺฉุฑุฏ. ุฏุฑ ุงู ุตูุฑุช ูโุจุงุณุช ููุน Exception ููุฑุฏ ูุธุฑ ุฎูุฏ ุฑุง ุฏุฑ ฺฉูุงุฑ ุฏุณุชูุฑ ``except`` ุฏุฑุฌ ููุงู:


.. code-block:: python
    :linenos:

    def print_int_sum(a, b):

        try:
            print(a + b)

        except TypeError:
            print(f'ERROR: {a}+{b}')


ูโุชูุงู ุจุง ุงุณุชูุงุฏู ุงุฒ ฺฉ ุฏุณุชูุฑ  ``try`` ฺูุฏู Exception ุฑุง ุชุดุฎุต ุฏูู. ุจุฑุง ุงู ููุธูุฑ ฺฉุงู ุงุณุช ุงุฒ ฺฉ ุฏุณุชูุฑ ``try`` ุจู ููุฑุงู ฺูุฏู ุฏุณุชูุฑ ``except`` ุงุณุชูุงุฏู ฺฉูู:

.. code-block:: python
    :linenos:

    def print_sum_div_first(a, b):

        try:
            sum = a + b
            div = sum / a
            print(div)

        except TypeError:
            print(f'TypeError: ({a}+{b!r})/{a}')

        except:
            print(f'OTHER ERROR: ({a}+{b!r})/{a}')


    print_sum_div_first(5, 6)
    print_sum_div_first(3, 'G')
    print_sum_div_first(0, 8)

::

    2.2
    TypeError: (3+'G')/3
    OTHER ERROR: (0+8)/0


ุณุงุฎุชุงุฑ ``try/except`` ุงู ูุซุงู ุดุงูู ุฏู ุฏุณุชูุฑ ``except`` ูโุจุงุดุฏุ ุฏุณุชูุฑ ูุฎุณุช ุชููุง ``TypeError`` ู ุฏุณุชูุฑ ุฏูู ูุฑ Exception ุฏฺฏุฑ ุจู ุฌุฒ ููุงุฑุฏ ุจุงูุง ุฎูุฏ (ุฏุฑ ุงูุฌุง: ``TypeError``) ุฑุง ุชุดุฎุต ูโุฏููุฏุ ฺุฑุง ฺฉู ููุณุฑ ูพุงุชูู ุงุฒ ุจุงูุง ุจู ูพุงู ุจู ุฏูุจุงู handler ูุฑุจูุทู ูโฺฏุฑุฏุฏ ู ูพุณ ุงุฒ ุงูุชูุ ุนููุงุช ุฌุณุชุฌู handler ูุชููู ูโุดูุฏ.

ุฏุฑ ูุซุงู ูุจูุ ุฏุณุชูุฑ ููุฌูุฏ ุฏุฑ ุณุทุฑ ฑท ุจุงุนุซ ุจุฑูุฒ ุฎุทุง ยซุชูุณู ุจุฑ ุตูุฑยป [`ูฺฉโูพุฏุง <https://en.wikipedia.org/wiki/Division_by_zero>`__] ุง Exceptionุง ุจุง ูุงู ``ZeroDivisionError`` ุฏุฑ ูพุงุชูู ุดุฏู ุงุณุช - ฺฉู ูโุชูุงู ุจู ุตูุฑุช ุฒุฑ ุขู ุฑุง ุจุงุฒููุณ ูููุฏ:

.. code-block:: python
    :linenos:

    def print_sum_div_first(a, b):

        try:
            sum = a + b
            div = sum / a
            print(div)

        except TypeError:
            print(f'TypeError: ({a}+{b!r})/{a}')

        except ZeroDivisionError:
            print(f'ZeroDivisionError: ({a}+{b!r})/{a}')


    print_sum_div_first(5, 6)
    print_sum_div_first(3, 'G')
    print_sum_div_first(0, 8)

::

    2.2
    TypeError: (3+'G')/3
    ZeroDivisionError: (0+8)/0


ฺูุงูฺู ูฺฉุงูุฒู ูุฏุฑุช ุฎุทุง ุดูุง ุจุฑุง ฺูุฏู ููุน Exception ูุดุฎุต ฺฉุณุงู ุงุณุช ูโุชูุงูุฏ ุขู ุฏุณุชูุฑูุง ``except`` ุฑุง ุจุง ฺฉุฏฺฏุฑ ุชุฑฺฉุจ ฺฉุฑุฏ ู ุชููุง ุงุฒ ฺฉ ุฏุณุชูุฑ ``except`` ุงุณุชูุงุฏู ููุงุฏ. ุจุฑุง ุงู ููุธูุฑ ุชููุง ฺฉุงู ุงุณุช ูุงู ุชูุงู Exceptionูุง ููุฑุฏ ูุธุฑ ุฎูุฏ ุฑุง ุฏุฑ ูุงูุจ ฺฉ ุด ุชููพูู ุจู ุฏุณุชูุฑ ``except`` ุจุณูพุฑุฏ:

.. code-block:: python
    :linenos:

    def print_sum_div_first(a, b):

        try:
            sum = a + b
            div = sum / a
            print(div)

        except (TypeError, ZeroDivisionError):
            print(f'Error: ({a}+{b!r})/{a}')


    print_sum_div_first(5, 6)
    print_sum_div_first(3, 'G')
    print_sum_div_first(0, 8)

::

    2.2
    Error: (3+'G')/3
    Error: (0+8)/0


ูุฑ ฺุฒ ุฏุฑ ูพุงุชูู ฺฉ ุด ุงุณุชุ ุญุช Exceptionูุง! ููุณุฑ ูพุงุชูู ุฏุฑ ุงุฒุง ูุฑ Exceptionุง ฺฉู ุฑุฎ ูโุฏูุฏ ฺฉ ุด ูุฒ ุฏุฑ ุงุฎุชุงุฑ ุจุฑูุงููโููุณ ูุฑุงุฑ ูโุฏูุฏ ู ุงู ุด ุฏุฑ ุตูุฑุช ุชูุงู ุงุฒ ุทุฑู ุฏุณุชูุฑ ``except`` ูุงุจู ุฏุณุชุฑุณ ูโุจุงุดุฏ. ุจุฑุง ุงู ููุธูุฑ ุชููุง ฺฉุงู ุงุณุช ุงุฒ ุฏุณุชูุฑ ``as`` ุจุฑุง ุงูุชุณุงุจ ุขู Exception ุจู ฺฉ ูุชุบุฑ ุจุง ูุงู ุฏูุฎูุงู ุงุณุชูุงุฏู ููุงู:

.. code-block:: python
    :linenos:

    def print_sum_div_first(a, b):

        try:
            sum = a + b
            div = sum / a
            print(div)

        except TypeError as te:
            print(f'{te.__class__.__name__}: ({a}+{b!r})/{a}')

        except ZeroDivisionError as zde:
            print(f'{zde.__class__.__name__}: ({a}+{b!r})/{a}')


    print_sum_div_first(5, 6)
    print_sum_div_first(3, 'G')
    print_sum_div_first(0, 8)


.. code-block:: python
    :linenos:

    def print_sum_div_first(a, b):

        try:
            sum = a + b
            div = sum / a
            print(div)

        except (TypeError, ZeroDivisionError) as err:
            print(f'{err.__class__.__name__}: ({a}+{b!r})/{a}')

    print_sum_div_first(5, 6)
    print_sum_div_first(3, 'G')
    print_sum_div_first(0, 8)

::

    2.2
    TypeError: (3+'G')/3
    ZeroDivisionError: (0+8)/0

ุงูุจุชู ฺูุงูฺู ูุงู ูุณุชุฏ ุด Exception ุฑุง ุงุฒ ุทุฑู ฺฉ ุฏุณุชูุฑ ``except`` ฺฉู (ุนู ุจุฏูู ุฐฺฉุฑ ูุงู Exception ุฎุงุต) ุฏุฑุงูุช ฺฉูุฏุ ูโุชูุงูุฏ ุงุฒ ููุน ุง ฺฉูุงุณ ``Exception`` ฺฉู ุฏุฑ ูุงูุน supperclass ุงฺฉุซุฑ Exceptionูุง ูพุงุชูู ูโุจุงุดุฏุ ุงุณุชูุงุฏู ููุงุฏ:

.. code-block:: python
    :linenos:

    def print_sum_div_first(a, b):

        try:
            sum = a + b
            div = sum / a
            print(div)

        except Exception as err:
            print(f'{err.__class__.__name__}: ({a}+{b!r})/{a}')

    print_sum_div_first(5, 6)
    print_sum_div_first(3, 'G')
    print_sum_div_first(0, 8)

::

    2.2
    TypeError: (3+'G')/3
    ZeroDivisionError: (0+8)/0


.. tip:: 

  ุจู ุตูุฑุช ฺฉู ููุช ุฏุฑ ุฒูุงู ุงุฌุฑุง ุฏุณุชูุฑุงุช ุฏุงุฎู ุจุฏูู ``try`` ฺฉ Exception ุฑุฎ ูโุฏูุฏุ ููุณุฑ ูพุงุชูู ุงุฌุฑุง ุจุฑูุงูู ุฑุง ุฏุฑ ุขู ููุทู ูุชููู ู ุดุฑูุน ุจู ุฌุณุชุฌู ุจุฑุง ุงูุชู ฺฉ handler ุง ููุงู ุฏุณุชูุฑ ``except`` ูุชูุงุณุจ ุจุง ุขู Exception ูโฺฉูุฏ. ุฏุฑ ุตูุฑุช ูพุฏุง ฺฉุฑุฏู ``except`` ููุงุณุจุ ุงุฏุงูู ุฑููุฏ ุงุฌุฑุง ุจุฑูุงูู ุฑุง ุงุฒ ุขู ุณุฑ ูโฺฏุฑุฏ ู ุฏุฑ ุบุฑ ุงู ุตูุฑุช Exception ุจุฏูู handler ุจุงุนุซ ุชููู ุงุฌุฑุง ฺฉู ุจุฑูุงูู ูโฺฏุฑุฏุฏ.

.. tip:: 

  ฺูุงูฺู ุงุฒ ฺูุฏู ุฏุณุชูุฑ ``except`` ุจูุฑู ูโฺฏุฑุฏ ุจุงุฏ ุชูุฌู ุฏุงุดุชู ุจุงุดุฏ ฺฉู ุฏุณุชูุฑ ``except`` ฺฉู ุง ููุงู expression-less except - ุฏุฑ ุตูุฑุช ูุฌูุฏ - ูโุจุงุณุช ุจู ุนููุงู ุขุฎุฑู ุฏุณุชูุฑ ``except`` ูุฑุงุฑ ุจฺฏุฑุฏุ ุฏุฑ ุบุฑ ุงู ุตูุฑุช ุฏฺฏุฑ ุฏุณุชูุฑูุง ``except`` ฺฉู ููุน Exception ุฏุฑ ุขูโูุง ูุดุฎุต ุดุฏู ุงุณุชุ ูุฑุตุช ุงุฌุฑุง ูพุฏุง ูุฎูุงููุฏ ฺฉุฑุฏ.

.. tip:: 

  ุจู ุตูุฑุช ฺฉู ุฏุณุชูุฑ ``try`` ูพุงุชูู ูุงูุฏ ฺฉ ุญูุฒู ุง Scope ูุฌุฒุง ูโุจุงุดุฏุ ุจูุงุจุฑุงู ุชูุงู ูุชุบุฑูุง ฺฉู ุฏุฑ ุจุฏูู ุฏุณุชูุฑ ``try`` ุชุนุฑู ูโฺฏุฑุฏูุฏ ุฌุฒ ุงุฒ ุญูุฒู ุจุฑูู ุฎูุฏ ูุณุชูุฏ ู ุฏุฑ ุชูุงู ุจุฎุดโูุง ุฏุงุฎู ุขู ุญูุฒู ุฏุฑ ุฏุณุชุฑุณ ุฎูุงููุฏ ุจูุฏ. ุงูุจุชู ูุจุงุฏ ูุฑุงููุด ฺฉุฑุฏ ฺฉู ุงฺฏุฑ ุฏุฑ ููฺฏุงู ุงูุชุณุงุจ ุจู ูุงู ฺฉ ูุชุบุฑ ุฎุทุง ุฑุฎ ุฏุงุฏู ุจุงุดุฏุ ุจุฏู ุงุณุช ฺฉู ุขู ูุชุบุฑ ุงุฌุงุฏ ูุดุฏู ู ุงุณุงุณุง ุฏุฑ ุฏุณุชุฑุณ ูุฒ ูุฎูุงูุฏ ุจูุฏ.

.. tip:: 

  ุด Exception ฺฉู ุชูุณุท ุฏุณุชูุฑ ``except`` ุฏุฑุงูุช ูโฺฏุฑุฏุฏ ุชููุง ุฏุฑ ุฏุงุฎู ุจุฏูู ููุงู ุฏุณุชูุฑ ``except`` ุฏุฑ ุฏุณุชุฑุณ ุฎูุงูุฏ ุจูุฏุ ฺุฑุง ฺฉู ุจูุงูุงุตูู ูพุณ ุงุฒ ุงุชูุงู ุฏุณุชูุฑุงุช ุฏุงุฎู ุจุฏูู ุขู ``except``ุ ุด ูุฐฺฉูุฑ ูุฒ ุจู ุตูุฑุช ุฎูุฏฺฉุงุฑ ุญุฐู ูโฺฏุฑุฏุฏ.


``try/except/else``
------------------------

ุฏุฑ ฺฉูุงุฑ ุฏุณุชูุฑ ``try/except`` ูโุชูุงู ุฏุณุชูุฑ ``else`` ุฑุง ูุฒ ุงุณุชูุงุฏู ฺฉุฑุฏ. ุจุง ุงู ฺฉุงุฑุจุฑุฏ ฺฉู ูโุชูุงู ูุทุนู ฺฉุฏ ุฑุง ุจุฑุง ููุงูุน ฺฉู ุงุฌุฑุง ุจุฎุด ``try`` ุจู ูพุงุงู ุฑุณุฏู ู ูฺ Exception ุฑุฎ ูุฏุงุฏู ุจุงุดุฏุ ุจู ุงุฌุฑุง ุฏุฑุขูุฑู:


.. code-block:: python
    :linenos:

    def print_sum_div_first(a, b):

        try:
            sum = a + b
            div = sum / a

        except Exception as err:
            print(f'{err.__class__.__name__}: ({a}+{b!r})/{a}')

        else:
            print(f'result: ({a}+{b!r})/{a} = {div}')

    print_sum_div_first(5, 6)
    print_sum_div_first(3, 'G')
    print_sum_div_first(0, 8)

::

    result: (5+6)/5 = 2.2
    TypeError: (3+'G')/3
    ZeroDivisionError: (0+8)/0

ุจู ฺฉ ูุซุงู ุฏฺฏุฑ ูุฒ ุชูุฌู ููุงุฏ (ูุฑุชุจุท ุจุง ูุจุญุซ ูุงูโูุง - ุฏุฑุณ ุฏูู):

.. code-block:: python
    :linenos:

    def write_to_log(text, write_mode):
        try:
            output = open('log_file.txt', write_mode)
            output.write(text)

        except FileNotFoundError as fnfe:
            print('File Not Found!!!')

        else:
            output.close()
            print('Successful, closed!')


    write_to_log('A text to insert in the log file', 'r') # WRONG mode!
    print('*' * 30)
    write_to_log('A text to insert in the log file', 'a')

::

    File Not Found!!!
    ******************************
    Successful, closed!


**ุชูุฌู ุฏุงุดุชู ุจุงุดุฏุ** ฺูุงูฺู ุจุฏูู ``try`` ุดุงูู ุฏุณุชูุฑ ``return`` ุจุงุดุฏุ ุขูฺฏุงู ุจุฏูู ุฏุณุชูุฑ ``else`` ุงุฌุฑุง ูุฎูุงูุฏ ุดุฏ!:


.. code-block:: python
    :linenos:

    def print_sum_div_first(a, b):
        try:
            sum = a + b
            div = sum / a
            return 'Successful'

        except Exception as err:
            return 'Failed'

        else:
            return 'Successful, from else!'

    result = print_sum_div_first(5, 6)   # Successful
    print(result)

    result = print_sum_div_first(3, 'G') # Failed
    print(result)

::

    Successful
    Failed



``try/finally``  ``try/except/finally``  ``try/except/else/finally``
---------------------------------------------------------------------------------------------

ุฏุณุชูุฑ ``finally`` ูุฒ ฺฉ ุฏุณุชูุฑ ุงุฎุชุงุฑ ูุดุงุจู ุจุง ``else`` ูโุจุงุดุฏ ฺฉู ูโุชูุงู ุงุฒ ุขู ุฏุฑ ฺฉูุงุฑ ุฏุณุชูุฑ ``try`` ุจูุฑู ฺฏุฑูุช. ุจุง ุงุณุชูุงุฏู ุงุฒ ุงู ุฏุณุชูุฑ ูโุชูุงู ฺฉ ูุทุนู ฺฉุฏ ุฑุง ููุง ฺฉุฑุฏ ฺฉู ุฏุฑ ูุฑ ุญุงูุช ุงุฌุฑุง ฺฏุฑุฏุฏ ุนู ฺู ุฏุฑ ุญุงูุช ฺฉู Exceptionุง ุฏุงุฎู ``try`` ุฑุฎ ุฏูุฏ ู ฺู ูุฏูุฏ! ุจุฏูู ุฏุณุชูุฑ ``finally`` ุงุฌุฑุง ูโุดูุฏ.

ุงฺฉููู ูโุชูุงู ุฑููุฏ ฺฉู ูุฑุขูุฏ ุงุฌุฑุง ุฏุณุชูุฑุงุช ูพุงุชูู ุฏุฑ ฺฉ ุจูุงฺฉ ``try`` ุฑุง ุจู ุงู ุตูุฑุช ุดุฑุญ ุฏุงุฏ:

**ฑ) ุฏุฑ ุตูุฑุช ุนุฏู ุจุฑูุฒ Exception** ุฏุงุฎู ุจุฏูู ุฏุณุชูุฑ ``try``: ูพุณ ุงุฒ ูพุงุงู ุงุฌุฑุง ุฏุณุชูุฑุงุช ุฏุงุฎู ุจุฏูู ุฏุณุชูุฑ ``try``ุ ููุทู ุงุฌุฑุง ุจุฑูุงูู ุจู ุฏุณุชูุฑ ``else`` - ุฏุฑ ุตูุฑุช ูุฌูุฏ - ุณูพุฑุฏู ูโุดูุฏุ ูพุณ ุงุฒ ูพุงุงู ุงุฌุฑุง ุฏุณุชูุฑุงุช ุฏุงุฎู ุจุฏูู ``else``ุ ููุทู ุงุฌุฑุง ุจุฑูุงูู ุจู ุฏุณุชูุฑ ``finally`` - ุฏุฑ ุตูุฑุช ูุฌูุฏ - ุณูพุฑุฏู ูโุดูุฏ.

**ฒ) ุฏุฑ ุตูุฑุช ุจุฑูุฒ Exception** ุฏุงุฎู ุจุฏูู ุฏุณุชูุฑ ``try``: ููุทู ุงุฌุฑุง ุจุฑูุงูู ุจูุงูุงุตูู ุจู ุฏุณุชูุฑ ``except`` ููุงุณุจ ุณูพุฑุฏู ูโุดูุฏุ ูพุณ ุงุฒ ูพุงุงู ุงุฌุฑุง ุฏุณุชูุฑุงุช ุฏุงุฎู ุจุฏูู ``except``ุ ููุทู ุงุฌุฑุง ุจุฑูุงูู ุจู ุฏุณุชูุฑ ``finally`` - ุฏุฑ ุตูุฑุช ูุฌูุฏ - ุณูพุฑุฏู ูโุดูุฏ.




.. code-block:: python
    :linenos:

    def print_sum_div_first(a, b):
        try:
            print('----> try')
            sum = a + b
            div = sum / a

        except Exception as err:
            print('----> except')

        else:
            print('----> else')

        finally:
            print('----> finally')


    print_sum_div_first(5, 6)
    print('*' * 20)
    print_sum_div_first(3, 'G')

::

    ----> try
    ----> else
    ----> finally
    ********************
    ----> try
    ----> except
    ----> finally

ุญุช ุงฺฏุฑ ุฒูุงู ุฏุงุฎู ุจุฏูู ุฏุณุชูุฑ ``except`` ูุฒ ฺฉ Exception ุฏฺฏุฑ ุฑุฎ ุฏูุฏุ ููุณุฑ ูพุงุชูู ุงุนูุงู ุงุนุชุฑุงุถ ุขู Exception ุฑุง ูููุชุง ูฺฏูโูโุฏุงุฑุฏ ุชุง ุจุฏูู ุฏุณุชูุฑ ``finally`` ุจู ุตูุฑุช ฺฉุงูู ุงุฌุฑุง ฺฏุฑุฏุฏ. ุฏุฑ ูุงูุน ฺฉุงุฑุจุฑุฏ ุงุตู ุฏุณุชูุฑ ``finally`` - ฺฉู ุชุญุช ูุฑ ุดุฑุงุท ุงุฌุฑุง ูโฺฏุฑุฏุฏ - ุชูุฒฺฉุงุฑ ุง Cleaning Up ฺฉุฑุฏู ฺฉุฏ ูพุณ ุงุฒ ุงูุฌุงู ฺฉุงุฑ ูุดุฎุต ุงุณุช (ูพุงฺฉ ฺฉุฑุฏู ูุงูโูุง ูููุชุ ุขุฒุงุฏุณุงุฒ ููุงุจุนุ ุญุฐู ุงุดุง ฺฉู ุฏฺฏุฑ ููุฑุฏ ูุงุฒ ูุณุชูุฏ ู...) ฺฉู ุงุฒ ุขู ูุนูููุง ุจู ุนููุงู Cleanup Handler ูุฒ ุงุฏ ูโุดูุฏ:


.. code-block:: python
    :linenos:

    def print_sum_div_first(a, b):
        try:
            sum = a + b
            div = sum / a

        except TypeError as err:
            print(f'{err.__class__.__name__}: ({a}+{b!r})/{a} =', (a+b)/a)

        finally:
            print('----> finally')


    print_sum_div_first(5, 6)
    print('*' * 20)
    print_sum_div_first(3, 'G')

::

    ----> finally
    ********************
    ----> finally
    Traceback (most recent call last):
      File "sample.py", line 3, in print_sum_div_first
        sum = a + b
    TypeError: unsupported operand type(s) for +: 'int' and 'str'

    During handling of the above exception, another exception occurred:

    Traceback (most recent call last):
      File "sample.py", line 15, in <module>
        print_sum_div_first(3, 'G')
      File "sample.py", line 7, in print_sum_div_first
        print(f'{err.__class__.__name__}: ({a}+{b!r})/{a} =', (a+b)/a)
    TypeError: unsupported operand type(s) for +: 'int' and 'str'

ููุงูุทูุฑ ฺฉู ุงุฒ ุฎุฑูุฌ ููููู ฺฉุฏ ุจุงูุง ูุดุงูุฏู ูโุดูุฏุ ุฏุงุฎู ุจุฏูู ุฏุณุชูุฑ ``except``ุ ฺฉ Exception ุฏฺฏุฑ ุฑุฎ ุฏุงุฏู ุงุณุช. ูฺฉุชู ูุงุจู ุชูุฌู ุงู ุงุณุช ฺฉู ุญุช ุฏุฑ ุงู ูุถุนุช ูุฒ ุจุฏูู ุฏุณุชูุฑ ``finally`` ุงุฌุฑุง ุดุฏู ู ุณูพุณ ูููุน Exception ุจุฏูู ``except`` ุจุงุนุซ ุชููู ุจุฑูุงูู ุดุฏู ุงุณุช.

ุงฺฏุฑ ุจู ฺฏุฒุงุฑุด Traceback ูพุงุชูู ุฏุฑ ุงู ูุถุนุช ุฏูุช ููุงุฏุ ูุดุงูุฏู ุฎูุงูุฏ ฺฉุฑุฏ ฺฉู ุงู ฺฏุฒุงุฑุด ฺูุฏุฑ ฺฉุงูู ุงุณุช ฺุฑุง ฺฉู ุญุช ุจู ูุง ูโฺฏูุฏ ุฏุฑ ููฺฏุงู handle ฺฉุฑุฏู ฺฉ Exception ุจูุฏู ฺฉู Exception ุฏฺฏุฑ ุฑุฎ ุฏุงุฏู ุงุณุช!


**ุชูุฌู ุฏุงุดุชู ุจุงุดุฏุ** ฺูุงูฺู ุจุฏูู ``try`` ู ``except`` ู ``finally`` ุดุงูู ุฏุณุชูุฑ ``return`` ุจุงุดูุฏุ ุขูฺฏุงู ุงู ุฏุณุชูุฑ ``return`` ุงุฒ ุจุฏูู ุฏุณุชูุฑ ``finally`` ุงุณุช ฺฉู ุงุฌุฑุง ุฎูุงูุฏ ุดุฏ!:


.. code-block:: python
    :linenos:

    def print_sum_div_first(a, b):
        try:
            sum = a + b
            div = sum / a
            return 'Successful'

        except Exception as err:
            return 'Failed'

        else:
            return 'Successful, from else!'

        finally:
            return '---------->finally!'

    result = print_sum_div_first(5, 6)   # Successful
    print(result)

    result = print_sum_div_first(3, 'G') # Failed
    print(result)

::

    ---------->finally!
    ---------->finally!


ฺฏุงู ุชููุง ุงุฒ ุฏุณุชูุฑ ``finally`` ุฏุฑ ฺฉูุงุฑ ``try`` ุงุณุชูุงุฏู ูโฺฏุฑุฏุฏุ ุนู ุจุฏูู ุญุถูุฑ ูฺโฺฏููู ุฏุณุชูุฑ ``except`` ุจู ุตูุฑุช ``try/finally``. ูโุชูุงู ุงุฒ ุงู ูุงูุจ ุจุฑุง ุฒูุงูฺฉู ุฑุฎุฏุงุฏ Exception ู ูุฏุฑุช ุขู ุจุฑุงูุงู ุงููุช ูุฏุงุดุชู ุจุงุดุฏุ ุจูุฑู ุจฺฏุฑู. ุจุง ุงู ุญุงู ุจู ููููู ฺฉุฏ ุฒุฑ ุชูุฌู ููุงุฏ:


.. code-block:: python
    :linenos:

    def print_sum_div_first(a, b):
        try:
            sum = a + b
            div = sum / a
            print(f'----> Result: {div}')

        finally:
            print('--------> Finished!')


    print_sum_div_first(5, 6)
    print('*' * 30)
    print_sum_div_first(3, 'G')

::

    ----> Result: 2.2
    --------> Finished!
    ******************************
    --------> Finished!
    Traceback (most recent call last):
      File "sample.py", line 13, in <module>
        print_sum_div_first(3, 'G')
      File "sample.py", line 3, in print_sum_div_first
        sum = a + b
    TypeError: unsupported operand type(s) for +: 'int' and 'str'

ุจู ูุฑ ุญุงู Exception ุจุฏูู handler ุจุงุนุซ ุชููู ุงุฌุฑุง ุจุฑูุงูู ูโุดูุฏ ุงูุง ุงฺฏุฑ ุฏุงุฎู ุจุฏูู ``finally`` ุดุงูู ุฏุณุชูุฑ ``return`` ุจุงุดุฏุ ุขูฺฏุงู ููุณุฑ ูพุงุชูู ุงุฒ ุงุนูุงู Exception ุฑุฎ ุฏุงุฏู ฺฉู ุฏุฑ ุญุงู ุญุงุธุฑ ุจู ุตูุฑุช ูููุช ูฺฏูโุฏุงุดุชู ุงุณุช ุชุง ุงุฌุฑุง ุจุฏูู ``finally`` ุจู ูพุงุงู ุจุฑุณุฏุ ุตุฑู ูุธุฑ ุฎูุงูุฏ ฺฉุฑุฏ!:

.. code-block:: python
    :linenos:

    def print_sum_div_first(a, b):
        try:
            sum = a + b
            div = sum / a
            print(f'----> Result: {div}')

        finally:
            print('--------> Finished!')
            return None


    print_sum_div_first(5, 6)
    print('*' * 30)
    print_sum_div_first(3, 'G')

::

    ----> Result: 2.2
    --------> Finished!
    ******************************
    --------> Finished!


ุฑููุฏ ุงูุชุดุงุฑ Exception
----------------------------

ุฏุฑ ุชูุงู ูุซุงูโูุง ฺฉู ุฏุฑ ุงู ุจุฎุด ุงุฑุงุฆู ุดุฏุ ุจุฑุง ุณุงุฏูโุณุงุฒ ูุทูุจ ุชููุง ุจู ุจุฑุฑุณ ูุฏุฑุช ุฎุทุง ุฏุงุฎู ฺฉ ุชุงุจุน ูพุฑุฏุงุฎุชู. ูู ุจุงุฏ ุงู ููุฑุฏ ุฑุง ุฏุฑ ูุธุฑ ุฏุงุดุชู ุจุงุดุฏุ ุฒูุงู ฺฉู ฺฉ Exception ุฑุฎ ูโุฏูุฏุ ุงู Exception ุจู ุชุฑุชุจ ูุฑุงุญู ูุฑุงุฎูุงู ุฑุง ุจู ุงุจุชุฏุง ุงุฌุฑุง ุฏุฑ ุจุฑูุงูู ุท ูโฺฉูุฏ ู ูุฑ ุจุงุฑ ฺูุงูฺู ฺฉ handler (ุฏุณุชูุฑ ``try`` ุจุง ``except`` ููุงุณุจ) ูพุฏุง ูุดูุฏุ ุงู Exception ุจู ูุฑุญูู ูพุดโุชุฑ ุชุญูู ุฏุงุฏู ูโุดูุฏ ุชุง ุดุงุฏ ฺฉ handler ุจุฑุง ุขู ูพุฏุง ุดูุฏ. ุงู ุฑููุฏ ุชุง ุฑุณุฏู ุจู ุงุณฺฉุฑูพุช (ูุงู py. ุงุตู ุจุฑูุงูู) ุงุฏุงูู ูโุงุจุฏ ู ุฏุฑ ุตูุฑุช ุนุฏู ูพุดโุจู handler ุขูฺฏุงู Exception ุฏุฑ ุงู ููุทู ุจุฑูุฒ ู ููุฌุฑ ุจู ุชููู ฺฉู ุจุฑูุงูู ูโฺฏุฑุฏุฏ. ุจู ุนููุงู ูุซุงู ููููู ฺฉุฏ ุฒุฑ ุฑุง ุฏุฑ ูุธุฑ ุจฺฏุฑุฏ:


.. code-block:: python
    :linenos:

    def print_sum_div_first(a, b):
        sum = a + b
        div = sum / a
        print(div)


    def action(a, b):
        try:
            if isinstance(a, int):
               print_sum_div_first(a, b)

        except ZeroDivisionError as err:
            print(f'[action function ERROR!!!] {err.__class__.__name__}')


    try:
        action(5, 6)    # Successfully
        action(0, 8)    # raise ZeroDivisionError
        action(3, 'G')  # raise TypeError

    except Exception as err:
        print(f'[module ERROR!!!] {err.__class__.__name__}')

::

    2.2
    [action function ERROR!!!] ZeroDivisionError
    [module ERROR!!!] TypeError

ุฏุฑ ููููู ฺฉุฏ ุจุงูุง ููุงูุทูุฑ ฺฉู ูุดุฎุต ุงุณุช ุชูุงู Exceptionูุง ุฏุฑ ุฏุงุฎู ุชุงุจุน ``print_sum_div_first`` ุฑุฎ ูโุฏูุฏ ูู ุงุฒ ุขูุฌุง ฺฉู ุงู ุชุงุจุน ูุงูุฏ handler ูโุจุงุดุฏุ Exceptionูุง ุจู ฺฉ ูุฑุญูู ูุจูโุชุฑ ุนู ุชุงุจุน ``action`` ุชุญูู ูโฺฏุฑุฏูุฏุ ูู ุงู ุชุงุจุน ุชููุง ฺฉ handler ุจุฑุง ``ZeroDivisionError`` ุฏุงุดุชู ูพุณ ุชูุงู Exceptionูุง ุงุญุชูุงู ุฏฺฏุฑ ุงุฒ ุฌููู ``TypeError`` ุจู ฺฉ ูุฑุญูู ูุจูโุชุฑ ุชุญูู ู ุฎูุดุจุฎุชุงูู ุฏุฑ ุขูโุฌุง handle ูโุดููุฏ!


ูุฏุฑุช ุฎุทุง ุชูุฏุฑุชู (Nested Exception Handling)
---------------------------------------------------

ุจู ุตูุฑุช ฺฉู ุจุฏูู ูุฑ ฺฉ ุงุฒ ุฏุณุชูุฑูุง ``try`` ุ ``except`` ุ ``else`` ุ ``finally`` ุจู ุฎูุฏโุฎูุฏ ูโุชูุงููุฏ ุดุงูู ฺฉ ุฏุณุชูุฑ ``try/except/else/finally`` ุฏฺฏุฑ ุจุงุดุฏ. ูุฑ ุฌุง ฺฉู ฺฉุฏ ููุดุชู ุดูุฏ ุขูุฌุง ูุฒ ุงุญุชูุงู ุจุฑูุฒ Exception ูุฌูุฏ ุฏุงุฑุฏ ู ูุฑ ุฌุง ฺฉู ุงุญุชูุงู ุจุฑูุฒ Exception ูุฌูุฏ ุฏุงุดุชู ุจุงุดุฏ ุจู ฺฉ handler ุจุฑุง ุขู ูุงุฒ ุงุณุช.

ุงูุจุชู ุงุฒ ุขูุฌุง ฺฉู ุฏุฑ ฺฉ ุงุฒ ุจูุฏูุง ููุณูู ูพุงุชูู ุขูุฏู: `PEP 20: Flat is better than nested <https://www.python.org/dev/peps/pep-0020/>`__ ุงูุฌุงู ุงูโฺฉุงุฑ ฺูุฏุงู ูพุงุชูู ููโุจุงุดุฏ ู ุจุฑูุงููโููุณ ุงุญุชูุงูุง ูโุชูุงูุฏ ุจุง ฺฉู ุฏูุช ุจุดุฑ ุงุฒ ุณุงุฎุชุงุฑ ุชูุฏุฑุชู ูพุฑูุฒ ฺฉูุฏ ู ฺฉุฏ ุจู ูุฑุงุชุจ ุฎูุงูุงุชุฑ ุชูุณุนู ุฏูุฏ. ุจู ูุฑ ุญุงู ุงูฺฉุงู ุงู ฺฉุงุฑ ุฏุฑ ุฒุจุงู ุจุฑูุงููโููุณ ูพุงุชูู ุจุฑุง ุจุฑูุงููโููุณ ูุญููุธ ูฺฏูโุฏุงุดุชู ุดุฏู ุงุณุช.



ูุฏุฑุช ุฎุทุง ู ุฏุณุชูุฑ ``with``
--------------------------------------

ุงุฒ ุฏุฑุณ ุจุณุช ู ฺฉู ุจุง ููููู Context Manager ู ุงุฑุชุจุงุท ุขู ุจุง ุฏุณุชูุฑ ``with`` ุขุดูุง ูุณุชู. ุงูฺฉู ูุฏุฑุช ุฎุทุง ุจุฑุง ุงู ุณุงุฎุชุงุฑ ฺฺฏููู ุจุงุดุฏ ุจู ุงู ุจุณุชฺฏ ุฏุงุฑุฏ ฺฉู ูโุฎูุงูู ุฏุฑ ฺฉุฏุงู ููุทู Exception ุงุญุชูุงู ุฑุง handle ฺฉูู. ุจุฑ ุงุณุงุณ ููููู Context Managerุ ุฏุฑ ฺูุฏ ููุทู ุฒุฑ ุงุญุชูุงู ุจุฑูุฒ Exception ูุฌูุฏ ุฏุงุฑุฏ:

* ุฏุงุฎู ูุชุฏ ``__init__`` ฺฉูุงุณ ContextManager
* ุฏุงุฎู ูุชุฏ ``__enter__`` ฺฉูุงุณ ContextManager
* ุฏุงุฎู ุจุฏูู ุฏุณุชูุฑ ``with``
* ุฏุงุฎู ูุชุฏ ``__exit__`` ฺฉูุงุณ ContextManager


ุงฺฏุฑ ุจุฑุงูุงู ููู ูุจุงุดุฏ ูโุชูุงูู ุจู ุตูุฑุช ุฒุฑ ฺฉ handler ุจุฑุง ุจุฑูุฒ Exceptionูุง ุงุญุชูุงู ุฏุฑ ุชูุงู ุญุงูุงุช ุจุงูุง ูพุงุฏูโุณุงุฒ ููุงู::


    try:
        with ContextManager():
            do_something()
    except Exception as err:
        pass


ุฏุฑ ุบุฑ ุงู ุตูุฑุช ูโุชูุงูุฏ ูุดุงุจู ููููู ฺฉุฏ ุฒุฑ ุนูู ููุงุฏ::

    try:
        context_manager = ContextManager()

    except Exception as err:
        # Handler for: '__init__'

    else:
        try:
            with context_manager:
                try:
                    do_something()

                except Exception as err:
                    # Handler for: 'with' body

        except Exception as err:
            # Handler for: '__enter__' and '__exit__'


[`PEP 343 - Specification: The 'with' Statement <https://www.python.org/dev/peps/pep-0343/#specification-the-with-statement>`__]


ฺฉุงุฑุง (Performance)
----------------------------

ููุดู ุงู ุณูุงู ูุทุฑุญ ูโุดูุฏ ฺฉู ุขุง ุจูุชุฑ ุงุณุช ุจุง ฺฉูุชุฑู ุดุฑุท ู ูพุงุฏูโุณุงุฒ ฺูุฏู ุฏุณุชูุฑ ``if`` ุงุฒ ุจุฑูุฒ Exception ุฌููฺฏุฑ ฺฉูู ุง ุฎู ุณุงุฏู ุงู ูุธูู ุฑุง ุจู ฺฉ ุณุงุฎุชุงุฑ handler ุจุณูพุงุฑู. ฺฉุฏุงู ุฑูุด ฺฉุงุฑุง ุจูุชุฑ ุฏุงุฑุฏุ

ุฒุจุงู ุจุฑูุงููโููุณ ูพุงุชูู ุงุฒ ูุธุฑู ยซุฏุฑุฎูุงุณุช ุจุฎุดุด ุฑุงุญุชโุชุฑ ุงุฒ ฺฉุณุจ ุงุฌุงุฒู ุงุณุชยป ูพุฑู ูโฺฉูุฏ [`EAFP: Easier to ask for forgiveness than permission <https://docs.python.org/3/glossary.html?highlight=eafp#term-eafp>`__]. ุจุฑ ููู ุงุณุงุณ ูพุงุชูู ุจู ุตูุฑุช ูพุดโูุฑุถ ุชูุงู ููุงุฏุฑ ุฑุง ุตุญุญ ูุฑุถ ูโฺฉูุฏ ู ุฒูุงู ุงฺฏุฑ ุฎูุงู ุงู ูุฑุถ ุฑุฎ ุฏูุฏุ ุขูฺฏุงู ุจุฑุง ุนุฑุถ ูพูุฒุด ุจู ุฏูุจุงู ฺฉ handler ููุงุณุจ ูโฺฏุฑุฏุฏ!

ูุทูุฆูุง ุณุฑุจุงุฑ handle ฺฉุฑุฏู ฺฉ Exception ุงุฒ ฺฉ ุฏุณุชูุฑ ``if`` ุจุดุชุฑ ุงุณุช ูู ุชููุง ููุช ฺฉ Exception ุจู handler ูุงุฒ ูพุฏุง ูโฺฉูุฏ ฺฉู ุฑุฎ ุจุฏูุฏ! ูพุดููุงุฏ ูพุงุชูู ุจุฑุง ุงู ูุณุฆูู ุชุฑุฌุญ ุจุฑ ุงุณุชูุงุฏู ุงุฒ ุฏุณุชูุฑ ``try/except`` ูโุจุงุดุฏ ุชุง ุฏุณุชูุฑ ``if``ุ ฺุฑุง ฺฉู ูู ุฎูุงูุง ฺฉุฏ ุจุดุชุฑ ูโุดูุฏ ู ูู ุงุฒ ุขูุฌุง ฺฉู ุฏุฑ ุตูุฑุช ุงุณุชูุงุฏู ุงุฒ ุฏุณุชูุฑ ``if`` ุฑููุฏ ุงุฌุฑุง ฺฉูุชุฑู ู ุจุฑุฑุณ ุดุฑุท ูุฑุจุงุฑ ุฏุฑ ุจุฑูุงูู ุฑุฎ ูโุฏูุฏ ูู ุนูู ุฌุณุชุฌู ุจุฑุง ุงูุชู ``except`` ููุงุณุจ ุชููุง ุฏุฑ ุฒูุงู ุฑุฎ ุฏุงุฏู Exception ุงูุฌุงู ุฎูุงูุฏ ุดุฏุ ฺฉุงุฑุง ุจูุชุฑ ฺฉุณุจ ูโฺฏุฑุฏุฏ.


[`ูุทุงูุนู ุจุดุชุฑ:โ ูพุฑุณุด ู ูพุงุณุฎ ูุฑุชุจุท ุฏุฑ StackOverflow <https://stackoverflow.com/q/7604636>`__]



Exception Hierarchy
~~~~~~~~~~~~~~~~~~~~~~~~~~~~

ุฏุฑ ุฒุจุงู ุจุฑูุงููโููุณ ูพุงุชูู ุชูุงู Exceptionูุง ุงุฒ ูพุด ุขูุงุฏู ุฏุฑ ูุงูุจ ฺฉูุงุณโูุง ุฏุฑ ฺฉ ุณูุณูู ูุฑุงุชุจ ุงุฒ ูุฑุงุซุช ุงุฑุงูู ุดุฏู ุงุณุช. ุจุฑุง ูุดุงูุฏู ุงู ฺฉูุงุณโูุง ู ุณุงุฎุชุงุฑ ูุฑุงุซุช ุขูโูุง ูโุชูุงูุฏ ุจู ุงุณูุงุฏ ูพุงุชูู ูุฑุงุฌุนู ููุงุฏ:โ `Exception hierarchy <https://docs.python.org/3/library/exceptions.html#exception-hierarchy>`__ - ุงู ุณุงุฎุชุงุฑ ุชูุณุท ุชุตูุฑ ูพุงู ููุงุด ุฏุงุฏู ุดุฏู ุงุณุช:


.. image:: /_static/lessons/l23-python-exception-hierarchy.png
    :align: center
    :alt: Exception Hierarchy ุฏุฑ ูพุงุชูู

ฺฉูุงุณ ``BaseException`` ุฏุฑ ุจุงูุงุชุฑู ุณุทุญ ูุฑุงุซุช ุจุฑุง ุงู ุฏุณุช ฺฉูุงุณโูุง ูุฑุงุฑ ุฏุงุฑุฏ ู ุชูุงู Exceptionูุง ุจู ุตูุฑุช ูุณุชูู ุง ุบุฑ ูุณุชูู ุงุฒ ุขู ุงุฑุซโุจุฑ ุฏุงุฑูุฏ. ุงุฒ ุงู ุจู ุชููุง ฺูุงุฑ ฺฉูุงุณ ูุณุชูุฏ ฺฉู ูุณุชูู ุงุฒ ``BaseException`` ุงุฑุซโุจุฑ ุฏุงุฑูุฏ:

* ฺฉูุงุณ ``SystemExit`` [`ุงุณูุงุฏ ูพุงุชูู <https://docs.python.org/3/library/exceptions.html#SystemExit>`__]: ูุฑฺฏุงู ุจู ุจุฑูุงูู ูพุงุชูู ุจุง ุงุฑุงุฏู ุจุฑูุงููโููุณ ู ุจุง ุงุณุชูุงุฏู ุงุฒ ุชุงุจุน ``exit`` ุงุฒ ูุงฺูู ``sys`` [`ุงุณูุงุฏ ูพุงุชูู <https://docs.python.org/3/library/sys.html#sys.exit>`__] ูุฑูุงู ุชููู ุตุงุฏุฑ ุดูุฏุ ุงู Exception ุฑุฎ ุฎูุงูุฏ ุฏุงุฏ.

* ฺฉูุงุณ ``KeyboardInterrupt`` [`ุงุณูุงุฏ ูพุงุชูู <https://docs.python.org/3/library/exceptions.html#KeyboardInterrupt>`__]: ูุฑฺฏุงู ุจุง ุงุณุชูุงุฏู ุงุฒ ุตูุญูโฺฉูุฏ (Keyboard) ุงูุฏุงู ุจู ุชููู ูุงฺฏูุงู ุจุฑูุงูู ูพุงุชูู ููุงู - ูุนูููุง ุจุง ุงุณุชูุงุฏู ุงุฒ ฺฉูุฏูุง ุชุฑฺฉุจ:โ ``Control+C``ุ ุงู Exception ุฑุฎ ุฎูุงูุฏ ุฏุงุฏ.

* ฺฉูุงุณ ``GeneratorExit`` [`ุงุณูุงุฏ ูพุงุชูู <https://docs.python.org/3/library/exceptions.html#GeneratorExit>`__]: ุงู Exception ุฏุฑ ุฒูุงู ฺฉู ฺฉ Generator (ุฏุฑุณ ุณุฒุฏูู) ุจุณุชู (Close) ูโุดูุฏ [`ุงุณูุงุฏ ูพุงุชูู <https://docs.python.org/3/reference/expressions.html#generator.close>`__]ุ ุฑุฎ ูโุฏูุฏ.

* ฺฉูุงุณ ``Exception`` [`ุงุณูุงุฏ ูพุงุชูู <https://docs.python.org/3/library/exceptions.html#Exception>`__]: ูโุชูุงู ุงูโฺฏููู ุดุฑุญ ุฏุงุฏ ฺฉู ุงู ฺฉูุงุณุ supperclass ุชูุงู Exceptionูุง ุจู ุบุฑ ุงุฒ ุณู ููุฑุฏ ูุจู ุงุณุช!



.. tip:: 

  ุฒูุงู ฺฉู ฺฉ ููุน Exception ุฏุฑ ุฏุณุชูุฑ ``except`` ุฐฺฉุฑ ูโฺฏุฑุฏุฏุ ุขู ุฏุณุชูุฑ ``except`` ุจู ุนููุงู ฺฉ handler ุจุฑุง ุขู ููุน Exception ู ุชูุงู subclassูุง ุฎูุงูุฏ ุจูุฏ ฺฉู ุงุฒ ุขู Exception ุงุฑุซโุจุฑ ุฏุงุฑูุฏ.


.. tip:: 

  ุฏู ุฏุณุชูุฑ ``except`` ุฒุฑ ูุนุงุฏู ฺฉุฏฺฏุฑ ุจูุฏู ู ุงุฒ ูุธุฑ ููุณุฑ ูพุงุชูู ุจู ุนููุงู ฺฉ handler ุจุฑุง ุชูุงู ุงููุงุน Exceptionูุง ูโุจุงุดูุฏ ู ุชููุง ุชูุงูุช ุขูโูุง ุฏุฑ ุงูฺฉุงู ุฏุฑุงูุช ุด Exception ูโุจุงุดุฏ. ุจุฑุง ุงุฌุงุฏ ฺฉ handler ุจุฑุง ``KeyboardInterrupt`` ุ``SystemExit`` ู ``GeneratorExit`` ุง ูโุจุงุณุช ูุงู ุขูโูุง ุจู ุตูุฑุช ูุณุชูู ุฏุฑ ``except`` ูุฑุงุฑ ุฏุงุฏู ุดูุฏ ุง ฺฉ ุงุฒ ูุฑูโูุง ูพุงู ุงุฒ ุฏุณุชูุฑ ``except`` ุฑุง ุงุณุชูุงุฏู ููุงู:

  ::

      except:

  ::

      except BaseException as error:


  ุฏุฑ ูุงูุน ``BaseException`` ููุน Exception ูพุดโูุฑุถ ุจุฑุง ุฏุณุชูุฑ ``except`` ูโุจุงุดุฏ.



|

----

:emoji-size:`๐` ุงูุฏูุงุฑู ููุฏ ุจูุฏู ุจุงุดู



