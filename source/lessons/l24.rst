.. role:: emoji-size

.. meta::
   :description: ฺฉุชุงุจ ุขููุฒุด ุฒุจุงู ุจุฑูุงูู ููุณ ูพุงุชูู ุจู ูุงุฑุณุ ูุฏุฑุช ุฎุทุง ุฏุฑ ูพุงุชููุ raise Exception ุฏุฑ ูพุงุชููุ Warning ุฏุฑ ูพุงุชููุ Assertion ูพุงุชูู, assert ุฏุฑ ูพุงุชูู
   :keywords:  ุขููุฒุด, ุขููุฒุด ูพุงุชูู, ุขููุฒุด ุจุฑูุงูู ููุณ, ูพุงุชูู, ฺฉุชุงุจุฎุงูู, ูพุงุชูู, Exception ุฏุฑ ูพุงุชูู


ุฏุฑุณ ฒด: ูุฏุฑุช ุฎุทุง ุฏุฑ ูพุงุชูู: Warning ุraise Exception ู Assertion
===================================================================================================

.. figure:: /_static/pages/24-python-raise-exception-warning-assertion.jpg
    :align: center
    :alt: ูุฏุฑุช ุฎุทุง ุฏุฑ ูพุงุชูู:Warning ุraise Exception ู Assertion
    :class: page-image

    Photo by `Sandy Manoa <https://unsplash.com/photos/DnuC3-ZNBPQ>`__
  
  
ุงู ุฏุฑุณ ุฏุฑ ุงุฏุงูู ุฏุฑุณ ูพุด ูโุจุงุดุฏ ู ุจู ุดุฑุญ ููุงูู ุจุงูโูุงูุฏู ูพุฑุงููู ููููู Exception ุฏุฑ ุฒุจุงู ุจุฑูุงููโููุณ ูพุงุชูู ูโูพุฑุฏุงุฒุฏ. ุงูฺฉู ฺฺฏููู ูโุชูุงู ุจุง ุงุณุชูุงุฏู ุงุฒ ุฏุณุชูุฑ raise ฺฉ Exception ุฑุง ุจู ุตูุฑุช ุนูุฏ ุฏุฑ ุจุฑูุงูู ุจุฑูุฒ ุฏุงุฏ ู ููฺูู ฺฺฏููู ูโุดูุฏ ฺฉ Exception ุฏุฑ ุฒุจุงู ุจุฑูุงููโููุณ ูพุงุชูู ุงุฌุงุฏ ููุงู. ุฏุฑ ุงุฏุงูู ุงู ุฏุฑุณ ุจู ุจุฑุฑุณ ููุงูู Warning ู Assertion ุฏุฑ ุฒุจุงูโุจุฑูุงููโููุณ ูพุงุชูู ู ูุฒ ุงุฑุชุจุงุท ุขูโูุง ุจุง Exception ูโูพุฑุฏุงุฒุฏ.


ุชูุฌู ุฏุงุดุชู ุจุงุดุฏุ ูู ุงฺฉููู ูพุดุชุจุงู ูุณุฎู 2x ูพุงุชูู ุจู ูพุงุงู ุฑุณุฏู ุงุณุช. ุจูุงุจุฑุงู	ุจู ููุธูุฑ ุฌููฺฏุฑ ุงุฒ ูพฺุฏฺฏโูุง ุบุฑ ุถุฑูุฑุ ุชูุงู ูุทุงูุจ ุงู ุฏุฑุณ ุจุฑ ูุจูุง ูพุงุชูู 3x ุงุฑุงุฆู ูโุดูุฏ.



:emoji-size:`โ` ุณุทุญ: ูุชูุณุท

----


.. contents:: ุณุฑูุตูโูุง
    :depth: 2

----


ุฏุณุชูุฑ ``raise``
~~~~~~~~~~~~~~~~~~~~~~~~~~~

ุงุฒ ุฏุฑุณ ูพุด ุจุง Exception ุขุดูุง ุดุฏูโุงู ู ูุดุงูุฏู ฺฉุฑุฏู ุฏุฑ ุฒูุงู ุงุฌุฑุง ุจุฑูุงูู ูพุงุชูู (Runtime) ุชูุงู ุฎุทุงูุง ุฏุฑ ูุงูุจ ฺฉ Exception ุงุนูุงู ูโฺฏุฑุฏูุฏ. ุงูุง ุฏุฑ ุจุฑูุงููโููุณ ุฒูุงูโูุง ุจุณุงุฑ ุฎูุงูุฏ ุจูุฏ ฺฉู ุจุฑูุงููโููุณ ูโุจุงุณุช ุฎูุฏ ุงูุฏุงู ุจู ุจุฑูุฒ Exception ููุงุฏ. ฺฉ ูุงฺูู ุฏุฑ ููฺฏุงู ุงูุฌุงู ฺฉุงุฑ ูุดุฎุต ููฺฉู ุงุณุช ุจุง ูุถุนุชโูุง ูุฎุชูู ุฑูุจุฑู ฺฏุฑุฏุฏ ฺฉู ูโุจุงุณุช ุงู ูุถุนุชโูุง ุฑุง ุจู ูุงฺูู ุณุทุญ ุจุงูุงุชุฑ ุฎูุฏ ุงุนูุงู ฺฉูุฏ ุชุง ุฏุฑ ููุงุช ูุชุฌู ู ุชูุถุญ ููุงุณุจ ุจุฑุง ฺฉุงุฑุจุฑ ูุฑุงูู ฺฏุฑุฏุฏ. ุจุฑุง ูุซุงู ุฏุฑ ูพุงุฏูโุณุงุฒ API ูุงฺูู ฺฉู ุงูุฌุงู ุฎุฏูุช ุฑุง ุจู ุนูุฏู ุฏุงุฑุฏุ ููฺฏุงู ฺฉู ุจู ุฎุทุง ุง ูุถุนุช  ุฎุงุต ุจุฑุฎูุฑุฏ ูโฺฉูุฏุ ูโุชูุงูุฏ ุงู ูุถุนุช ุฑุง ุฏุฑ ูุงูุจ ุจุฑูุฒ ฺฉ Exception ุงุนูุงู ฺฉูุฏ ู ูุงฺูู ฺฉู ูุธูู ุชููุฏ ูพุงุณุฎ ุง Response ุฑุง ุจุฑุนูุฏู ุฏุงุฑุฏุ ุจุฑ ุงุณุงุณ ููุน Exception ุฑุฎ ุฏุงุฏู ูโุชูุงูุฏ ฺฉ Response ููุงุณุจ ุชููุฏ ููุงุฏ.

ุฏุฑ ุฒุจุงู ุจุฑูุงููโููุณ ูพุงุชูู ุงุฒ ุฏุณุชูุฑ ``raise`` [`ุงุณูุงุฏ ูพุงุชูู <https://docs.python.org/3/reference/simple_stmts.html#raise>`__] ุจุฑุง ุจุฑูุฒ ฺฉ Exception ุงุณุชูุงุฏู ูโฺฏุฑุฏุฏ::

    raise exception_object

ุจู ููููู ฺฉุฏ ุฒุฑ ุชูุฌู ููุงุฏ:

.. code-block:: python
    :linenos:
    
    def self_sum_int(a):
        if not isinstance(a, int):
            raise TypeError()
        
        return a + a

    res = self_sum_int('C')
    print(res)


::

    Traceback (most recent call last):
      File "sample.py", line 7, in <module>
        res = self_sum_int('C')
      File "sample.py", line 3, in self_sum_int
        raise TypeError()
    TypeError

ุฏุฑ ููููู ฺฉุฏ ุจุงูุง ูุง ฺฉ ุด ุงุฒ ฺฉูุงุณ ``TypeError`` ุงุฌุงุฏ ู ุขู ุฑุง raise ฺฉุฑุฏู (ุณุทุฑ ณ). ููุงูุทูุฑ ฺฉู ูุดุงูุฏู ูโฺฉูุฏุ ุดุฑุญ Exception ุฏุฑ Traceback (ุณุทุฑ ูพุงุงู) ุจุง ุขู ฺุฒ ฺฉู ุฏุฑ ุฏุฑุณ ูพุด ุดุงูุฏ ุขู ุจูุฏูุ ูุชูุงูุช ุงุณุช ู ููฺูู ุนูุช ุจุฑูุฒ Exception ูุฒ raise ุดุฏู ุขู ุงุนูุงู ุดุฏู ุงุณุช. 

ูโุชูุงู ุฏุฑ ููฺฏุงู ูููููโุณุงุฒ ุงุฒ ฺฉูุงุณ Exception ููุฑุฏ ูุธุฑุ ฺฉ ูุชู ุฏูุฎูุงู (ฺฉ ุด ุงุฒ ููุน ``str``) ุจู ุนููุงู ุดุฑุญ Exception ุฏุฑ ุฒูุงู ูููููโุณุงุฒ ุจู ุตูุฑุช ุขุฑฺฏููุงู ุงุฑุณุงู ฺฉูู:


.. code-block:: python
    :linenos:
    
    def self_sum_int(a):
        if not isinstance(a, int):
            raise TypeError(f"The input must be 'int' type, {a!r} is {type(a)}")
        
        return a + a

    res = self_sum_int('C')
    print(res)


::

    Traceback (most recent call last):
      File "sample.py", line 7, in <module>
        res = self_sum_int('C')
      File "sample.py", line 3, in self_sum_int
        raise TypeError(f'The input must be of the integer type, {a} is {type(a)}')
    TypeError: The input must be 'int' type, 'C' is <class 'str'>


ุท ุฏุฑุณ ูพุด ูุดุงูุฏู ฺฉุฑุฏูุ ฺูุงูฺู ุฏุฑ ุฒูุงู handle ฺฉุฑุฏู ฺฉ Exceptionุ ฺฉ Exception ุฏฺฏุฑ ุฑุฎ ุฏูุฏุ ุฏุฑ ูุชุฌู Traceback ููุง ูุฒ ุดุงูู ฺฉ Traceback ุจู ุงุฒุง ูุฑ Exception ุฎูุงูุฏ ุจูุฏ. ุงู ุงูฺฉุงู ูุฒ ุชูุณุท ุฏุณุชูุฑ ``raise`` ุจุฑุง ุจุฑูุงููโููุณ ูุฑุงูู ูโุจุงุดุฏ. ูโุชูุงู ุจุง ุงุณุชูุงุฏู ุงุฒ ุฏุณุชูุฑ ``from`` ุฏุฑ ฺฉูุงุฑ  ``raise``ุ  ุฏู Exception ุฑุง ุจู ฺฉุฏฺฏุฑ ูุชุตู ู ุณูพุณ raise ฺฉุฑุฏ::

   raise exception_object from other_exception_object

ุจู ููููู ฺฉุฏ ุณุงุฏู ุฒุฑ ู ุฎุฑูุฌ ุขู ุชูุฌู ููุงุฏ:

.. code-block:: python
    :linenos:
    
    def sum_int(a, b):
        try:
            return a + b
        except Exception as exception:
            raise RuntimeError("Something bad happened") from exception

    res = sum_int(3, 'C')
    print(res)

::

    Traceback (most recent call last):
      File "sample.py", line 3, in sum_int
        return a + b
    TypeError: unsupported operand type(s) for +: 'int' and 'str'

    The above exception was the direct cause of the following exception:

    Traceback (most recent call last):
      File "sample.py", line 7, in <module>
        res = sum_int(3, 'C')
      File "sample.py", line 5, in sum_int
        raise RuntimeError("Something bad happened") from exception
    RuntimeError: Something bad happened

ุจู ุนููุงู ฺฉ ููููู ฺฉุงุฑุจุฑุฏุ ุงุฒ ุงู ุฑูุด ูโุชูุงู ุจุฑุง ุงุฌุงุฏ ฺฉ Wrapper ุจุฑุง ฺูุฏู Exception ุจูุฑู ุจุฑุฏ. ุฏุฑ ุงู ุญุงูุช ฺฉุฏ ุณุทุญ ุจุงูุงุชุฑ ุชููุง ูุงุฒ ุงุณุช ฺฉ ููุน Exception ุฑุง handle ููุงุฏ:

.. code-block:: python
    :linenos:
    
    def sum_int(a, b):
        try:
            return a + b
        except TypeError as type_err:
            raise RuntimeError(f'Something bad happened \n    => {str(type_err)}') from type_err



    try:
        res = sum_int(3, 'C')
        print(res)
    
    except RuntimeError as runtime_err:
        print(f'{runtime_err.__class__.__name__}: {str(runtime_err)}')

::

    RuntimeError: Something bad happened 
        => unsupported operand type(s) for +: 'int' and 'str'

ุงุฌุงุฏ Exception
~~~~~~~~~~~~~~~~~~~~~~~~~~~

ุฏุฑ ุฒุจุงู ุจุฑูุงููโููุณ ูพุงุชูู ุจุง ุงุฌุงุฏ ฺฉ ฺฉูุงุณ ู ุงุฑุซโุจุฑ ุงุฒ ``Exception`` ุง ฺฉ ุงุฒ subclassูุง ุขู ูโุชูุงู ฺฉ Exception ุฌุฏุฏ ุงุฌุงุฏ ูููุฏ:

.. code-block:: python
    :linenos:
    
    class NegativeNumberError(Exception):
        """Raised when the input value is negative number"""
        pass


    def plus(num):
        if num < 0:
            raise NegativeNumberError(f'{num} is a negative number!')
            
        return num + num


    try:
        print(plus(10))
        print('*' * 30)
        print(plus(-5))
    
    except NegativeNumberError as err:
        print(str(err))
    
    except:
        print('Something bad happened!')
        
::

   20
   ******************************
   -5 is a negative number!

ุจุฏู ุงุณุช ฺฉู ูโุชูุงู ฺฉูุงุณโูุง Exception ุฎูุฏ ุฑุง ูุทุงุจู ุจุง ูู ุฎูุฏ ูพุงุฏูโุณุงุฒ ูููุฏ:

.. code-block:: python
    :linenos:
    
    class NegativeNumberError(Exception):
        """Raised when the input value is negative number"""
    
        def __init__(self, number, message="Number must be positive"):
            self.number = number
            self.message = message
            super().__init__(self.message)

        def __str__(self):
            return f'ERROR[{self.number}] -> {self.message}'


    def plus(num):
        if num < 0:
            raise NegativeNumberError(num)
            
        return num + num


    try:
        print(plus(10))
        print('*' * 30)
        print(plus(-5))
    
    except NegativeNumberError as err:
        print(str(err))
    
    except:
        print('Something bad happened!')
        
::

   20
   ******************************
   ERROR[-5] -> Number must be positive


.. note::
  ุฏุฑ  ุฒุจุงูโุจุฑูุงููโููุณ ูพุงุชูู ูพุดููุงุฏ ูโุดูุฏ ฺฉู ุงฺฏุฑ ูุฏู ุงุฒ ุงุฌุงุฏ Exception ููุงุด ฺฉ ุฎุทุง ุจุงุดุฏุ ุฏุฑ ุงูุชูุง ูุงู ฺฉูุงุณ ุงุฒ ูุงฺู Error ุงุณุชูุงุฏู ฺฏุฑุฏุฏ.


ูุงฺูู warnings
~~~~~~~~~~~~~~~~~~~~~~~~~~~

ุชุง ุงู ูุญุธู ุจุง ููููู Exception ุขุดูุง ุดุฏูโุงู. ูโุฏุงูู ฺฉู ุจุฑูุฒ Exception ุฏุฑ ูุงูุน ุงุนูุงู ฺฉ ุฎุทุง ุง ฺฉ ุฑูุฏุงุฏ ููู ุฏุฑ ุจุฑูุงูู ูโุจุงุดุฏ ฺฉู ูโุจุงุณุช ุญุชูุง handle ุดูุฏุ ุฏุฑ ุบุฑ ุงู ุตูุฑุช ุจุฑูุงูู ูุงุฏุฑ ุจู ุงูุฌุงู ุฏุณุชูุฑุงุช ูุฎูุงูุฏ ุจูุฏ.

ุงูุง ฺฏุงู ุงุนูุงู ฺฉ ุฑูุฏุงุฏ ุขููุฏุฑ ููู ูุณุช ฺฉู ุจุฎูุงูุฏ ุฑููุฏ ุงุฌุฑุง ุจุฑูุงูู ุฑุง ุชูุฏุฏ ฺฉูุฏ. ุจูฺฉู ุตุฑูุง ฺฉ ูุดุฏุงุฑ ุจุฑุง ุชูุฌู ุจุดุชุฑ ุง ุงุตูุงุญ ุฑูุชุงุฑ ุจุฑุง ูุณุฎูโูุง ุจุนุฏ ุฎูุงูุฏ ุจูุฏ ฺฉู **ุจุดุชุฑ ฺฉุงุฑุจุฑุฏ ุขู ุจุฑุง ุชูุณุนูโุฏููุฏฺฏุงู ุจุฑูุงูู ูโุจุงุดุฏ ุชุง ฺฉุงุฑุจุฑุงู ฺฉู ุจู ููุน ูุตุฑูโฺฉููุฏฺฏุงู ุขู ุจุฑูุงูู ูุญุณูุจ ูโุดููุฏ**. ุฏุฑ ุฒุจุงู ุจุฑูุงููโููุณ ูพุงุชููุ ูุงฺูู ``warnings`` [`ุงุณูุงุฏ ูพุงุชูู <https://docs.python.org/3/library/warnings.html>`__] ุจุฑุง ุงุณุชูุงุฏู ุฏุฑ ฺูู ุฒูุงูโูุง ูุฑุงูู ุขูุฑุฏู ุดุฏู ุงุณุช [`PEP 230 <https://www.python.org/dev/peps/pep-0230>`__].


ูพุด ุงุฒ ูุฑุงุฌุนู ุจู ุงู ูุงฺูู ุงุฒ ฺฉุชุงุจุฎุงูู ุงุณุชุงูุฏุงุฑุฏ ุฒุจุงู ุจุฑูุงููโููุณ ูพุงุชูู ูุงุฒู ุงุณุช ูฺฏุงู ุฏูุจุงุฑู ุจู ุงูุชูุง ููุฑุณุช ุณูุณููโูุฑุงุชุจ ูุฑุงุซุช Exceptionูุง ฺฉู ุฏุฑ ุฏุฑุณ ูพุด ุขู ุฑุง ุจุฑุฑุณ ฺฉุฑุฏู ุจุงูุฏุงุฒูุ ุฏุฑ ุงูุชูุง ุงู ููุฑุณุช ฺฉูุงุณโูุง ุจุง ูพุณููุฏ Warning ูุฑุงุฑุฏุงุฑูุฏ [`Exception hierarchy <https://docs.python.org/3/library/exceptions.html#exception-hierarchy>`__]:


.. image:: /_static/lessons/l24-python-exception-hierarchy-warnings.png
    :align: center
    :alt: Exception Hierarchy ุฏุฑ ูพุงุชูู ุจู ููุฑุงู warnings

ููุงูโุทูุฑ ฺฉู ูุดุงูุฏู ูโุดูุฏุ ุชูุงู ุงู ฺฉูุงุณโูุง ุงุฒ ฺฉูุงุณ ุจุง ูุงู ``Warning`` ุงุฑุซโุจุฑ ุฏุงุฑูุฏ ฺฉู ุฎูุฏ ุงู ฺฉูุงุณ ูุฒ ุงุฒ ฺฉูุงุณ ``Exception`` ุงุฑุซโุจุฑ ุฏุงุฑุฏ. 

ุงูโูุง Warning ูุณุชูุฏุ Exceptionูุง ฺฉู ูุฏู ุงุฒ ุชูุณุนู ุขููุง ุงุนูุงู ฺฉ ูุดุฏุงุฑ ูโุจุงุดุฏ ู ูู ุงุนุชุฑุงุถ ฺฉู ุชูุจู ุขู ุชููู ุจุฑูุงูู ุจุงุดุฏ. ุจุง ุงู ุญุงู ุจู ููููู ฺฉุฏ ุฒุฑ ุชูุฌู ููุงุฏ:

.. code-block:: python
    :linenos:

    def sum_int(a, b):
        raise DeprecationWarning('"sum_int" will be removed in version 2.0')
        sum = a + b
        print(sum)


    sum_int(6, 5)
    print('Done.')

::

    Traceback (most recent call last):
      File "sample.py", line 7, in <module>
        sum_int(6, 5)
      File "sample.py", line 2, in sum_int
        raise DeprecationWarning('"sum_int" will be removed in version 2.0')
    DeprecationWarning: "sum_int" will be removed in version 2.0

ุณุงุฎุชุงุฑ ุณูุณููโูุฑุงุชุจ ุจู ูุง ฺฏูุชู ุจูุฏ ฺฉู Warningูุง ุฏุฑ ุงุตู Exception ูุณุชูุฏ (ูุฌูุฏ ุฑุงุจุทู IS-A ุจู ุฏูู ูุฑุงุซุช - ุฏุฑุณ ูุฌุฏูู) ู ุฒูุงู ฺฉู ฺฉ Exception ุจู ุงุตุทูุงุญ raise ุดูุฏุ ุญุชูุง ูโุจุงุณุช ฺฉ handler ุจุฑุง ุขู ูพุดโุจู ุดุฏู ุจุงุดุฏ. ุฏุฑ ูุงูุน ุงฺฏุฑ ุจุฑุง ุจุฑูุฒ ฺฉ Warning ุงุฒ ุฏุณุชูุฑ ``raise`` ุงุณุชูุงุฏู ุดูุฏุ ุฏุณุชูุฑ ``raise`` ููุงู ฺฉุงุฑ ุฑุง ุจุง Warning ุงูุฌุงู ูโุฏูุฏ ฺฉู ุจุง ูุฑ ููุน Exception ุฏฺฏุฑ ุงูุฌุงู ุฎูุงูุฏ ุฏุงุฏ.


ุชุงุจุน ``warnings.warn``
---------------------------


ุงฺฏุฑ ุจุฎูุงูู ุจุฑูุฒ ฺฉ Exception ุจู ุตูุฑุช ูุดุฏุงุฑฺฏููู ุจุงุดุฏุ ูโุจุงุณุช ุจู ุณุฑุงุบ ูุงฺูู ``warnings`` ุจุฑูู. ุงฺฉููู ุงฺฏุฑ ููููู ฺฉุฏ ูุจู ุฑุง ุจุง ฺฉูฺฉ ุงู ูุงฺูู ุจุงุฒููุณ ููุงูุ ูุชุฌู ุฒุฑ ุญุงุตู ูโฺฏุฑุฏุฏ:

.. code-block:: python
    :linenos:

    import warnings

    def sum_int(a, b):
        warnings.warn('"sum_int" will be removed in version 2.0', DeprecationWarning)
        sum = a + b
        print(sum)


    sum_int(6, 5)
    print('Done.')

::

    sample.py:4: DeprecationWarning: "sum_int" will be removed in version 2.0
      warnings.warn('"sum_int" will be removed in version 2.0', DeprecationWarning)
    11
    Done.

ููุงูโุทูุฑ ฺฉู ูุดุงูุฏู ูโุดูุฏ ุชููุง ฺฉ ูพุงู ูุดุฏุงุฑ ุฏุฑ ุฎุฑูุฌ ฺุงูพ (print) ูโุดูุฏ ู ุฏฺฏุฑ ุฎุจุฑ ุงุฒ Traceback ูุณุช ู ุจุฑูุงูู ุจุฏูู ูฺ ุงุฎูุงู ุจุงููููุช ุชุง ุฎุท ูพุงุงู ุจู ุงุฌุฑุง ุฎูุฏ ุงุฏุงูู ุฏุงุฏู ุงุณุช. 


ุจุฑุง ุงุนูุงู ฺฉ ูุดุฏุงุฑ ุงุฒ ุชุงุจุน ``warn`` ุฏุฑ ูุงฺูู ``warnings`` ุงุณุชูุงุฏู ูโุดูุฏ [`ุงุณูุงุฏ ูพุงุชูู <https://docs.python.org/3/library/warnings.html#warnings.warn>`__] ฺฉู ุชุนุฑู ุขู ุจู ุดฺฉู ุฒุฑ ูโุจุงุดุฏ::

    warn(message, category=None, stacklevel=1, source=None)

ุจุฑ ุงุณุงุณ ุชุนุฑูุ ุงู ุชุงุจุน ฺฉ ูพุงุฑุงูุชุฑ ุงุฌุจุงุฑ (``message``) ู ุณู ูพุงุฑุงูุชุฑ ุงุฎุชุงุฑ ุฏุงุฑุฏ.

* **message**: ูโุจุงุณุช ฺฉ ุด ``str`` ุจุงุดุฏ ู ูุชู ูุดุฏุงุฑ ุงุณุช ฺฉู ูโุฎูุงูู ููุงุด ุฏุงุฏู ุดูุฏ.

* **category**: ููุน Warning ุฑุง ูุดุฎุต ูโฺฉูุฏ ฺฉู ูโุจุงุณุช **ูุงู ฺฉ subclass ุงุฒ ฺฉูุงุณ** ``Warning`` ุจุงุดุฏ. ุจุฑุง ูุดุงูุฏู ุงููุงุน Warningูุง ุงุฒ ูพุด ุขูุงุฏู ุฏุฑ ูพุงุชูู ูโุชูุงูุฏ ุจู `Warning Categories <https://docs.python.org/3/library/warnings.html#warning-categories>`__ ูุฑุงุฌุนู ููุงุฏ. ุงุฑุณุงู ุขุฑฺฏููุงู ุจุฑุง ุงู ูพุงุฑุงูุชุฑ ุงุฎุชุงุฑ ุงุณุช ู ุฏุฑ ุตูุฑุช ุนุฏู ุงุฑุณุงูุ ููุน ``UserWarning`` ุจู ุตูุฑุช ูพุดโูุฑุถ ุฏุฑ ูุธุฑ ฺฏุฑูุชู ุฎูุงูุฏ ุดุฏ. 

* **stacklevel**: ุงฺฏุฑ ุฏูุช ฺฉุฑุฏู ุจุงุดุฏ ูุชู ูุดุฏุงุฑ ุดุงูู ุงุทูุงุนุงุช ุงุฒ ูุญู ุจุฑูุฒ ุขู ูโุจุงุดุฏ. ุงู ูพุงุฑุงูุชุฑ ฺฉ ุนุฏุฏ ุงุฒ ููุน ``int`` ู ุจุฒุฑฺฏุชุฑ ุง ูุณุงู ุงุฒ ``1`` ุฑุง ุฏุฑุงูุช ู ุชุนู ูโฺฉูุฏ ฺฉู ุงู ุงุทูุงุนุงุช ูุฑุจูุท ุจู ฺฉุฏุงู ุณุทุญ ุงุฒ  ูุฑุงุฎูุงู ฺฉุฏ ู ุฑุณุฏู ุจู ุงู ูุดุฏุงุฑ ุจุงุดุฏ. ุจู ุงู ุตูุฑุช ฺฉู: ุนุฏุฏ ``1`` (ููุฏุงุฑ ูพุดโูุฑุถ) ุจู ูุญู ุฏูู ุจุฑูุฒ ูุดุฏุงุฑุ ุนุฏุฏ ``2`` ุจู ฺฉ ูุฑุญูู ูุจูโุชุฑ ุงุฒ ูุญู ุจุฑูุฒ ูุดุฏุงุฑ ู ...

  .. code-block:: python
      :linenos:


      import warnings

      def sum_int(a, b):
          print('-' * 30,  'stacklevel=1')
          warnings.warn('"sum_int" will be removed in version 2.0', stacklevel=1)
          print('-' * 30,  'stacklevel=2')
          warnings.warn('"sum_int" will be removed in version 2.0', stacklevel=2)
          print('-' * 30,  'stacklevel=3')
          warnings.warn('"sum_int" will be removed in version 2.0', stacklevel=3)
          print('-' * 30,  'stacklevel=4')
          warnings.warn('"sum_int" will be removed in version 2.0', stacklevel=4)
          print('-' * 30,  'stacklevel=5')
          warnings.warn('"sum_int" will be removed in version 2.0', stacklevel=5)
          print('-' * 30)
          sum = a + b
          print(sum)


      def action(a, b):
         sum_int(6, 5)


      action(6, 5)
      print('Done.')

  ::

      ------------------------------ stacklevel=1
      sample.py:5: UserWarning: "sum_int" will be removed in version 2.0
        warnings.warn('"sum_int" will be removed in version 2.0', stacklevel=1)
      ------------------------------ stacklevel=2
      sample.py:20: UserWarning: "sum_int" will be removed in version 2.0
        sum_int(6, 5)
      ------------------------------ stacklevel=3
      sample.py:23: UserWarning: "sum_int" will be removed in version 2.0
        action(6, 5)
      ------------------------------ stacklevel=4
      sys:1: UserWarning: "sum_int" will be removed in version 2.0
      ------------------------------ stacklevel=5
      ------------------------------
      11
      Done.

Warnings Filter
----------------------

ุญุงูุช ุฑุง ุชุตูุฑ ฺฉูุฏ ฺฉู ุจุฑูุงูู ุดูุง ูพุฑ ุงุฒ Warningูุง ูุชููุน ูโุจุงุดุฏ. Warnings Filter ุงูฺฉุงู ุงุณุช ุจุฑุง ุงูฺฉู ูุดุฎุต ฺฉูู ฺฉุฏุงู ููุน Warning ูุงุฏุฏู ฺฏุฑูุชู ุดูุฏ ุง ฺฉุฏุงู ููุน ููุงุด ุฏุงุฏู ุดูุฏ ุง ฺฉุฏุงู ููุน ููฺูู ฺฉ Exception ูุงูุน ุฑูุชุงุฑ ฺฉูุฏ. ุจุฑุง ุงู ููุธูุฑ ุงุฒ ุงุฒ ุชุงุจุน ``simplefilter`` ุฏุฑ ูุงฺูู ``warnings`` ุงุณุชูุงุฏู ูโุดูุฏ [`ุงุณูุงุฏ ูพุงุชูู <https://docs.python.org/3/library/warnings.html#warnings.simplefilter>`__] ฺฉู ุชุนุฑู ุขู ุจู ุดฺฉู ุฒุฑ ูโุจุงุดุฏ::

    simplefilter(action, category=Warning, lineno=0, append=False)

ุจุฑ ุงุณุงุณ ุชุนุฑูุ ุงู ุชุงุจุน ฺฉ ูพุงุฑุงูุชุฑ ุงุฌุจุงุฑ (``action``) ู ุณู ูพุงุฑุงูุชุฑ ุงุฎุชุงุฑ ุฏุงุฑุฏ.


* **action**: ุงุฒ ููุน ``str`` ุจูุฏู ู ูโุชูุงูุฏ ฺฉ ุงุฒ ููุงุฏุฑ ูพุงู ุจุงุดุฏ. ุงู ูุดุฎุต ูโฺฉูุฏ ฺฉู ฺู ุนููุงุช ูโุจุงุณุช ุจุฑ ุฑู Warningูุง ุงุนูุงู ุดูุฏ:

  .. container:: table

	  ======================  ===================================================================
	  ููุฏุงุฑ                   ุชูุถุญุงุช
	  ======================  ===================================================================
	  ``'default'``           ุญุงูุช ูพุดโูุฑุถุ ูุฑ Warning ุจู ุงุฒุง ุณุทุฑ ฺฉู ุฏุฑ ุขู ูุฑุงุฑ ุฏุงุฑุฏ ฺฉุจุงุฑ ฺุงูพ ุดูุฏ
	  ``'error'``             ุชุจุฏู ุฑูุชุงุฑ Warning ุจู Exception ูุงูุน - ุจุฑูุฒ ุฎุทุง
	  ``'ignore'``            ูุงุฏุฏู ฺฏุฑูุชู Warning
	  ``'always'``            Warning ูุฑ ุจุงุฑ ฺุงูพ ุดูุฏ
	  ``'module'``            ูุฑ Warning ุจู ุงุฒุง ูุฑ ูุงฺูู ุชููุง ฺฉุจุงุฑ ฺุงูพ ุดูุฏ
	  ``'once'``              ูุฑ Warning ุจู ุงุฒุง ฺฉู ุจุฑูุงูู ุชููุง ฺฉุจุงุฑ ฺุงูพ ุดูุฏ
	  ======================  ===================================================================

* **category**: ููุน Warning ุฑุง ูุดุฎุต ูโฺฉูุฏ ฺฉู ูโุจุงุณุช **ูุงู ฺฉ subclass ุงุฒ ฺฉูุงุณ** ``Warning`` ุจุงุดุฏ. ุงุฑุณุงู ุขุฑฺฏููุงู ุจุฑุง ุงู ูพุงุฑุงูุชุฑ ุงุฎุชุงุฑ ุงุณุช ู ุฏุฑ ุตูุฑุช ุนุฏู ุงุฑุณุงูุ ุนูู ูุดุฎุต ุดุฏู ุชูุณุท ูพุงุฑุงูุชุฑ action ุจุฑุง ุชูุงู ุงููุงุน Warningูุง ุฏุฑ ุจุฑูุงูู ุงุนูุงู ูโฺฏุฑุฏุฏ. 

ุจู ููููู ฺฉุฏูุง ุฒุฑ ุชูุฌู ููุงุฏ:

.. code-block:: python
    :linenos:

    import warnings
    warnings.simplefilter('ignore')
    # $ python3 -Wi sample.py
    # $ python3 -Wignore sample.py


    print('-------Before #01-------')
    warnings.warn('#01')
    print('-------After  #01-------')

::

    -------Before #01-------
    -------After  #01-------


.. code-block:: python
    :linenos:

    import warnings
    warnings.simplefilter('ignore', DeprecationWarning)
    # $ python3 -Wignore::DeprecationWarning sample.py
    # $ python3 -Wi::DeprecationWarning sample.py


    print('-------Before #02-------')
    warnings.warn('#02')
    print('-------After  #02-------')

    print('-------Before #03-------')
    warnings.warn('#03', DeprecationWarning)
    print('-------After  #03-------')

::

    -------Before #02-------
    sample.py:8: UserWarning: #02
      warnings.warn('#02')
    -------After  #02-------
    -------Before #03-------
    -------After  #03-------


.. code-block:: python
    :linenos:

    import warnings
    warnings.simplefilter('error')
    # $ python3 -We sample.py
    # $ python3 -Werror sample.py


    print('-------Before #04-------')
    warnings.warn('#04')
    print('-------After  #04-------')


::

      -------Before #04-------
      Traceback (most recent call last):
        File "sample.py", line 8, in <module>
          warnings.warn('#04')
      UserWarning: #04


.. tip:: 

   ุงุนูุงู Filter ุฏุฑ ุฒูุงู ุงุฌุฑุง ุงุณฺฉุฑูพุช ูุฒ ุจุง ุงุณุชูุงุฏู ุงุฒ ฺฉูุฏ ``W-`` ููฺฉู ูโุจุงุดุฏ [`ุงุณูุงุฏ ูพุงุชูู <https://docs.python.org/3/using/cmdline.html#cmdoption-w>`__] ฺฉู ุฏุฑ ูุฑ ููููู ฺฉุฏุ ูุนุงุฏู ุฏุณุชูุฑ ุงุฌุฑุง ูพุงุชูู ูุฒ ุจู ุตูุฑุช ฺฉุงููุช ุฏุฑุฌ ุดุฏู ุงุณุช.


.. tip:: 

  ููุงููุฏ Exceptionูุง ูโุชูุงูุฏ ุงููุงุน Warning ุฎูุฏ ุฑุง ุงุฌุงุฏ ููุงุฏ. ุจุฑุง ุงู ููุธูุฑ ุชููุง ฺฉุงู ุงุณุช ฺฉ ฺฉูุงุณ ุงุฌุงุฏ ููุงุฏ ฺฉู ุงุฒ ฺฉูุงุณ ``Warning`` ุง ฺฉ ุงุฒ subclassูุง ุขู ุงุฑุซโุจุฑ ุฏุงุดุชู ุจุงุดุฏ.

.. note:: 

  ุงู ุจุฎุด ุจู ุฏูู ูุงุจุณุชฺฏ ูุจุญุซ Warning ุจุง ูุจุญุซ ููู Exception ุฏุฑ ุฒุจุงูโุจุฑูุงููโููุณ ูพุงุชูู ู ุตุฑูุง ุจู ููุธูุฑ ุขุดูุง ุฎูุงููุฏฺฏุงู ุจุง ููฺูู ูุงุจูุช ุฏุฑ ุงู ุฒุจุงู ุชูู ุดุฏู ุงุณุช. ูุงฺูู ``warnings`` ุงูฺฉุงูุงุช ฺฏุณุชุฑุฏูโุชุฑ ุฑุง ูุฑุงูู ูโุขูุฑุฏ ฺฉู ูพุฑุฏุงุฎุชู ุจู ุชูุงู ุขูโูุง ุฎุงุฑุฌ ุงุฒ ุญูุตูู ุงู ุฏุฑุณ ูโุจูุฏุ ุจูุงุจุฑุงู ุนูุงููโููุฏุงู ุจุฑุง ูุทุงูุนู ุจุดุชุฑ ูโุชูุงููุฏ ุจู ูุณุชูุฏุงุช ุฑุณู ูพุงุชูู ูุฑุงุฌุนู ููุงูุฏ.



ุฏุณุชูุฑ ``assert``
~~~~~~~~~~~~~~~~~~~~~~~~~~~

ุงุฏุนุง ุง Assertion ุฏุฑ ุจุฑูุงููโููุณ ุจู ุนุจุงุฑุชโูุง ุณุงุฏู ุงุฒ ุดุฑุทโูุง ุจูู ฺฏูุชู ูโุดูุฏ ฺฉู ุฏุฑุณุช ฺฉ ยซูุถุนุชยป ุง ฺฉ ยซุญููุชยป ุฏุฑ ฺฉุฏ ุฑุง ุจุฑุฑุณ ูโฺฉููุฏ. ุจุงุฏ ุชูุฌู ุฏุงุดุช Assertion ุฏุฑ ูุงูุน ฺฉ ุงุจุฒุงุฑ ุจุฑุง ฺฉูฺฉ ุจู ุชูุณุนู ุจุฑูุงูู ูโุจุงุดุฏ ฺฉู ฺฉุงุฑุจุฑุฏ ุขู ุฏุฑ ุงุฌุงุฏ ุชุณุช ฺฉุฏ ุฏุฑ ุฒูุงู ุชุณุชโููุณ ู ุฏุจุงฺฏ (Debug) ุจุฑูุงูู ุฏุฑ ูุญุท ุชูุณุนู ูโุจุงุดุฏ ู ูู ุฏุฑ ูุญุท ุงุฌุฑุง ุจุฑูุงูู ุจู ุนููุงู ูุญุตูู.


ูููฺุงุฑุช ฺฉ Assertion ุจู ุตูุฑุช ุฒุฑ ุชุฑุณู ูโุดูุฏ:

.. image:: /_static/lessons/l24-python-assertion-flowchart.png
    :align: center
    :width: 450
    :alt: ุฏุณุชูุฑ ``assert`` ุฏุฑ ูพุงุชูู - ูููฺุงุฑุช Assertion


ุฏุฑ ุฒุจุงู ุจุฑูุงููโููุณ ูพุงุชูู Assertion ุจุง ุงุณุชูุงุฏู ุงุฒ ุฏุณุชูุฑ ``assert`` ูพุงุฏูโุณุงุฒ ูโฺฏุฑุฏุฏ [`ุงุณูุงุฏ ูพุงุชูู <https://docs.python.org/3/reference/simple_stmts.html#the-assert-statement>`__] ู ุจุง ฺฉ ุงุฒ ุฏู ุณูุชฺฉุณ ุฒุฑ ูุงุจู ูพุงุฏูโุณุงุฒ ูโุจุงุดุฏ::

    assert condition_expression 

::

    assert condition_expression, 'error_message'


ุจู ููููู ฺฉุฏ ุฒุฑ ุชูุฌู ููุงุฏ:

.. code-block:: python
    :linenos:

    def average(numbers):
        assert len(numbers) != 0
        return sum(numbers)/len(numbers)

    numbers = [1, 2, 3, 4, 5]
    print(f'Average of {numbers}: {average(numbers)}')

    print('-' * 30)

    numbers = []
    print(f'Average of {numbers}: {average(numbers)}')

::

    Average of [1, 2, 3, 4, 5]: 3.0
    ------------------------------
    Traceback (most recent call last):
      File "sample.py", line 11, in <module>
        print(f'Average of {numbers}: {average(numbers)}')
      File "sample.py", line 2, in average
        assert len(numbers) != 0
    AssertionError


ูุฑุถ ุชูุณุนูโุฏููุฏู ุชุงุจุน ``average`` ูุซุงู ูุจู ุงู ุจูุฏู ฺฉู ุจู ุงู ุชุงุจุน ุฏุงุฏูโุง ุจุง ุทูู ุตูุฑ ุงุฑุณุงู ููโฺฏุฑุฏุฏุ ูู ุงฺฏุฑ ุฏุฑ ุฒูุงู ุชุณุช ุง ุงุฏุงูู ูุฑุงุญู ุชูุณุนู ุจุฑูุงูู ุงู ููุฏุงุฑ ุงุฑุณุงู ฺฏุฑุฏุฏุ ุจุงุฏ ฺฉ ูฺฉุฑ ุจุฑุง ุงุตูุงุญ ุขู ฺฉุฑุฏ! ฺุฑุง ฺฉู ุงู ุชุงุจุน ุขูุงุฏฺฏ ฺฉุงู ุจุฑุง ุชุจุฏู ุดุฏู ุจู ฺฉ ุจุงฺฏ ุฏุฑ ุจุฑูุงูู ุฑุง ุฏุงุฑุฏ!

ูโุชูุงู ุจุฑุง ุฏุณุชูุฑ ``assert`` ฺฉ ูพุงู ุฎุทุง ูุฒ ุงุฎุชุตุงุต ุฏุงุฏ:


.. code-block:: python
    :linenos:

    def average(numbers):
        assert len(numbers) != 0, 'List[numbers] is empty.'
        return sum(numbers)/len(numbers)

    numbers = []
    print(f'Average of {numbers}: {average(numbers)}')

::

    Traceback (most recent call last):
      File "sample.py", line 6, in <module>
        print(f'Average of {numbers}: {average(numbers)}')
      File "sample.py", line 2, in average
        assert len(numbers) != 0, 'List[numbers] is empty.'
    AssertionError: List[numbers] is empty.


ููุงูุทูุฑ ูพุดโุชุฑ ุจุงู ุดุฏู ุฏุณุชูุฑูุง ``assert`` ฺฉ ูุงุจูุช ุจุฑุง ุฒูุงู ุชูุณุนู ูโุจุงุดูุฏ ุจูุงุจุฑุงู ุจุงุฏ ุชูุฌู ุฏุงุดุช ฺฉู ุชูุงู ุงู ุฏุณุชูุฑุงุช ููฺฏุงู ฺฉู ุจุฑูุงูู ุจุง ฺฉูุฏ ุจูููโุณุงุฒ (Optimization - ุฏุฑุณ ฺูุงุฑู) ุนู ``O-`` ุง ``OO-`` ุงุฌุฑุง ฺฏุฑุฏุฏุ ุฏุฑ ุฒูุงู ฺฉุงููพุงู ุญุฐู ู ุฏุฑ ุจุงุชโฺฉุฏ ูุฑุงุฑ ูุฎูุงููุฏ ฺฏุฑูุช::

    $ python -O script.py


ุงู ุดุฑุงุท ูุดุงุจู ุญุงูุช ุงุณุช ฺฉู ุจุฌุง ุฏุณุชูุฑ ``assert``ุ ูุณุชูู ุงุฒ ุฏุณุชูุฑ ``raise`` ุจู ุดฺฉู ุฒุฑ ุงุณุชูุงุฏู ููุงู::

    if __debug__:
        if not condition_expression: raise AssertionError()

::

    if __debug__:
        if not condition_expression: raise AssertionError('error_message')

``__debug__`` ฺฉ ูุชุบุฑ ุฏุงุฎู ุฏุฑ ูุญุท ุงุฌุฑุง ูพุงุชูู ุจุง ููุฏุงุฑ ูพุดโูุฑุถ ``True`` ูโุจุงุดุฏ [`ุงุณูุงุฏ ูพุงุชูู <https://docs.python.org/3/library/constants.html#__debug__>`__]. ููุฏุงุฑ ุงู ูุชุบุฑ ุฏุฑ ุชูุงู ุทูู ูุฏุช ุงุฌุฑุง ุจุฑูุงูู ุซุงุจุช ุฎูุงูุฏ ุจูุฏ ู ุชููุง ุฒูุงู ฺฉู ุจุฑูุงูู ุจุง ฺฉูุฏ ุจูููโุณุงุฒ ุงุฌุฑุง ฺฏุฑุฏุฏุ ููุฏุงุฑ ุขู ุจู ``False`` ุชุบุฑ ูโุงุจุฏ. ุจูุงุจุฑุงู ุฏุณุชูุฑ ``raise AssertionError`` ูฺฺฏุงู ุงุฌุฑุง ูุฎูุงูุฏ ุดุฏ.


ููฺูู ูุจุงุฏ ูุฑุงููุด ฺฉุฑุฏ ฺฉู ``AssertionError`` ฺฉ ุงุฒ Exceptionูุง ุขูุงุฏู ูพุงุชูู ูโุจุงุดุฏ [`ุงุณูุงุฏ ูพุงุชูู <https://docs.python.org/3/library/exceptions.html#AssertionError>`__]. ุจูุงุจุฑุงู ููฺฏุงู ุจุฑูุฒ ููฺฉู ุงุณุช ุชูุณุท ุฏุณุชูุฑ ``try``ุ ุจู ุตูุฑุช ูุงุฎูุงุณุชู handle ุดูุฏ:

.. code-block:: python
    :linenos:

    def average(numbers):
        assert len(numbers) != 0, 'List[numbers] is empty.'
        return sum(numbers)/len(numbers)

    try:

        numbers = []
        print(f'Average of {numbers}: {average(numbers)}')

    except Exception as err: # or except:
        print('Something bad happened!')

::

    Something bad happened!



|

----

:emoji-size:`๐` ุงูุฏูุงุฑู ููุฏ ุจูุฏู ุจุงุดู

`ูุทูุง ุฏุฏฺฏุงู ู ุณูุงูโูุง ูุฑุชุจุท ุจุง ุงู ุฏุฑุณ ุฎูุฏ ุฑุง ุฏุฑ ฺฉุฏุฑุฒ ูุทุฑุญ ููุงุฏ. <https://www.coderz.ir/python-tutorial-raise-exception-warnings-assertion>`_



