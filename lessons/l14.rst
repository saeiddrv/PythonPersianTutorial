.. role:: emoji-size

.. meta::
   :description: ฺฉุชุงุจ ุขููุงู ู ุขุฒุงุฏ ุขููุฒุด ุฒุจุงู ุจุฑูุงููโููุณ ูพุงุชูู ุจู ูุงุฑุณ - ุฏุฑุณ ฺูุงุฑุฏูู ุชุงุจุน
   :keywords:  ุขููุฒุด, ุขููุฒุด ูพุงุชูู, ุขููุฒุด ุจุฑูุงูู ููุณ, ูพุงุชูู, ุชุงุจุน, Decorator, ูพุงุชูู, lambda, Generator, Coroutine


ุฏุฑุณ ฑด: ุชุงุจุน - ุจุฎุด ุณูู
========================

ุงู ุฏุฑุณ ุจุฎุด ูพุงุงู ุงุฒ ุจุฑุฑุณ ุชุงุจุน ุฏุฑ ูพุงุชูู ูโุจุงุดุฏ ู ููุถูุนุงุช ุจุงูโูุงูุฏู ุงุฒ ูุจุญุซ ุชุงุจุน ูพุงุชูู ุฏุฑ ุงู ุฏุฑุณ ุจุงู ูโุดูุฏ. 






:emoji-size:`โ` ุณุทุญ: ูุชูุณุท

----


.. contents:: ุณุฑูุตูโูุง
    :depth: 2

----




ุชุงุจุน ุจุงุฒฺฏุดุช
------------

ุงุฒ ุฏุฑุณ ููู ุจุง ุฏุณุชูุฑุงุช ฺฉูุชุฑู ``for`` ู ``while`` ุขุดูุง ุดุฏูโุงูุ ุงู ุฏุณุชูุฑุงุช ุชููุง ุงุจุฒุงุฑ ูุง ุจุฑุง ุชฺฉุฑุงุฑ ูุณูุช ุงุฒ ฺฉุฏ ุจูุฏูุฏ. ุงฺฉููู ุจุง ูพุงุฏูโุณุงุฒ ุดููโุง ุฌุฏุฏ ุฏุฑ ุชฺฉุฑุงุฑ ุขุดูุง ูโุดูู.

ุจู ุจุงู ุณุงุฏูุ **ุชุงุจุน ุจุงุฒฺฏุดุช** (Recursive function) ุจู ุชุงุจุน ฺฏูุชู ูโุดูุฏ ฺฉู ุฎูุฏ ุฑุง ุงุฒ ุฏุงุฎู ุจุฏูู ุฎูุฏ ูุฑุงุฎูุงู ูโฺฉูุฏ. ูพุงุฏูโุณุงุฒ ุชุงุจุน ุจู ุตูุฑุช ุจุงุฒฺฏุดุช ุดููโุง ุงุณุช ฺฉู ุงุฒ ุขู ุจุฑุง ุญู ุจุฑุฎ ูุณุงุฆู ุจูุฑู ฺฏุฑูุชู ูโุดูุฏ ู ุจุงุฏ ุจุฏุงูู ฺฉู ุชูุงุจุน ุจุงุฒฺฏุดุชุ ฺฉ ุณูุชฺฉุณ ุง ุฏุณุชูุฑ ุฎุงุต ุฏุฑ ุฒุจุงู ูพุงุชูู ูุณุช ุจูฺฉู ฺฉ ุดูู ุญู ูุณุฆูู ูโุจุงุดุฏ ฺฉู ุจุง ุงุณุชูุงุฏู ุงุฒ ุชุงุจุน ุฏุฑ ุฒุจุงู ุจุฑูุงููโููุณ ูพุงุชูู (ููฺูู ุจุณุงุฑ ุงุฒ ุฒุจุงูโูุง ุฏฺฏุฑ) ูุงุจู ูพุงุฏูโุณุงุฒ ุงุณุช. 

ุจุฑุง ูุซุงู ุฏุฑ ููููู ฺฉุฏ ูพุงู ููุฏุงุฑ ูุงฺฉุชูุฑู (`Factorial <https://en.wikipedia.org/wiki/Factorial>`_) ุนุฏุฏ ูพูุฌ ุฑุง ุจู ุดูู ุจุงุฒฺฏุดุช ูุญุงุณุจู ูโฺฉูู::


  >>> def factorial(n):
  ...     if n <= 1:
  ...         return 1 
  ...     else:
  ...         return n * factorial(n - 1)
  ... 
  >>> 
  >>> factorial(5)
  120
  >>>

ุนูููุง ูโุชูุงู ูุณุฆููโูุง ฺฉู ุงุฒ **ุชูุงู** ุงูุฌุงู ฺฉ **ฺฉุงุฑ ฺฉุณุงู** ูุงุจู ุญู ูุณุชูุฏ ุฑุง ุจู ุตูุฑุช ุจุงุฒฺฏุดุช ูพุงุฏูโุณุงุฒ ฺฉุฑุฏ. ูุฑุงุญู ุงุฌุฑุง ููููู ฺฉุฏ ุจุงูุง ุจู ุตูุฑุช ุฒุฑ ุงุณุช:

.. image:: /_static/l14-factorial-relation.png
    :align: center

:: 

  factorial(5)
  |--> 5 * factorial(4)
           |--> 4 * factorial(3)
                    |--> 3 * factorial(2)
                             |--> 2 * factorial(1)
                                      |--> 1

  120 = 5 * (4 * (3 * (2 * 1)))

**ุชูุถุญ:** ููฺฏุงู ``factorial(5)`` ูุฑุงุฎูุงู ูโุดูุฏ (``n == 5``)ุ ุดุฑุท ``1 => n`` ุฑุฏ ู ุจุฎุด ``else`` ุงุฌุฑุง ูโุดูุฏ. ุฏุฑ ุงู ูุฑุญูู ููููู ุฏฺฏุฑ ุงุฒ ุชุงุจุน ุจุง ุขุฑฺฏููุงู ``4`` ูุฑุงุฎูุงูโ ูโุดูุฏ ู ุงุฌุฑุง ``factorial(5)`` ููุชุธุฑ ูพุงุงู ุงุฌุฑุง ``factorial(4)`` ู ุฏุฑุงูุช ูุชุฌู ุขู ูโูุงูุฏ. ุจู ููู ุชุฑุชุจ ฺูุฏู ููููู ุงุฒ ฺฉ ุชุงุจุน ุงุฌุฑุง ูโุดููุฏ ฺฉู ููุชุธุฑ ุฏุฑุงูุช ูุชุฌู ุงุฒ ููููู ุจุนุฏ ุงุฒ ุฎูุฏ ูุณุชูุฏ. ุฏุฑ ููุงุช ุดุฑุท ``1 => n`` ุจุฑูุฑุงุฑ ูโุดูุฏ ู ููููู ``factorial(1)`` ูุชุฌู ุฎูุฏ ุฑุง ุจู ``factorial(2)`` ุจุฑูโฺฏุฑุฏุงูุฏ. ุจู ููู ุชุฑุชุจ ูุชุงุฌ ุจุงุฒฺฏุดุช ุฏุงุฏู ูโุดููุฏ ุชุง ุจู ููููู ูุฎุณุช ุงุฌุฑุง ุดุฏู ุนู ``factorial(5)`` ุจุฑุณุฏ ู ุงุฌุฑุง ููุฑุฏ ูุธุฑ ฺฉุงุฑุจุฑ ุจู ูพุงุงู ุจุฑุณุฏ.

ูุฏุฑุช ุชูุงู ุชุงุจุน (ุดูู ุจุงุฒฺฏุดุช) ุฏุฑ ุญุงูุธู ุจุง ุงุณุชูุงุฏู ุงุฒ ุณุงุฎุชูุงู ุฏุงุฏู ูพุดุชู (Stack) [`ูฺฉโูพุฏุง <https://en.wikipedia.org/wiki/Stack_(abstract_data_type)>`__] ุงูุฌุงู ูโุดูุฏ.

ูุฑ ุชุงุจุน ุจุงุฒฺฏุดุช ุดุงูู ุฏู ุจุฎุด ููู ุงุณุช:

* ฺฉ ุนุจุงุฑุช ุญุงู ูุฑุงุฎูุงู ุฎูุฏ ุชุงุจุน
* ฺฉ ุดุฑุท ุจุฑุง ุงูุชุฎุงุจ ุจู ูุฑุงุฎูุงู ูุฌุฏุฏ ู ูพุงุงู

.. note::
    ูพุงุฏูโุณุงุฒ ุดูู ุจุงุฒฺฏุดุช ุดุงุฏ ุจู ูุธุฑ ูุฌุงูโุงูฺฏุฒ ุจุงุดุฏ ุงูุง ูุจุงุฏ ูุฑุงููุด ฺฉุฑุฏ ฺฉู ูุฒุงู ุญุงูุธู (Memory) ุฒุงุฏ ูุตุฑู ูโฺฉูุฏุ ุงุฌุฑุง ุขู ุฒูุงูโุจุฑ ุฎูุงูุฏ ุจูุฏุ ุฏุฑฺฉ ุฌุฑุงู ุงุฌุฑุง ุขู ุงุบูุจ ุณุฎุช ุงุณุช ู ุงุดฺฉุงูโุฒุฏุง (debug) ุขู ุณุงุฏู ูุฎูุงูุฏ ุจูุฏ!


ุงุณุชูุงุฏู ุงุฒ decorator
~~~~~~~~~~~~~~~~~~~~~

ููฺฏุงู ุงุณุชูุงุฏู ุงุฒ decorator ุจุฑ ุฑู ุชูุงุจุน ุจุงุฒฺฏุดุช ุจุงุฏ ุจู ุงู ูฺฉุชู ุชูุฌู ุฏุงุดุชู ุจุงุดุฏ ฺฉู ุงู decorator ุจุฑ ุฑู ุชูุงู ูููููโูุง ูุฑุงุฎูุงู ุดุฏู ุงุฒ ุชุงุจุน ุงุนูุงู ุฎูุงูุฏ ุดุฏ ู ุงูฺฉู ุชููุง ฺฉ ููููู ุงุฒ decorator ุงุฌุงุฏ ูโุดูุฏ ู ุชูุงู ูููููโโูุง ุชุงุจุน ุจู ููุงู ฺฉ ููููู ุงุฑุณุงู ูโุดููุฏ::

  >>> def logger(func):
  ...     print('Decorator is created!')
  ...     def func_wrapper(number):
  ...         print(f'New factorial call with parameter: {number}')
  ...         result = func(number)
  ...         print (f'factorial({number}) ==> {result}')
  ...         return result
  ...     return func_wrapper
  ... 
  >>> @logger
  ... def factorial(n):
  ...     if n <= 1:
  ...         return 1
  ...     else:
  ...         return n * factorial(n - 1)
  ... 
  >>> 
  >>> factorial(5)
  Decorator is created!
  New factorial call with parameter: 5
  New factorial call with parameter: 4
  New factorial call with parameter: 3
  New factorial call with parameter: 2
  New factorial call with parameter: 1
  factorial(1) ==> 1
  factorial(2) ==> 2
  factorial(3) ==> 6
  factorial(4) ==> 24
  factorial(5) ==> 120
  120
  >>> 

*ุจู ุฎุฑูุฌ ููููู ฺฉุฏ ุจุงูุง ุญุชูุง ุชูุฌู ููุงุฏ!.*

ุชูุธู ุนูู ุจุงุฒฺฏุดุช
~~~~~~~~~~~~~~~~~~~~

ุฏุฑ ุฒุจุงู ุจุฑูุงููโููุณ ูพุงุชูู ุฏุฑ ุนูู ูพุงุฏูโุณุงุฒ ุชูุงุจุน ุจุงุฒฺฏุดุช (ุชุนุฏุงุฏ ูููููโูุง ูุฑุงุฎูุงู ุดุฏู ุงุฒ ุชุงุจุน ู ููุฌูุฏ ุฏุฑ ูพุดุชู) ฺฉ ูุญุฏูุฏุช ูุงุจู ุชูุธู ูุฌูุฏ ุฏุงุฑุฏ. ุชุงุจุน ``()getrecursionlimit`` ุงุฒ ูุงฺูู ``sys`` ุงู ููุฏุงุฑ ุฑุง ุจุฑูโฺฏุฑุฏุงูุฏ [`ุงุณูุงุฏ ูพุงุชูู <https://docs.python.org/3/library/sys.html#sys.getrecursionlimit>`__]. ุงู ููุฏุงุฑ ุจู ุตูุฑุช ูพุดโูุฑุถ ุจุฑุงุจุฑ ุจุง ``1000`` 	ูโุจุงุดุฏ ฺฉู ุจุง ุงุณุชูุงุฏู ุงุฒ ุชุงุจุน ``(limit)setrecursionlimit`` ุงุฒ ูุงฺูู ``sys`` ูโุชูุงู ุขู ุฑุง ุชุบุฑ ุฏุงุฏ [`ุงุณูุงุฏ ูพุงุชูู <https://docs.python.org/3/library/sys.html#sys.setrecursionlimit>`__]::

  >>> import sys

  >>> sys.getrecursionlimit()
  1000

  >>> sys.setrecursionlimit(50)

  >>> sys.getrecursionlimit()
  50

ุจุง ุฑุฏ ุดุฏู ุงุฒ ูุญุฏูุฏุช ุนูู ุชูุงุจุน ุจุงุฒฺฏุดุช ฺฉ ุงุณุชุซูุง ``RecursionError`` ฺฏุฒุงุฑุด ุฎูุงูุฏ ุดุฏ::

  
  >>> factorial(9)
  362880

  >>> sys.setrecursionlimit(10)

  >>> factorial(9)
  Traceback (most recent call last):
    File "<stdin>", line 1, in <module>
    File "<stdin>", line 5, in factorial
    File "<stdin>", line 5, in factorial
    File "<stdin>", line 5, in factorial
    [Previous line repeated 5 more times]
    File "<stdin>", line 2, in factorial
  RecursionError: maximum recursion depth exceeded in comparison

.. tip::
    ุนูุงูู ุจุฑ ุงู ูุญุฏูุฏุชุ ฺฉ ูุญุฏูุฏุช ุฌุฏโุชุฑ ุฏฺฏุฑ ูุฒ ูุฌูุฏ ุฏุงุฑุฏ ู ุขู ูู ูุฒุงู ูุถุง ุงุณุช ฺฉู ุชูุณุท ุณุณุชู ุนุงูู ุจุฑุง ูพุดุชู ุฏุฑ ูุธุฑ ฺฏุฑูุชู ุดุฏู ุงุณุช. ุจุง ุฑุฏ ุดุฏู ุงุฒ ุงู ููุฏุงุฑ ูุถุงุ ุจุฑูุงูู ุจุง ุฎุทุง ุฒูุงู ุงุฌุฑุง ููุงุฌู ูโฺฏุฑุฏุฏ (``RuntimeError``).

ุชุงุจุน Generator ุจุงุฒฺฏุดุช
~~~~~~~~~~~~~~~~~~~~~~

ุฏุฑ ูพุงุฏูโุณุงุฒ ุชูุงุจุน Generator ู Coroutine ูุฒ ูโุชูุงู ุดูู ุจุงุฒฺฏุดุช ุฑุง ุฏุฑ ูุธุฑ ฺฏุฑูุชุ ุฏุฑ ุงู ุตูุฑุช ููฺฉู ุงุณุช ูุชุงุฌ ฺฉู ุจุฑุฎูุงู ุงูุชุธุงุฑ ุดูุง ุจุงุดุฏ. ููููู ฺฉุฏ ุฒุฑ ฺฉ ุด ูุณุช ุชู ุฏุฑ ุชู ุฑุง ุฏุฑุงูุช ู ุชฺฉ ุชฺฉ ุงุนุถุง ุฏุฑูู ูุฑ ูุณุช ุฑุง ฺุงูพ ูโฺฉูุฏ::

  >>> def flatten(lists):
  ...     for sub in lists:
  ...         if isinstance(sub,list):
  ...             flatten(sub)
  ...         else:
  ...             print(sub)
  ... 
  >>> items = [[1,2,3],[4,5,[5,6]],[7,8,9]]
  >>> flatten(items)
  1
  2
  3
  4
  5
  5
  6
  7
  8
  9
  >>> 

ุงฺฉููู ุจุฑุง ุชุจุฏู ุชุงุจุน ``flatten`` ุจู ฺฉ  Generator ฺฉุงู ุงุณุช ุจู ุฌุง ``print`` ุงุฒ ``yield`` ุงุณุชูุงุฏู ฺฉูู::

  >>> def genflatten(lists):
  ...     for sub in lists:
  ...         if isinstance(sub,list):
  ...             genflatten(sub)
  ...         else:
  ...             yield sub
  ... 
  >>> items = [[1,2,3],[4,5,[5,6]],[7,8,9]]

  >>> genflatten(items)
  <generator object genflatten at 0x7eff06d40150>

  >>> list(genflatten(items))
  []


ุงุชูุงู ููุชุงุฏ! ู ุฎุฑูุฌ ฺฉ ูุณุช ุฎุงู ุงุณุช. ุงุฒ ุฏุฑุณ ูพุด ุจู ุฎุงุทุฑ ุฏุงุฑูุ ูุฑุงุฎูุงู ุชุงุจุน ``genflatten`` (ฺฉู ุฏุฑ ูุงูุน ฺฉ ุชุงุจุน Generator ุงุณุช) ุชููุง ุจุงุนุซ ุงุฌุงุฏ ฺฉ ุด Generator ูโุดูุฏ ู ูโุจุงุณุช ุฏุฑ ููุทูโุง ฺฉู ุชุงุจุน ุฎูุฏุด ุฑุง ูุฑุงุฎูุงู ูโฺฉูุฏ ูุฒ ููุฏูุงุช ูพุฑุฏุงุฒุด ุฎุฑูุฌ ฺฉ ุด Generator ุฑุง ูุฑุงูู ฺฉูู. ุงฺฉููู ุจุง ุงุตูุงุญ ฺฉุฏ ุจุงูุง::

  >>> def genflatten(lists):
  ...     for sub in lists:
  ...         if isinstance(sub,list):
  ...             for item in genflatten(sub):
  ...                 yield item
  ...         else:
  ...             yield sub
  ... 
  >>> items = [[1,2,3],[4,5,[5,6]],[7,8,9]]

  >>> genflatten(items)
  <generator object genflatten at 0x7f6cee349258>

  >>> list(genflatten(items))
  [1, 2, 3, 4, 5, 5, 6, 7, 8, 9]


Memoization
~~~~~~~~~~~~~

**Memoization** ุง ุงุฏุขูุฑุ ฺฉ ุชฺฉูฺฉ ุจุฑุง ูฺฏูุฏุงุฑ ุงุฒ ูุชุงุฌ ุจู ุฏุณุช ุขูุฏู ุจู ููุธูุฑ ุฌููฺฏุฑ ุงุฒ ุชฺฉุฑุงุฑ ูุญุงุณุจุงุช ุงุณุช [`ูฺฉโูพุฏุง <https://en.wikipedia.org/wiki/Memoization>`__]. ุงู ุชฺฉูฺฉ ุฑุง ูโุชูุงู ุฏุฑ ุฒุจุงู ุจุฑูุงููโููุณ ูพุงุชูู ุจุง ุงุณุชูุงุฏู ุงุฒ **decorator** ูพุงุฏูโุณุงุฒ ฺฉุฑุฏ.

ุจุฑุง ุชูุถุญ ุงู ุจุฎุด ุงุฌุงุฒู ุฏูุฏ ฺฉ ูุซุงู ุจุงุฒฺฏุดุช ุฏฺฏุฑ ุฑุง ุจุฑุฑุณ ฺฉูู. ูุญุงุณุจู ููุฏุงุฑ ูุจููุงฺ [`ูฺฉโูพุฏุง <https://en.wikipedia.org/wiki/Fibonacci_number>`__] ฺฉ ุนุฏุฏ ูุดุฎุต:

.. image:: /_static/l14-fibonacci-relation.png
    :align: center

::

  >>> def fibonacci(n):
  ...     if n <= 1:
  ...         return n
  ...     else:
  ...         return fibonacci(n-1) + fibonacci(n-2)
  ... 
  >>> for number in range(10):
  ...    print(fibonacci(number))
  ... 
  0
  1
  1
  2
  3
  5
  8
  13
  21
  34

  
ุฏุฑ ุงู ูุซุงู ูุง ุงุฒ ุนุฏุฏ ``9`` ุฌููุชุฑ ูุฑูุชู ฺุฑุง ฺฉู ูุญุงุณุจู ุจุฑุง ุงุนุฏุงุฏ ุจุฒุฑฺฏุชุฑ ุจู ูุงููุฏ ``50`` ูุงูุนุง ุฒูุงูโุจุฑ ุฎูุงูุฏ ุจูุฏ ู ุงู ูุฑุตุช ุงุณุช ุชุง ูุง ฺฉุงุฑุง ุชฺฉูฺฉ Memoization ุฑุง ูุญฺฉ ุจุฒูู. ุงฺฉููู ุชุงุจุน ุจุงุฒฺฏุดุช ูุจููุงฺ ุฎูุฏ ุฑุง ุจุง ุงุณุชูุงุฏู ุงุฒ ุชฺฉูฺฉ Memoization ู ฺฉ Decorator ุจูููโุณุงุฒ ูโฺฉูู::

  >>> def memoize_fibonacci(func):
  ...     memory = {} 
  ...     def func_wrapper(number): 
  ...         if number not in memory: 
  ...             memory[number] = func(number)
  ...         return memory[number]
  ...     return func_wrapper
  ... 
  >>> @memoize_fibonacci
  ... def fibonacci(n):
  ...     if n <= 1:
  ...         return n
  ...     else:
  ...         return fibonacci(n-1) + fibonacci(n-2)
  ... 
  >>> 

ุญุงูุง ููุฏุงุฑ ``50`` ฺฉู ูฺุ ููุฏุงุฑ ูุจููุงฺ ุจุฑุง ุนุฏุฏ ``500`` ุฑุง ูุญุงุณุจู ฺฉูุฏ (``(500)fibonacci``). ุชูุงูุช ุฏุฑ ุฒูุงู ุงุฌุฑุง ุฑุง ุฎูุฏุชุงู ูุชูุฌู ุฎูุงูุฏ ุดุฏ!


ุจู ฺฉูฺฉ Decorator ุฏุฑ ุงู ูุซุงู (``memoize_fibonacci``) ูุชุงุฌ ุญุงุตู ุงุฒ ูุฑุงุฎูุงู ูุฑ ููููู ุชุงุจุน ุฏุฑ ุฌุง ุฐุฎุฑู ูโุดูุฏ (ุด ุฏฺฉุดูุฑ ``memory``) ู ูพุด ุงุฒ ูุฑุงุฎูุงู ูุฌุฏุฏ ฺฉ ููููู ุฌุฏุฏ ุงุฒ ุชุงุจุน ุจุฑุฑุณ ูโุดูุฏ ฺฉู ุขุง ูุจูุง ุงู ููุฏุงุฑ ูุญุงุณุจู ุดุฏู ุงุณุช ุง ุฎุฑ. ุฏุฑ ุตูุฑุช ูุฌูุฏ ุฌูุงุจ ุงุฒ ุชฺฉุฑุงุฑ ูุฑุงุฎูุงู ุชุงุจุน ุตุฑู ูุธุฑ ู ููุฏุงุฑ ุงุฒ ูพุด ููุฌูุฏ ุจู ุนููุงู ูุชุฌู ุจุฑฺฏุฑุฏุงูุฏู ูโุดูุฏ. ุจูุงุจุฑุงู ุจุฏู ุงุณุช ฺฉู ุจุง ุฌููฺฏุฑ ุงุฒ ุงุฌุงุฏ ููููู ุชูุงุจุน ุฌุฏุฏ ู ูุญุงุณุจุงุช ุชฺฉุฑุงุฑุ ุณุฑุนุช ุงุฌุฑุง ุงูุฒุงุด ุงุจุฏ.



















|

----

:emoji-size:`๐` ุงูุฏูุงุฑู ููุฏ ุจูุฏู ุจุงุดู

`ูุทูุง ุฏุฏฺฏุงู ู ุณูุงูโูุง ูุฑุชุจุท ุจุง ุงู ุฏุฑุณ ุฎูุฏ ุฑุง ุฏุฑ ฺฉุฏุฑุฒ ูุทุฑุญ ููุงุฏ. <http://www.coderz.ir/python-tutorial-function-decorator-generator-yield-coroutine-lambda/>`_



