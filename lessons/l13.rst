.. role:: emoji-size

.. meta::
   :description: ฺฉุชุงุจ ุขููุงู ู ุขุฒุงุฏ ุขููุฒุด ุฒุจุงู ุจุฑูุงููโููุณ ูพุงุชูู ุจู ูุงุฑุณ - ุฏุฑุณ ุณุฒุฏูู ุชุงุจุน
   :keywords:  ุขููุฒุด, ุขููุฒุด ูพุงุชูู, ุขููุฒุด ุจุฑูุงูู ููุณ, ูพุงุชูู, ุงููุงุน ุด, ุงููุงุน ุฏุงุฏู, ูพุงุชูู


ุฏุฑุณ ฑณ: ุชุงุจุน - ุจุฎุด ุฏูู
========================








:emoji-size:`โ` ุณุทุญ: ูุชูุณุท

----


.. contents:: ุณุฑูุตูโูุง
    :depth: 2

----




Decorator
----------


ุฏฺฉูุฑุงุชูุฑ (ุชุฒุฆูโฺฏุฑ) ุง ููุงู **Decoratorโ** ูุง [`PEP 318 <https://www.python.org/dev/peps/pep-0318//>`__] ุจู ุชูุงุจุน ฺฏูุชู ูโุดูุฏ ฺฉู ุจู ููุธูุฑ ูพูุดุด (wrap) ุชูุงุจุน ุง ฺฉูุงุณโูุง ุฏฺฏุฑ ูพุงุฏูโุณุงุฒ ูโุดููุฏ. Decoratorโูุง ุฏุฑ ูพุงุชูู ุงุจุฒุงุฑ ุจุณุงุฑ ฺฉุงุฑุจุฑุฏ ู ููุฏ ูุณุชูุฏ ฺฉู ุจู ุจุฑูุงููโููุณ ุงู ุงูฺฉุงู ุฑุง ูโุฏููุฏ ุชุง ุจุง ฺฉุงูุด ุญุฌู ฺฉุฏููุณ ู ุจุฏูู ุชุบุฑ ุฏุฑ ุจุฏูู ุชูุงุจุน ู ฺฉูุงุณโูุง ุฎูุฏุ ุฑูุชุงุฑ ู ูฺฺฏโูุง ุขูโูุง ุฑุง ฺฏุณุชุฑุด ุฏูุฏ. ุฏุฑ ุงู ุจุฎุด ุชูุฑฺฉุฒ ุจุฑ ุฑู ุงุนูุงู Decoratorโูุง ุจู ุชูุงุจุน ุงุณุช ู Decoratorโ ฺฉูุงุณ ุฑุง ุฏุฑ ุฏุฑุณ ูุฑุจูุท ุจู ฺฉูุงุณโูุง ุจุฑุฑุณ ุฎูุงูู ฺฉุฑุฏ.

ุจุฑุง ูพูุดุด ฺฉ ุชุงุจุน ุชูุณุท Decoratorโ ุงุฒ ุณูุชฺฉุณ ูุดุงุจู ``decoratorโ_name@`` ุฏุฑ ุจุงูุง ุจุฎุด ุณุฑุขูุฏ ุงุณุชูุงุฏู ูโุดูุฏ:

::

  def decorator_name(a_function):
      pass


  @decorator_name
  def function_name():
      print("Somthing!")


  function_name()

ููููู ฺฉู ุงู ุณูุชฺฉุณ (``decoratorโ_name`` + ``@``) ุฏุฑ ุจุงูุง ุจุฎุด ุณุฑุขูุฏ ฺฉ ุชุงุจุน ุจุฑุง ููุณุฑ ูพุงุชูู ุงุฌุงุฏ ูโฺฉูุฏ ฺฉุงููุง ูุดุงุจู ุจุง ุณูุชฺฉุณ ูพุงู ุงุณุช::

  wrapper = decorator_name(function_name)
  wrapper()

ูุฑ ฺุฒ ุฏุฑ ูพุงุชูู ฺฉ ุด ุงุณุช ุญุช ููุงูู ูพฺุฏูโุง ุจู ูุงููุฏ ุชุงุจุนุ ุงุฒ ุฏุฑุณ ูพุด ูุฒ ุจู ุฎุงุทุฑ ุฏุงุฑู ฺฉู ุชุงุจุน ุฏุฑ ูพุงุชูู ฺฉ ููุฌูุฏุช **โfirst-classโ** ุงุณุช ฺฉู ุนู ูโุชูุงู ุชุงุจุน ุฑุง ูุงููุฏ ุฏฺฏุฑ ุงุดุง ุจู ุตูุฑุช ุขุฑฺฏููุงู ุจู ุชูุงุจุน ุฏฺฏุฑ ุงุฑุณุงู ูููุฏ. ููููู ฺฉุฏ ุจุงูุง ูุฒ ููุงุด ุงุฑุณุงู ฺฉ ุชุงุจุน (``function_name``) ุจู ุชุงุจุน ุฏฺฏุฑ (``decoratorโ_name``) ุงุณุช.


ุจู ูุซุงู ูพุงู ุชูุฌู ููุงุฏ:

::

  >>> def decorator_name(func):
  ...     def wrapper():
  ...         print("Something is happening before the function is called.")
  ...         func()
  ...         print("Something is happening after the function is called.")
  ...     return wrapper
  ... 
  >>> 
  >>> @decorator_name
  ... def function_name():
  ...     print("Somthing!")
  ... 
  >>> 
  >>> function_name()
  Something is happening before the function is called.
  Somthing!
  Something is happening after the function is called.
  >>> 

ููููู ฺฉุฏ ุจุงูุง ุฑุง ูโุชูุงู ุจุง ุณุงุฎุชุงุฑ ุณุงุฏู ุฒุฑ ูุฒ ุฏุฑ ูุธุฑ ฺฏุฑูุช:

::

  >>> def decorator_name(func):
  ...     def wrapper():
  ...         print("Something is happening before the function is called.")
  ...         func()
  ...         print("Something is happening after the function is called.")
  ...     return wrapper
  ... 
  >>> 
  >>> def function_name():
  ...     print("Somthing!")
  ... 
  >>> 
  >>> wrapper = decorator_name(function_name)
  >>> wrapper()
  Something is happening before the function is called.
  Somthing!
  Something is happening after the function is called.
  >>> 

ููุงูุทูุฑ ฺฉู ุจุง ููุงุณู ุฏู ููููู ฺฉุฏ ุจุงูุง ูุงุจู ูุดุงูุฏู ุงุณุชุ Decoratorโูุง ฺฉ ุฑููพูุด (wrapper) ุจุฑุง ุชูุงุจุน ู ฺฉูุงุณโูุง ูุง ุจูุฌูุฏ ูโุขูุฑูุฏ. ุฏุฑ ููฺฏุงู ูุฑุงุฎูุงู ุชุงุจุน ``function_name`` ููุณุฑ ูพุงุชูู ูุชูุฌู decoratorโ ุขู ุดุฏู ุงุณุช ู ุจู ุฌุง ุงุฌุฑุงุ ฺฉ ููููู ุด ุงุฒ ุขู ุฑุง ุจู decoratorโ ูุดุฎุต ุดุฏู (``decoratorโ_name``) ุงุฑุณุงู ูโฺฉูุฏ ู ฺฉ ุด ุฌุฏุฏ ฺฉู ุฏุฑ ุงูุฌุง ุจุง ุชุงุจุน ``wrapper`` ูุดุฎุต ุดุฏู ุงุณุช ุฑุง ุฏุฑุงูุช ู ุงุฌุฑุง ูโฺฉูุฏ.

ุฏุฑ ููุฑุฏ ุชูุงุจุน ุฏุงุฑุง ูพุงุฑุงูุชุฑ ูุฒ ุจุงุฏ ุชูุฌู ุฏุงุดุช ฺฉู ุฏุฑ ููฺฏุงู ูุฑุงุฎูุงู ุชุงุจุน ููุฑุฏ ูุธุฑ ู ุงุฑุณุงู ุขุฑฺฏููุงู ุจู ุชุงุจุนุ ููุณุฑ ูพุงุชูู ุงู ุขุฑฺฏููุงูโูุง ุฑุง ุจู ุชุงุจุน ``wrapper`` ุงุฒ decoratorโ ุงุฑุณุงู ูโฺฉูุฏ::

  >>> def multiply_in_2(func):
  ...     def wrapper(*args):
  ...         return func(*args) * 2
  ...     return wrapper 
  ... 
  >>> 
  >>> @multiply_in_2
  ... def sum_two_numbers(a, b):
  ...     return a + b
  ... 
  >>> 
  >>> sum_two_numbers(2, 3)
  10

::

  >>> # normal
  >>>
  >>> def multiply_in_2(func):
  ...     def wrapper(*args):
  ...         return func(*args) * 2
  ...     return wrapper 
  ... 
  >>> 
  >>> def sum_two_numbers(a, b):
  ...     return a + b
  ... 
  >>> 
  >>> wrapper = multiply_in_2(sum_two_numbers)
  >>> wrapper(2, 3)
  10




ูโุชูุงู ุจุด ุงุฒ ฺฉ Decoratorโ ุจู ฺฉูุงุณโูุง ู ุชูุงุจุน ุฎูุฏ ุงุนูุงู ฺฉุฑุฏ ฺฉู ุฏุฑ ุงู ุตูุฑุช ุชุฑุชุจ ูุฑุงุฑ ฺฏุฑูุชู ุงู Decoratorโูุง ุจุฑุง ููุณุฑ ูพุงุชูู ุฏุงุฑุง ุงููุช ุงุณุช::

  @decorator_3
  @decorator_2
  @decorator_1
  def function_name():
      print("Somthing!")


  function_name()


::

  wrapper = decorator_3(decorator_2(decorator_1(function_name)))
  wrapper()


ููฺูู ูโุชูุงู ุจู Decoratorโูุง ุขุฑฺฏููุงู ูุฒ ุงุฑุณุงู ฺฉุฑุฏ::

  @decorator_name(params)
  def function_name():
      print("Somthing!")


  function_name()

ุฏุฑ ุงู ุญุงูุช ููุณุฑ ูพุงุชูู ุงุจุชุฏุง ุขุฑฺฏููุงู ุฑุง ุจู ุชุงุจุน Decoratorโ ุงุฑุณุงู ูโฺฉูุฏ ู ุณูพุณ ุญุงุตู ุฑุง ุจุง ุขุฑฺฏููุงู ูุฑูุฏ ุชุงุจุน ููุฑุฏ ูุธุฑ ูุฑุงุฎูุงู ูโฺฉูุฏ::

  temp_decorator = decorator_name(params)
  wrapper = temp_decorator(function_name)
  wrapper()

ุจู ููููู ฺฉุฏ ูพุงู ุชูุฌู ููุงุฏ::

  >>> def formatting(lowerscase=False):
  ...     def formatting_decorator(func):
  ...         def wrapper(text=''):
  ...             if lowerscase:
  ...                 func(text.lower())
  ...             else:
  ...                 func(text.upper())
  ...         return wrapper 
  ...     return formatting_decorator
  ... 
  >>> 
  >>> @formatting(lowerscase=True)
  ... def chaap(message):
  ...     print(message)
  ... 
  >>> 
  >>> chaap("I Love Python")
  i love python
  >>> 


Generator
----------

ฺูุฑุงุชูุฑ (ูููุฏ) ุง ููุงู **Generatorโ** ูุง [`PEP 255 <https://www.python.org/dev/peps/pep-0255/>`__] ุจู ุชูุงุจุน ฺฏูุชู ูโุดูุฏ ฺฉู ุจู ููุธูุฑ ุงุฌุงุฏ ฺฉ ุชุงุจุน ุจุง ุฑูุชุงุฑ ูุดุงุจู ุงุดุง ``iterator`` (ุชฺฉุฑุงุฑฺฉููุฏู - ุฏุฑุณ ููู) ูพุงุฏูโุณุงุฒ ูโุดููุฏ.

ุจุฑ ุฎูุงู ุดโุง ุจู ูุงููุฏ ูุณุชุ ุนููฺฉุฑุฏ Generatorโ ุจู ุตูุฑุช **lazy** (ฺฉูุฏุฑู) [`ูฺฉโูพุฏุง <https://en.wikipedia.org/wiki/Lazy_evaluation>`__] ูโุจุงุดุฏ ู ุฏุงุฏูโูุง ุฑุง ฺฉุฌุง ุฐุฎุฑู ููโฺฉูุฏ ุจูฺฉู ุขููุง ุฑุง ุชููุง ุฏุฑ ููุงู ุฒูุงู ฺฉู ุฏุฑุฎูุงุณุช ูโุดููุฏุ **ุชููุฏ** (Generate) ูโฺฉูุฏ. ุจูุงุจุฑุงู ุฏุฑ ููฺฏุงู ุจุฑุฎูุฑุฏ ุจุง ูุฌููุนู ุฏุงุฏูโูุง ุจุฒุฑฺฏุ Generatorโูุง ูุฏุฑุช ุญุงูุธู ฺฉุงุฑุขูุฏุชุฑ ุฏุงุฑูุฏ ู ููฺูู ูุง ูุฌุจูุฑ ูุณุชู ูพุด ุงุฒ ุงุณุชูุงุฏู ุงุฒ ฺฉ ุฏูุจุงูู ููุชุธุฑ ุจูุงูู ุชุง ุชูุงู ููุงุฏุฑ ุขู ุชููุฏ ุดููุฏ!.

ุจุฑุง ุงุฌุงุฏ ฺฉ ุชุงุจุน Generator ุชููุง ฺฉุงู ุงุณุช ุฏุฑ ฺฉ ุชุงุจุน ูุนููู ุงุฒ ุฏุณุชูุฑ ``yield`` ุงุณุชูุงุฏู ฺฉูู. ุงฺฉููู ููุณุฑ ูพุงุชูู ุฏุฑ ููฺฏุงู ูุฑุงุฎูุงู ุงู ุชุงุจุน ฺฉ ุด ``generator`` ุจุฑูโฺฏุฑุฏุงูุฏ ฺฉู ุชูุงูุง ุชููุฏ ฺฉ **ุฏูุจุงูู** (Sequence) ุงุฒ ููุงุฏุฑ (ุด) ุจุฑุง ุงุณุชูุงุฏู ุฏุฑ ฺฉุงุฑุจุฑุฏูุง ุชฺฉุฑุงุฑูพุฐุฑ ุฑุง ุฏุงุฑุฏ.

ุฏุณุชูุฑ ``yield`` ุฑููุฏ ุงุฌุฑุง ุจุฑูุงูู ุฑุง ุจุง ุญูุธ ูุถุนุชุ ูุชููู ูโฺฉูุฏ ู  ูโุชูุงูู ุจุง ุงุณุชูุงุฏู ุงุฒ ูุชุฏ ``()__next__`` (ุง ``()next`` ุฏุฑ ูพุงุชูู 2x) ุฑููุฏ ุงุฌุฑุง ุชุงุจุน ุฑุง ุฏุฑ ุฏุณุช ุจฺฏุฑู::


  >>> def a_generator_function():
  ...    for i in range(3):
  ...       yield i*i
  ...    return
  ... 
  >>> my_generator = a_generator_function()  # Create a generator
  >>> 
  >>> my_generator.__next__()  #  Use my_generator.next() in Python 2.x
  0
  >>> my_generator.__next__()
  1
  >>> my_generator.__next__()
  4
  >>> my_generator.__next__()
  Traceback (most recent call last):
    File "<stdin>", line 1, in <module>
  StopIteration
  >>> 



ููุงูุทูุฑ ฺฉู ุฏุฑ ุงูุชูุง ุฏุฑุณ ููู (ุจุฎุด ยซุด ุชฺฉุฑุงุฑฺฉููุฏูยป) ูุฒ ุงุดุงุฑู ุดุฏู ุจูุฏุ  ูโุชูุงูู ููุงุฏุฑ ุฏูุจุงูู ููุฑุฏ ูุธุฑ ุฎูุฏ ุฑุง ุจุง ุงุณุชูุงุฏู ุงุฒ ูุชุฏ ``()__next__`` (ุง ``()next`` ุฏุฑ ูพุงุชูู 2x) ุฏุฑุฎูุงุณุช ููุงู. ุจุงุฏ ุชูุฌู ุฏุงุดุช ฺฉู ูพุงุงู ุงู ุฏูุจุงูู ุชูุณุท ุงุณุชุซูุง ``StopIteration`` ฺฏุฒุงุฑุด ูโุดูุฏ. ุฏุฑ ุฒูุงู ุงุณุชูุงุฏู ุงุฒ ุฏุณุชูุฑ ``for`` ุงู ุงุณุชุซูุง ฺฉูุชุฑู ุดุฏู ู ุญููู ูพุงุงู ูโูพุฐุฑุฏ. ููููู ฺฉุฏ ูุจู ุฑุง ุจู ุตูุฑุช ุฒุฑ ุจุงุฒููุณ ูโฺฉูู::

  >>> def a_generator_function():
  ...    for i in range(3):  # i: 0, 1, 2
  ...       yield i*i
  ...    return
  ... 
  >>> 
  >>> my_generator = a_generator_function()  # Create a generator
  >>> 
  >>> type(my_generator)
  <class 'generator'>
  >>> 
  >>> for i in my_generator:
  ...     print(i)
  ... 
  0
  1
  4
  >>> 


ูฺฺฏโูุง ุชุงุจุน Generatorโ
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
  

* ุชุงุจุน Generatorโ ฺฉ ุชุงุจุน ูุนููู ุงุณุช ฺฉู ุฑูุชุงุฑ ูุดุงุจู ุจุง ฺฉ ุด ุชฺฉุฑุงุฑฺฉููุฏู (iterator) ุฏุงุฑุฏ.

* ุชุงุจุน Generatorโ ุดุงูู ฺฉ ุง ฺูุฏ ุฏุณุชูุฑ ``yield`` ูโุจุงุดุฏ.

* ุฏุฑ ุฒูุงู ูุฑุงุฎูุงู ุชุงุจุน Generatorโุ ุชุงุจุน ุงุฌุฑุง ููโุดูุฏ ูู ุฏุฑ ุนูุถ ฺฉ ุด ุงุฒ ููุน ``generator`` ุจุฑุง ุขู ุชุงุจุน ุจุฑฺฏุฑุฏุงูุฏู ูโุดูุฏ.

* ุจุง ุงุณุชูุงุฏู ุงุฒ ุฏุณุชูุฑ ``yield`` ูโุชูุงูู ุฏุฑ ูุฑ ููุทูโุง ุงุฒ ุชุงุจุน Generatorโ ฺฉู ุจุฎูุงูู ุชููู ุงุฌุงุฏ ฺฉูู - ุจุฏูู ุงุฒ ุฏุณุช ุฑูุชู ูุถุนุช ูุนู ุชุงุจุน - ู ุณูพุณ ุจุง ุงุณุชูุงุฏู ุงุฒ ูุชุฏ ``()__next__`` (ุง ``()next`` ุฏุฑ ูพุงุชูู 2x) ุจู ุงุฏุงูู ุฑููุฏ ุงุฌุฑุง ุจุฑฺฏุฑุฏู. 

* ุจุง ูุฎุณุชู ูุฑุงุฎูุงู ูุชุฏ ``()__next__`` ุชุงุจุน ุงุฌุฑุง ูโุดูุฏุ ุชุง ุฒูุงู ฺฉู ุจู ฺฉ ุฏุณุชูุฑ ``yield`` ุจุฑุณุฏ. ุฏุฑ ุงู ุฒูุงู  ุฏุณุชูุฑ ``yield`` ฺฉ ูุชุฌู ุชููุฏ ูโฺฉูุฏ ู ุงุฌุฑุง ุชุงุจุน ูุชููู ูโุดูุฏ. ุจุง ูุฑุงุฎูุงู ูุฌุฏุฏ  ูุชุฏ ``()__next__`` ุงุฌุฑุง ุชุงุจุน ุงุฒ ุงุฏุงูู ุฏุณุชูุฑ ``yield`` ุณุฑ ฺฏุฑูุชู ูโุดูุฏ.

* ูุนูููุง ูุงุฒ ุจู ุงุณุชูุงุฏู ูุณุชูู ุงุฒ ูุชุฏ ``()__next__`` ููโุดูุฏ ู ุชูุงุจุน Generatorโ ุงุฒ ุทุฑู ุฏุณุชูุฑูุง ุจู ูุงููุฏ ``for`` ุง  ุชูุงุจุน ุจู ูุงููุฏ ``()sum`` ู... ฺฉู ุชูุงูุง ุฏุฑุงูุช ฺฉ **ุฏูุจุงูู** (Sequence) ุฑุง ุฏุงุฑูุฏุ ููุฑุฏ ุงุณุชูุงุฏู ูุฑุงุฑ ูโฺฏุฑูุฏ.

* ุฏุฑ ูพุงุงู ุชููุฏ ุชูุงุจุน Generatorโ ฺฉ  ุงุณุชุซูุง ``StopIteration`` ุฏุฑ ููุทู ุชููู ุฎูุฏ ฺฏุฒุงุฑุด ูโุฏููุฏ ฺฉู ูโุจุงุณุช ุฏุฑูู ุจุฑูุงูู ฺฉูุชุฑู ุดูุฏ.

* ูุฑุงููุด ูฺฉูู ฺฉู ุงุณุชูุงุฏู ุงุฒ ุฏุณุชูุฑ ``return`` ุฏุฑ ูุฑ ฺฉุฌุง ุงุฒ ุจุฏูู ุชุงุจุน ุจุงุนุซ ูพุงุงู ุงูุชู ุงุฌุฑุง ุชุงุจุน ุฏุฑ ุขู ููุทู ูโุดูุฏ ู ุชูุงุจุน Generatorโ ูุฒ ุงุฒ ุงู ุงูุฑ ูุณุซูุง ูุณุชูุฏ .



ุจู ฺฉ ููููู ฺฉุฏ ุฏฺฏุฑ ูุฒ ุชูุฌู ููุงุฏ::

  >>> def countdown(n):
  ...     print("Counting down from %d" % n)
  ...     while n > 0:
  ...        yield n
  ...        n -= 1
  ...     return
  ... 
  >>> 
  >>> countdown_generator = countdown(10)
  >>> 
  >>> countdown_generator.__next__()
  Counting down from 10
  10
  >>> countdown_generator.__next__()
  9
  >>> countdown_generator.__next__()
  8
  >>> countdown_generator.__next__()
  7
  >>> 


ุฏุฑ ุงุฏุงูู Yield ู Coroutines
------------------------------------





|

----

:emoji-size:`๐` ุงูุฏูุงุฑู ููุฏ ุจูุฏู ุจุงุดู



