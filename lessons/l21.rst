.. role:: emoji-size

.. meta::
   :description: ฺฉุชุงุจ ุขููุฒุด ุฒุจุงู ุจุฑูุงูู ููุณ ูพุงุชูู ุจู ูุงุฑุณุ ุขููุฒุด ุด ฺฏุฑุง ุฏุฑ ูพุงุชููุ OOP ุฏุฑ ูพุงุชููุ  Decorators ุฏุฑ ูพุงุชููุ Descriptors ุฏุฑ ูพุงุชููุ Properties ุฏุฑ ูพุงุชููุ ุฏุชุง ฺฉูุงุณ ุฏุฑ ูพุงุชููุ Data Classe ุฏุฑ ูพุงุชูู
   :keywords:  ุขููุฒุด, ุขููุฒุด ูพุงุชูู, ุขููุฒุด ุจุฑูุงูู ููุณ, ูพุงุชูู, Decorators, ฺฉุชุงุจุฎุงูู, ูพุงุชูู, ุด ฺฏุฑุง ุฏุฑ ูพุงุชูู, Descriptors,Properties 


ุฏุฑุณ ฒฑ: ุด ฺฏุฑุง (OOP) ุฏุฑ ูพุงุชูู: Descriptors ุDecorator ุData Class ู Properties
===================================================================================================


ุชูุฌู ุฏุงุดุชู ุจุงุดุฏุ ูู ุงฺฉููู ูพุดุชุจุงู ูุณุฎู 2x ูพุงุชูู ุจู ูพุงุงู ุฑุณุฏู ุงุณุช. ุจูุงุจุฑุงู	ููุงููุฏ ุฏุฑูุณ ูพุด ุด ฺฏุฑุง ู ุจู ููุธูุฑ ุฌููฺฏุฑ ุงุฒ ูพฺุฏฺฏโูุง ุบุฑ ุถุฑูุฑุ ุชูุงู ูุทุงูุจ ุงู ุฏุฑุณ ุจุฑ ูุจูุง ูพุงุชูู 3x ุงุฑุงุฆู ูโุดูุฏ.



:emoji-size:`โ` ุณุทุญ: ูุชูุณุท

----


.. contents:: ุณุฑูุตูโูุง
    :depth: 2

----


Data Classes
----------------------------

ุงุฒ **ูุณุฎู 3.7 ูพุงุชูู** ฺฉ ูฺฺฏ ุฌุงูุจ ุจู ูพุงุชูู ุงุถุงูู ฺฏุฑุฏุฏ. ุฏุชุง ฺฉูุงุณ **(Data Class)**ุ ุฏุฑ ูุงูุน ฺฉ ุณูุชฺฉุณ ุณุงุฏูโุณุงุฒ ุดุฏู ุจุฑุง ุงุฌุงุฏ ฺฉูุงุณโูุง ฺฉู ูุนูููุง ุชููุง ุญุงู Instance Attribute ูโุจุงุดูุฏ. ุงู ููุน ฺฉูุงุณ ุจุง ุงุณุชูุงุฏู ุงุฒ ุฏฺฉูุฑุงุชูุฑ ``dataclass@`` ุงุฒ ูุงฺูู ``dataclasses`` ุงุฌุงุฏ ูโฺฏุฑุฏุฏ [`ุงุณูุงุฏ ูพุงุชูู <https://docs.python.org/3/library/dataclasses.html>`__]. ุจุฑุง ูุซุงู ฺฉูุงุณ ุฒุฑ ุฑุง ุฏุฑ ูุธุฑ ุจฺฏุฑุฏ:


.. code-block:: python
    :linenos:

    from dataclasses import dataclass

    @dataclass
    class Student:
        name: str
        score: int

    student = Student('Saeid', 70)
    print(student)
    print('-' * 30)
    print(student.name)
    print(student.score)
    print('-' * 30)
    print(Student('Saeid', 70) == Student('Saeid', 70))

::

    Student(name='Saeid', score=70)
    ------------------------------
    Saeid
    70
    ------------------------------
    True


ุฏุฑ ุงู ููุน ฺฉูุงุณ ุจุฑุง ุชุนุฑู Attributeูุง ุงุฒ ุณูุชฺฉุณ  Variable Annotations [`PEP 526 <https://www.python.org/dev/peps/pep-0526/>`__] ุงุณุชูุงุฏู ูโุดูุฏ. ุงู ุณูุชฺฉุณ ู ุฏุฑ ฺฉู ุฐฺฉุฑ ููุน ุฏุงุฏู ุฏุฑ ูพุงุชูู ุง Type Hints [`PEP 484 <https://www.python.org/dev/peps/pep-0484/>`__] **ููุถูุน ุฏุฑุณ ุจุนุฏ ุงุณุช**. ุฏุฑ ุงู ุดูู ููุน ูุชุบุฑูุง ุจู ุตุฑุงุญุช ุฐฺฉุฑ ูโฺฏุฑุฏุฏ. ุฏุฑ ุญุงูุช ุนุงุฏ ุชุนุฑู ฺฉ ูุชุบุฑ ุฏุฑ ุฒุจุงู ุจุฑูุงููโููุณ ูพุงุชูู ุจู ุตูุฑุช ``var = value`` ูโุจุงุดุฏ (ุฏุฑุณ ุดุดู)ุ ููุงูุทูุฑ ฺฉู ูโุฏุงูู ุชุงฺฉููู ูฺโฺฏุงู ุฏุฑ ูพุงุชูู ุจุฑุง ุชุนุฑู ูุชุบุฑ ูุงุฒ ุจู ุฐฺฉุฑ ุตุฑุญ ููุน ุฏุงุฏู ููโุจูุฏุ **ุงฺฉููู ูุฒ ูุงุฒ ูุณุช**ุ ูู ุงุฒ **ูุณุฎู 3.6 ูพุงุชูู** ูโุชูุงูู ุงูฺฉุงุฑ ุฑุง ุงูุฌุงู ุฏููุ ูโุชูุงูู ููุน ุฏุงุฏู ุฑุง ุฎูุฏูุงู ูุดุฎุต ฺฉูู ุง ุจู ุงุตุทูุงุญ ุขู ููุน ุฑุง annotation ฺฉูู. ุณูุชฺฉุณ ุงู ุนููุงุช ุจู ุตูุฑุช ``var: annotation`` ูโุจุงุดุฏุ ุงู ุณูุชฺฉุณ ูุดุฎุต ูโฺฉูุฏ ฺฉู ูุชุบุฑ var ุงุฒ ููุน annotation ูโุจุงุดุฏ. ููฺูู ุจุง ุงุณุชูุงุฏู ุงุฒ ุณูุชฺฉุณ ``var: annotation = value`` ูุฒ ูโุชูุงู ููุฒูุงู ุนููุงุช ุงูุชุณุงุจ ู ููุฏุงุฑุฏู ุฑุง ูุฒ ุงูุฌุงู ุฏุงุฏ. ุจุงุฏ ุชูุฌู ุฏุงุดุช ฺฉู ุชุบุฑ ุฏุฑ ุณุงุฎุชุงุฑ ููุณุฑ ูพุงุชูู ุงุฌุงุฏ ูุดุฏู ุงุณุช!ุ ุจูฺฉู ุตุฑูุง ุณูุชฺฉุณ ุฌุฏุฏ ุงุถุงูู ุดุฏู ฺฉู ูโุชูุงูุฏ ุจู ุงุจุฒุงุฑูุง ุดุฎุตโุซุงูุซ (third party) ููุงููุฏ IDEูุง ุจุฑุง ฺฉูุชุฑู ููุน ุฏุงุฏูโูุง ุฏุฑ ุฒูุงู ุชูุณุนู ุจุฑูุงูู ุงุฑโุฑุณุงู ุจุงุดุฏ.

ุจุงุฏ ุชูุฌู ุฏุงุดุช ฺฉู ุทุจู ุณูุฏ PEP 484 ูพุฑู ุงุฒ ุงุตูู Type Hints ุฏุฑ ูพุงุชูู ุงุฌุจุงุฑ ูุจูุฏู ู ูุฎูุงูุฏ ุดุฏ. ูู Data Class ฺฉ ุงุณุชุซูุงุณุช ู ุฏุฑ ุขู ุญุชูุง ูโุจุงุณุช Attributeูุง ุจู ุดูู ุดุฑุญ ุฏุงุฏู ุดุฏูุ ุชุนุฑู ฺฏุฑุฏูุฏ.

ุงุฒ ุขูุฌุง ฺฉู ุงู ููุน ฺฉูุงุณ ุจุฑุง ุงุฌุงุฏ ฺฉ ฺฉุงุฑุจุฑุฏ ุนููู ุงุฒ ฺฉูุงุณโูุง ุชูุณุนู ุงูุชู (ูฺฏูุฏุงุฑ ุงุทูุงุนุงุช)ุ ุจูุงุจุฑุงู ุจุณุงุฑ ุงุฒ ุนููุงุชโูุง ุฏุฑ ุขู ุฎูุฏฺฉุงุฑุณุงุฒ ุดุฏู ุชุง ูพุงุฏูโุณุงุฒ ุงู ฺฉูุงุณ ุณุงุฏูโุชุฑ ุงุฒ ูุฑ ฺฉูุงุณ ุฏฺฏุฑ ุจุงุดุฏ. ุจุฑุง ูุซุงู ูุงุฒ ุจู ูพุงุฏูโุณุงุฒ ูุชุฏ ``__init__`` ูุณุช ู ุงู ูุชุฏ ุจู ุตูุฑุช ุฎูุฏฺฉุงุฑ ุจุฑุง ฺฉูุงุณ ูุง ุงุฌุงุฏ ูโฺฏุฑุฏุฏ. ุงฺฉููู ุงฺฏุฑ ุจุฎูุงูู ุฏุชุงฺฉูุงุณ ูุซุงู ูุจู ุฑุง ุจู ุตูุฑุช ุนุงุฏ ูพุงุฏูโุณุงุฒ ฺฉูู:


.. code-block:: python
    :linenos:

    class Student:

        def __init__(self, name, score):
            self.name = name
            self.score = score


    student = Student('Saeid', 70)
    print(student)
    print('-' * 30)
    print(student.name)
    print(student.score)
    print('-' * 30)
    print(Student('Saeid', 70) == Student('Saeid', 70))

::

    <__main__.Student object at 0x7f922a311518>
    ------------------------------
    Saeid
    70
    ------------------------------
    False


ุจุง ููุงุณู ุงู ุฏู ุฎุฑูุฌุ ูุดุงูุฏู ูโุดูุฏ ฺฉู ููุฏุงุฑ ฺุงูพ ุด (ุณุทุฑ น) ู ูุฒ ุญุงุตู ููุงุณู ุฏู ุด (ุณุทุฑ ฑด) ุจุง ููุงุฏุฑ ฺฉุณุงู ูุชูุงูุช ุงุณุช. ุฏูู ูุฒ ูพุดุชุฑ ุจุงู ุดุฏุโ ุชุนุฏุงุฏ ูุชุฏ ุฎุงุต ููุงููุฏ ``__init__`` ุจุฑุง ุฏุชุง ฺฉูุงุณโูุง ูพุงุฏูโุณุงุฒ ูโุดูุฏ ฺฉู ุจุง ูพุงุฏูโุณุงุฒ ูพุดโูุฑุถ ูุชูุงูุชโ ุจูุฏู ู ุจุฑ ููุน ฺฉุงุฑุจุฑุฏ ุงู ฺฉูุงุณโูุง ู ุฑุงุญุช ุงุณุชูุงุฏู ุขูโูุง ุชูุฑฺฉุฒ ุดุฏู ุงุณุช. ุงู ูพุงุฏูโุณุงุฒ ุฑุง ูโุชูุงู ุจู ุตูุฑุช ุฒุฑ ููุงุด ุฏุงุฏ:



.. code-block:: python
    :linenos:

    class Student:

        def __init__(self, name, score):
            self.name = name
            self.score = score

        def __str__(self):
            return (f'{self.__class__.__name__}'
                    f'(name={self.name!r}, score={self.score!r})')

        def __eq__(self, other):
            return (self.name, self.score) == (other.name, other.score)


    student = Student('Saeid', 70)
    print(student)
    print('-' * 30)
    print(student.name)
    print(student.score)
    print('-' * 30)
    print(Student('Saeid', 70) == Student('Saeid', 70))

::

    Student(name='Saeid', score=70)
    ------------------------------
    Saeid
    70
    ------------------------------
    True

ุงุฒ ุฏุฑุณ ูพุด ุจุง ูุชุฏ ``__eq__`` ุขุดูุง ูุณุชูุ ูุชุฏ ``__str__`` [`ุงุณูุงุฏ ูพุงุชูู <https://docs.python.org/3/reference/datamodel.html#object.__str__>`__] ูุฒ ฺฉ ุฏฺฏุฑ ุงุฒ ูุชุฏูุง ุฎุงุต ูพุงุชูู ูโุจุงุดุฏ ู ููฺฏุงู ฺฉู ฺฉ ุด ูโุฎูุงูุฏ ุจู ููุน str ุชุจุฏู ฺฏุฑุฏุฏุ ุจู ุตูุฑุช ุฎูุฏฺฉุงุฑ ูุฑุงุฎูุงู ูโฺฏุฑุฏุฏ (**ุชุจุฏู ุจู ููุน ุฑุดุชู - ุฏุฑุณ ููุชู**)ุ ุจู ุตูุฑุช ูุดุงุจู ูุชุฏ ``__repr__`` [`ุงุณูุงุฏ ูพุงุชูู <https://docs.python.org/3/reference/datamodel.html#object.__repr__>`__] ูุฒ ูุงุจู ูพุงุฏู ุณุงุฒ ุงุณุช.


ูุชุฏ ``__post_init__``
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

ุฏุชุง ฺฉูุงุณโูุง ููฺูู ูโุชูุงููุฏ ุดุงูู ูุชุฏ ูุฒ ุจุงุดูุฏุ ฺฺฏููฺฏ ุชุนุฑู ูุชุฏ ุฏุฑ ุฏุชุง ฺฉูุงุณ ุชูุงูุช ุจุง ุฏฺฏุฑ ฺฉูุงุณโูุง ูุฏุงุฑุฏ. 

ุงุฒ ุทุฑู ูโุฏุงูู ฺฉู ูุชุฏ ``__init__`` ฺฉ ุฏุชุง ฺฉูุงุณ ุจู ุตูุฑุช ุฎูุฏฺฉุงุฑ ุงุฌุงุฏ ูโฺฏุฑุฏุฏ ู ูุฑุญูู initialize ุด ุงุฒ ุฏุณุชุงู ูุง ุฎุงุฑุฌ ุดุฏู ุงุณุช. ุจุง ุงู ุญุงู ฺูุงูฺู ุงฺฏุฑ ฺฉูุงุณ  ุดุงูู ูุชุฏ ุจุง ูุงู ``__post_init__`` ุจุงุดุฏุ ุงู ูุชุฏ ูพุณ ุงุฒ ``__init__`` ุจู ุตูุฑุช ุฎูุฏฺฉุงุฑ ูุฑุงุฎูุงู ูโฺฏุฑุฏุฏ:

.. code-block:: python
    :linenos:

    from dataclasses import dataclass

    @dataclass
    class Student:
        name: str
        score: int

        def __post_init__(self):
            print("__post_init__ got called:", self)
            if self.name == 'Saeed':
                self.name =  'Saeid'


    student = Student('Saeed', 70)
    print(student)

::

    __post_init__ got called: Student(name='Saeed', score=70)
    Student(name='Saeid', score=70)



ุงุฒ ุทุฑู ูุงฺูู ``dataclasses`` ฺฉ ููุน ฺฉ annotation type ุฌุฏุฏ ุจุง ูุงู ``InitVar`` ุฏุฑ ุฏุณุชุฑุณ ุงุณุช. ฺูุงูฺู ุฏุฑ ุชุนุฑู ูุฑ ฺฉ ุงุฒ Attributeูุง ฺฉูุงุณ ุงุฒ ุงู ููุน ุงุณุชูุงุฏู ฺฉููุ ุขู Attribute ุจู ุนููุงู ูพุงุฑุงูุชุฑ ุจู ูุชุฏ ``__post_init__`` ุงุฑุณุงู ูโฺฏุฑุฏุฏ. ุจุงุฏ ุชูุฌู ุฏุงุดุช ฺฉู ุงู ููุน Attributeูุง ุจู ุนููุงู **Init-only variables** ุดูุงุฎุชู ูโุดููุฏ [`ุงุณูุงุฏ ูพุงุชูู <https://docs.python.org/3/library/dataclasses.html#init-only-variables>`__] ู ููุณุฑ ูพุงุชูู ุขูโูุง ุฑุง ุตุฑูุง ุจู ``__post_init__`` ุงุฑุณุงู ูโฺฉูุฏ ู ุฌุฒู ููุฏูุง ุฏุชุง ฺฉูุงุณ ูุฑุงุฑ ููโุฏูุฏ:


.. code-block:: python
    :linenos:


    @dataclass
    class Student:
        name: InitVar[str]
        score: int

        def __post_init__(self, name):
            if name == 'Saeid':
                self.score =  100


    student = Student('Saeid', 70)
    print(student)


::

    Student(score=100)


ุชุงุจุน ``fields``
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~




Decorators
----------------------------

ุงุฒ ุฏุฑุณ ุณุฒุฏูู ุจุง ููููู Decoratorูุง ู ูุฒ ฺฉุงุฑุจุฑุฏ ุขูโูุง ุจู ููุฑุงู ุชุงุจุน ุฏุฑ ุฒุจุงู ุจุฑูุงููโููุณ ูพุงุชูู ุขุดูุง ุดุฏูโุงูุ ุฏุฑ ุงู ุจุฎุด ุจู ุจุฑุฑุณ Decoratorูุงุจู ููุฑุงู ฺฉูุงุณโูุง ู ูุชุฏูุง ูโูพุฑุฏุงุฒู.

ุนูุงูู ุจุฑ ุงูฺฉู ุจุง ุงุณุชูุงุฏู ุงุฒ ฺฉูุงุณ ูโุชูุงู ฺฉ Decorator ุงุฌุงุฏ ฺฉุฑุฏุ ุงุฒ Decoratorโูุง ูุฒ ูโุชูุงู ุจุฑ ุฑู ฺฉูุงุณ ุง ูุชุฏูุง ุฏุงุฎู ฺฉ ฺฉูุงุณ ุจูุฑู ฺฏุฑูุช. ุฏุฑ ุงุฏุงูู ุจู ุจุฑุฑุณ ุงู ููุงุฑุฏ ูโูพุฑุฏุงุฒู.


ูุฑุงุฑุฏุงุฏู Decorator ุจุฑ ุฑู ูุชุฏ
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

ุงู ฺฉุงุฑ ููุงููุฏ ูุฑุงุฑุฏุงุฏู Decorator ุจุฑ ุฑู ุชุงุจุน ูโุจุงุดุฏ (ุฏุฑุณ ุณุฒุฏูู) ู ุชูุงูุช ูุฏุงุฑุฏ. ูพุดโุชุฑ ูุฒ ุงุฒ Decoratorูุง ููฺูู ``classmethod@`` ุง ``staticmethod@`` ุจุฑ ุฑู ูุชุฏูุง ุงุณุชูุงุฏู ูโฺฉุฑุฏู. ุจู ูุซุงู ุฏุฑ ููู ุฒููู ุชูุฌู ููุงุฏ:


.. code-block:: python
    :linenos:

    import functools

    def debug(func):
        """Print the function signature and return value
           Source: https://realpython.com/primer-on-python-decorators/#debugging-code"""

        @functools.wraps(func)
        def wrapper_debug(*args, **kwargs):
            args_repr = [repr(a) for a in args]                     
            kwargs_repr = [f"{k}={v!r}" for k, v in kwargs.items()]
            signature = ", ".join(args_repr + kwargs_repr)      
            print(f"Calling {func.__name__}({signature})")
            value = func(*args, **kwargs)
            print(f"{func.__name__!r} returned {value!r}")       
            return value
        return wrapper_debug



    class Sample:

        @debug
        def __init__(self, x=0, y=0):
            self.x = x
            self.y = y


    sample = Sample(5, y=6)

::

    Calling __init__(<__main__.Sample object at 0x7fd96ddec8d0>, 5, y=6)
    '__init__' returned None

ุฏุฑ ููููู ฺฉุฏ ุจุงูุง ฺฉ Decorator ุจุง ูุงู ``debug`` ุงุฌุงุฏ ฺฏุฑุฏุฏู ุงุณุช (Decorator ุฏุฑุณ ุณุฒุฏูู ู f-string ุฏุฑุณ ููุชู)ุ ุจุง ูุฑุงุฑุฏุงุฏู ุงู Decorator ุจุฑ ุฑู ฺฉ ุชุงุจุน ุง ูุชุฏ: ูุงู ุชุงุจุนุ ุขุฑฺฏููุงูโูุง ุงุฑุณุงู ุดุฏู ู ููฺูู ููุฏุงุฑ ุฎุฑูุฌ ุชุงุจุน ุฑุง ุจุฑ ุฑู ุฎุฑูุฌ ููุงุด ูโุฏูุฏ.



ูุฑุงุฑุฏุงุฏู Decorator ุจุฑ ุฑู ฺฉูุงุณ
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~



ฺฉูุงุณ ุจู ุนููุงู Decorator
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~



Descriptors
----------------------------



Properties
----------------------------




|

----

:emoji-size:`๐` ุงูุฏูุงุฑู ููุฏ ุจูุฏู ุจุงุดู

`ูุทูุง ุฏุฏฺฏุงู ู ุณูุงูโูุง ูุฑุชุจุท ุจุง ุงู ุฏุฑุณ ุฎูุฏ ุฑุง ุฏุฑ ฺฉุฏุฑุฒ ูุทุฑุญ ููุงุฏ. <https://www.coderz.ir/python-tutorial-oop-descriptors-properties>`_



