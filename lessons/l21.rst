.. role:: emoji-size

.. meta::
   :description: ฺฉุชุงุจ ุขููุฒุด ุฒุจุงู ุจุฑูุงูู ููุณ ูพุงุชูู ุจู ูุงุฑุณุ ุขููุฒุด ุด ฺฏุฑุง ุฏุฑ ูพุงุชููุ OOP ุฏุฑ ูพุงุชููุ  Decorators ุฏุฑ ูพุงุชููุ Descriptors ุฏุฑ ูพุงุชููุ property@ ุฏุฑ ูพุงุชููุ Context Manager ุฏุฑ ูพุงุชููุ ุฏุณุชูุฑ with / as
   :keywords:  ุขููุฒุด, ุขููุฒุด ูพุงุชูู, ุขููุฒุด ุจุฑูุงูู ููุณ, ูพุงุชูู, Decorators, ฺฉุชุงุจุฎุงูู, ูพุงุชูู, ุด ฺฏุฑุง ุฏุฑ ูพุงุชูู, Descriptors,property@ 


ุฏุฑุณ ฒฑ: ุด ฺฏุฑุง (OOP) ุฏุฑ ูพุงุชูู: Context Manager ุDescriptors ุDecorator
===================================================================================================

.. figure:: /_static/pages/21-python-object-oriented-programming-property-descriptors.jpg
    :align: center
    :alt: ุด ฺฏุฑุง (OOP) ุฏุฑ ูพุงุชูู: __Descriptors ุ Context Manager ุDecorator ุ__slots ู property@
    :class: page-image

    Photo by `Mathyas Kurmann <https://unsplash.com/photos/fb7yNPbT0l8>`__
  
ุงู ุฏุฑุณ ูุฒ ุฏุฑ ุงุฏุงูู ูุฌููุนู ุฏุฑูุณ ุขููุฒุด ุด ฺฏุฑุง ุฏุฑ ุฒุจุงู ุจุฑูุงููโููุณ ูพุงุชูู ูโุจุงุดุฏ ฺฉู ุจู ุดุฑุญ ู ุฌูุนโุจูุฏ ุจุฑุฎ ููุงุฑุฏ ูุฑุชุจุท ุจุง ููุงูู ฺฉูุงุณ ู ุด ููุฌูุฏ ุฏุฑ ูพุงุชูู ูโูพุฑุฏุงุฒุฏ. ููุงุฑุฏ ฺฉู ููฺฉู ุงุณุช ูุงุจู ฺฏุฐุฑ ุจุงุดูุฏ ูู ูุฑฺฉ ูฺฉุงุช ุฏุงุฑูุฏ ฺฉู ุฏุฑ ุชูุณุนู ุจุฑูุงูู ุด ฺฏุฑุง ูพุงุชูู ุจู ุดูุง ฺฉูฺฉ ุฎูุงููุฏ ฺฉุฑุฏ. ููุงุฑุฏ ููฺูู ุตูุช ูฺู __slots__ ุฏุฑ ฺฉูุงุณโูุงุ ุงุฌุงุฏ Decorator ุจุง ุงุณุชูุงุฏู ุงุฒ ฺฉูุงุณ ุฏุฑ ูพุงุชูู ู ููฺูู ุงุฌุงุฏ ูุงุจูุช getter ู setter ุฏุฑ ูพุงุชูู ุจุง ุงุณุชูุงุฏู ุงุฒ ููุงูู Descriptors ู ุฏฺฉูุฑุงุชูุฑ property ฺฉู ุฏุฑ ุงุฏุงูู ุชุง ุญุฏ ฺฉุงู ุดุฑุญ ุฏุงุฏู ุฎูุงููุฏ ุดุฏ.


ุชูุฌู ุฏุงุดุชู ุจุงุดุฏุ ูู ุงฺฉููู ูพุดุชุจุงู ูุณุฎู 2x ูพุงุชูู ุจู ูพุงุงู ุฑุณุฏู ุงุณุช. ุจูุงุจุฑุงู	ููุงููุฏ ุฏุฑูุณ ูพุด ุด ฺฏุฑุง ู ุจู ููุธูุฑ ุฌููฺฏุฑ ุงุฒ ูพฺุฏฺฏโูุง ุบุฑ ุถุฑูุฑุ ุชูุงู ูุทุงูุจ ุงู ุฏุฑุณ ุจุฑ ูุจูุง ูพุงุชูู 3x ุงุฑุงุฆู ูโุดูุฏ.



:emoji-size:`โ` ุณุทุญ: ูุชูุณุท

----


.. contents:: ุณุฑูุตูโูุง
    :depth: 2

----


__slots__
----------------------------

ูพุด ุงุฒ ูุฑ ุชูุถุญ ุจู ููููู ฺฉุฏ ุฒุฑ ุชูุฌู ููุงุฏ:


.. code-block:: python
    :linenos: 

    class Sample:
        def __init__(self, a, b):
            self.a = a
            self.b = b


    objet = Sample(1, 2)
    print(objet.__dict__)

    print('-' * 30)

    objet.c = 3
    print(objet.__dict__)

    print('-' * 30)

    objet.__dict__['d'] = 4
    print(objet.__dict__)
    print(objet.d)

::

    {'a': 1, 'b': 2}
    ------------------------------
    {'a': 1, 'b': 2, 'c': 3}
    ------------------------------
    {'a': 1, 'b': 2, 'c': 3, 'd': 4}
    4

ูพุดุชุฑ ูุฒ ุตุญุจุช ฺฉุฑุฏู ุจูุฏูุ ูโุชูุงู ุญุช ูพุณ ุงุฒ ุงุฌุงุฏ ฺฉ ุด ูุฒ ุจู ุขู Attribute ุฌุฏุฏ ุงุถุงูู ฺฉูู (ุจู ุฏู ุณุทุฑ ฑฒ ู ฑท ุชูุฌู ููุงุฏ). ุฏุงุฏูโูุง ูุฑุจูุท ุจู ุชูุงู Attributeูุง ฺฉ ุด ุชูุณุท ฺฉ ุด ุฏฺฉุดูุฑ ฺฉู ุงุฒ ุทุฑู ``__dict__`` ุฏุฑ ุฏุณุชุฑุณ ูโุจุงุดุฏุ ูฺฏูุฏุงุฑ ูโุดูุฏ. ุฏุฑ ูพุณ ุฒููู ูพุงุชูู ุงู ``__dict__`` ูโุจุงุดุฏ ฺฉู ุงูฺฉุงู ุงูุฒูุฏู Attribute ุจู ุด ุฑุง ุจู ุตูุฑุช ูพูุง (Dynamic) ูุฑุงูู ุขูุฑุฏู ุงุณุช.

``__slots__`` [`ุงุณูุงุฏ ูพุงุชูู <https://docs.python.org/3/reference/datamodel.html#slots>`__] ฺฉ Attribute ูฺู ุฏุฑ ูพุงุชูู ูโุจุงุดุฏ ฺฉู ุจุง ููุฏุงุฑุฏู ุขู ูโุชูุงู ุงุฒ ุงุฌุงุฏ ``__dict__`` ุฌููฺฏุฑ ู ุฏุฑ ูุชุฌู ูุงุจูุช ุงูุฒูุฏู Attribute ุฌุฏุฏ ุจู ุด ุฑุง ุบุฑูุนุงู ู ุชุนุฏุงุฏ Attributeูุง ุขู ุฑุง ุงุฒ ููุงู ููุทู ุงุฌุงุฏุ ุซุงุจุช ูฺฏูโุฏุงุดุช:


.. code-block:: python
    :linenos: 

    class Sample:

        __slots__ = ('a', 'b')

        def __init__(self, a, b):
            self.a = a
            self.b = b


    obj = Sample(1, 2)
    print(obj.__dict__)

::

    Traceback (most recent call last):
      File "sample.py", line 11, in <module>
        print(obj.__dict__)
    AttributeError: 'Sample' object has no attribute '__dict__'


ุงุฒ ูุฒุงุง ``__slots__`` ูโุชูุงู ุจู ฺฉุงูุด ูุตุฑู ุญุงูุทู (RAM) ุจู ุฎุตูุต ุฏุฑ ููุฑุฏ ฺฉูุงุณโูุง ฺฉู ูุฑุงุฑ ุงุณุช ุงุดุง ุฎู ุฒุงุฏ ุงุฒ ุขูโูุง ุงุฌุงุฏ ฺฏุฑุฏุฏุ ุงุดุงุฑู ูููุฏ.


ุงุฒ ุทุฑู ``__slots__`` ููฺูู ูโุชูุงู ุงุฌุงุฒู ุฏุงุฏ ฺฉู ฺฉุฏุงู Attribute ุฏุฑ ุขูุฏู ุจุฑุง ุด ุงุฌุงุฏ ฺฏุฑุฏุฏ:

.. code-block:: python
    :linenos: 

    class Sample:

        __slots__ = ('a', 'b', 'c')

        def __init__(self, a, b):
            self.a = a
            self.b = b

    objet = Sample(1, 2)

    objet.c = 3

    print('a: ', objet.a)
    print('b: ', objet.b)
    print('c: ', objet.c)

    objet.d = 4

::


    a:  1
    b:  2
    c:  3
    Traceback (most recent call last):
      File "sample.py", line 17, in <module>
        objet.d = 4
    AttributeError: 'Sample' object has no attribute 'd'



**ุงฺฉููู ููููู ฺฉุฏ ุฒุฑ ุฑุง ุฏุฑ ูุถุนุช ูุฑุงุซุช ุฏุฑ ูุธุฑ ุจฺฏุฑุฏ:**

.. code-block:: python
    :linenos: 

    class Parent:
        def __init__(self, a, b):
            self.a = a
            self.b = b


    class Child(Parent):
        def __init__(self, a, b):
            super().__init__(a, b)


    child = Child(1, 2)
    print(child.__dict__)

    child.c = 3
    print(child.__dict__)

    print('a: ', child.a)
    print('b: ', child.b)
    print('c: ', child.c)

::

    {'a': 1, 'b': 2}
    {'a': 1, 'b': 2, 'c': 3}
    a:  1
    b:  2
    c:  3


ุงฺฏุฑ ฺฉูุงุณ Parent ุดุงูู ``__slots__`` ุจูุฏู ู ุฏุฑ ูุชุฌู ูุงูุฏ ``__dict__`` ุจุงุดุฏ:

.. code-block:: python
    :linenos: 

    class Parent:
        __slots__ = ('a', 'b')

        def __init__(self, a, b):
            self.a = a
            self.b = b


    class Child(Parent):

        def __init__(self, a, b):
            super().__init__(a, b)


    child = Child(1, 2)
    print(child.__dict__)

    child.c = 3
    print(child.__dict__)

    print('a: ', child.a)
    print('b: ', child.b)
    print('c: ', child.c)


::

     {}
     {'c': 3}
     a:  1
     b:  2
     c:  3

ุงฺฏุฑ ูุฑ ุฏู ฺฉูุงุณ ุดุงูู ``__slots__`` ุจุงุดูุฏ:

.. code-block:: python
    :linenos: 

    class Parent:
        __slots__ = ('a', 'b')

        def __init__(self, a, b):
            self.a = a
            self.b = b


    class Child(Parent):
        __slots__ = ('c')

        def __init__(self, a, b):
            super().__init__(a, b)


    child = Child(1, 2)

    child.c = 3
    print('a: ', child.a)
    print('b: ', child.b)
    print('c: ', child.c)

::

    a:  1
    b:  2
    c:  3


**ุฏุฑ ูุฑุงุซุช ฺูุฏฺฏุงููุ** ฺูุงูฺู ``__slots__`` ูุฑุจูุท ุจู superclassูุง ุญุงู ููุฏุงุฑ ุชฺฉุฑุงุฑ ุจุงุดุฏุ ุขูฺฏุงู ุจุงุนุซ ุจุฑูุฒ ุฎุทุง ูโฺฏุฑุฏุฏ:

.. code-block:: python
    :linenos: 

    class ParentOne:
        __slots__ = ('a', 'b')

    class ParentTwo:
        __slots__ = ('z', 'b')


    class Child(ParentOne, ParentTwo):
        __slots__ = ('c')


    child = Child()

::

    Traceback (most recent call last):
      File "sample.py", line 8, in <module>
        class Child(ParentOne, ParentTwo):
    TypeError: multiple bases have instance lay-out conflict


ุจูุชุฑ ุงุณุช superclassูุง ุญุงู ฺฉ ``__slots__`` ุฎุงู (ุด ุชุงูพู ุฎุงู) ุจุงุดูุฏ ู ูุฑ subclass ุฎูุฏ ูุญุชูุง ``__slots__`` ุฎูุฏ ุฑุง ุชุนุฑู ููุงุฏ:

.. code-block:: python
    :linenos: 

    class ParentOne:
        __slots__ = ()

    class ParentTwo:
        __slots__ = ()


    class Child(ParentOne, ParentTwo):
        __slots__ = ('a', 'b', 'z', 'c')


    child = Child()


ุฏุฑ ููุงูุน ุฎุงุต ฺฉู ูโุฎูุงูุฏ ูู Attributeูุง ุฑุง ูุญุฏูุฏ ฺฉูุฏ ู ูู ูุงุจูุช ``__dict__`` ุฑุง ุญูุธ ฺฉูุฏุ ูโุชูุงูุฏ ``__dict__`` ุฑุง ูู ุจู ููุฏุงุฑ ``__slots__`` ุงุถุงูู ููุงุฏ.


|


[`ูุทุงูุนู ุจุดุชุฑ: ูพุฑุณุด ู ูพุงุณุฎ ูุฑุชุจุท ุฏุฑ StackOverflow <https://stackoverflow.com/a/28059785>`__]

Decorators
----------------------------

ุงุฒ ุฏุฑุณ ุณุฒุฏูู ุจุง ููููู Decoratorูุง ู ูุฒ ฺฉุงุฑุจุฑุฏ ุขูโูุง ุจู ููุฑุงู ุชุงุจุน ุฏุฑ ุฒุจุงู ุจุฑูุงููโููุณ ูพุงุชูู ุขุดูุง ุดุฏูโุงูุ ุฏุฑ ุงู ุจุฎุด ุจู ุจุฑุฑุณ Decoratorูุง ุจู ููุฑุงู ฺฉูุงุณโูุง ู ูุชุฏูุง ูโูพุฑุฏุงุฒู.

ุนูุงูู ุจุฑ ุงูฺฉู ุจุง ุงุณุชูุงุฏู ุงุฒ ฺฉูุงุณ ูโุชูุงู ฺฉ Decorator ุงุฌุงุฏ ฺฉุฑุฏุ ุงุฒ Decoratorโูุง ูุฒ ูโุชูุงู ุจุฑ ุฑู ฺฉูุงุณ ุง ูุชุฏูุง ุฏุงุฎู ฺฉ ฺฉูุงุณ ุจูุฑู ฺฏุฑูุช. ุฏุฑ ุงุฏุงูู ุจู ุจุฑุฑุณ ุงู ููุงุฑุฏ ูโูพุฑุฏุงุฒู.


ูุฑุงุฑุฏุงุฏู Decorator ุจุฑ ุฑู ูุชุฏ
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

ุงู ฺฉุงุฑ ููุงููุฏ ูุฑุงุฑุฏุงุฏู Decorator ุจุฑ ุฑู ุชุงุจุน ูโุจุงุดุฏ (ุฏุฑุณ ุณุฒุฏูู) ู ุชูุงูุช ูุฏุงุฑุฏ. ูพุดโุชุฑ ูุฒ ุงุฒ Decoratorูุง ููฺูู ``classmethod@`` ุง ``staticmethod@`` ุจุฑ ุฑู ูุชุฏูุง ุงุณุชูุงุฏู ูโฺฉุฑุฏู. ุจู ูุซุงู ุฏุฑ ููู ุฒููู ุชูุฌู ููุงุฏ:


.. code-block:: python
    :linenos:

    import functools

    def debug(func):
        """Print the function signature and return value
           Source: https://realpython.com/primer-on-python-decorators/#debugging-code"""

        @functools.wraps(func)
        def wrapper_debug(*args, **kwargs):
            args_repr = [repr(a) for a in args]                     
            kwargs_repr = [f"{k}={v!r}" for k, v in kwargs.items()]
            signature = ", ".join(args_repr + kwargs_repr)      
            print(f"Calling {func.__name__}({signature})")
            value = func(*args, **kwargs)
            print(f"{func.__name__!r} returned {value!r}")       
            return value
        return wrapper_debug



    class Sample:

        @debug
        def __init__(self, x=0, y=0):
            self.x = x
            self.y = y


    sample = Sample(5, y=6)

::

    Calling __init__(<__main__.Sample object at 0x7fd96ddec8d0>, 5, y=6)
    '__init__' returned None

ุฏุฑ ููููู ฺฉุฏ ุจุงูุง ฺฉ Decorator ุจุง ูุงู ``debug`` ุงุฌุงุฏ ฺฏุฑุฏุฏู ุงุณุช (Decorator ุฏุฑุณ ุณุฒุฏูู ู f-string ุฏุฑุณ ููุชู)ุ ุจุง ูุฑุงุฑุฏุงุฏู ุงู Decorator ุจุฑ ุฑู ฺฉ ุชุงุจุน ุง ูุชุฏ: ูุงู ุชุงุจุนุ ุขุฑฺฏููุงูโูุง ุงุฑุณุงู ุดุฏู ู ููฺูู ููุฏุงุฑ ุฎุฑูุฌ ุชุงุจุน ุฑุง ุจุฑ ุฑู ุฎุฑูุฌ ููุงุด ูโุฏูุฏ.



ูุฑุงุฑุฏุงุฏู Decorator ุจุฑ ุฑู ฺฉูุงุณ
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

ุฏุฑ ุฒุจุงู ุจุฑูุงููโููุณ ูพุงุชูู ูโุชูุงู ฺฉ Decorator ุฑุง ุจู ฺฉู ฺฉ ฺฉูุงุณ ุงุนูุงู ฺฉุฑุฏุ ุฏุฑ ุงู ุตูุฑุช ูุฒ ุชูุงูุช ุจุง ุขูฺู ุฏุฑ ุชูุงุจุน ุฏุฏูุ ููโฺฉูุฏ. ุชููุง ุฏุฑ ุงู ุญุงูุชุ ุงู ฺฉูุงุณ ุงุณุช ฺฉู ุจู Decorator ุงุฑุณุงู ูโฺฏุฑุฏุฏ. ุฏู ููููู ฺฉุฏ ุฒุฑ ูุนุงุฏู ฺฉุฏฺฏุฑ ูุณุชูุฏ::


    def decorator_name(a_class):
        def wrapper():
            # Do Something!
            print('Class name:', a_class.__name__)
            return a_class()

        return wrapper


::

     # 1

     @decorator_name
     class Sample():
         pass


     sample = Sample()


::

      # 2

      class Sample():
          pass

      SampleWrapper = decorator_name(Sample)
      sample = SampleWrapper()


::

      # Output

      Class name: Sample



ฺฉูุงุณ ุจู ุนููุงู Decorator
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

ุฏุฑ ุฒุจุงู ุจุฑูุงููโููุณ ูพุงุชูู ูโุชูุงู ุงุฒ ฺฉูุงุณโูุง ููฺูู ุชูุงุจุน ุจุฑุง ุงุฌุงุฏ Decorator ุงุณุชูุงุฏู ฺฉุฑุฏ. ุฏุฑ ุงู ุตูุฑุช ุดโุง ฺฉู Decorator ุจู ุขู ุงุนูุงู ุดุฏู ุงุณุช ุงุฒ ุทุฑู ูุชุฏ ``__init__`` ุฏุฑุงูุช ูโฺฏุฑุฏุฏ. ููฺูู ูโุจุงุณุช ูุชุฏ ``__call__`` ุฑุง ูพุงุฏูโุณุงุฒ ฺฉุฑุฏู ุจุงุดู ุชุง ุงุดุง ฺฉูุงุณ ูุงุจูุช callable ุฑุง ุฏุงุดุชู ุจุงุดูุฏ (ุฏุฑุณ ููุฏูู)ุ ุนููุงุช ุงุตู Decorator ูโุจุงุณุช ุฏุงุฎู ุงู ูุชุฏ ูพุงุฏูโุณุงุฒ ฺฏุฑุฏุฏ:



::

    class CountCalls:
        def __init__(self, func):
            self.func = func
            self.num_calls = 0

        def __call__(self):
            self.num_calls += 1
            print(f"Call {self.num_calls} of {self.func.__name__!r}")
            return self.func()

::

    # 1

    @CountCalls
    def func():
        ''' a function'''

    print(func.__doc__)
    func()
    func()


::

    # 2

    def func():
        ''' a function'''

    obj = CountCalls(func)

    print(obj.__doc__)
    obj()
    obj()


::


    # Output

    None
    Call 1 of 'func'
    Call 2 of 'func'



**functools.update_wrapper**

ููุงููุฏ ฺฉุงุฑุจุฑุฏ ุชุงุจุน ``wraps`` ุงุฒ ูุงฺูู ``functools`` ุฏุฑ ููฺฏุงู ุณุงุฎุช Decorator ุงุฒ ุชูุงุจุนุ ุฏุฑ ุงูุฌุง ูุฒ ูโุชูุงูู ุฌูุช ุญูุธ ุงุทูุงุนุงุช ูุฑุจูุท ุจู ุชุงุจุน ุงุตูุ ุงูโุจุงุฑ ุงุฒ ุชุงุจุน ``update_wrapper`` ุงู ูุงฺูู ุงุณุชูุงุฏู ฺฉูู [`ุงุณูุงุฏ ูพุงุชูู <https://docs.python.org/3/library/functools.html#functools.update_wrapper>`__] - ุงฺฏุฑ ฺฉูุงุณ CountCalls ุฑุง ุจู ุตูุฑุช ุฒุฑ ุชุบุฑ ุฏููุ ุขูฺฏุงู ุฎุฑูุฌ ูุฑ ุฏู ุญุงูุช ูุฒ ุจู ุดุฑุญ ุฒุฑ ุชุบุฑ ุฎูุงูุฏ ฺฉุฑุฏุ ฺุฑุง ฺฉู ุงฺฉููู ``__doc__`` ุฏุฑ ุฏุณุชุฑุณ ุจุงู ูุงูุฏู ุงุณุช::


    import functools

    class CountCalls:
        def __init__(self, func):
            functools.update_wrapper(self, func)
            self.func = func
            self.num_calls = 0

        def __call__(self):
            self.num_calls += 1
            print(f"Call {self.num_calls} of {self.func.__name__!r}")
            return self.func()


::

     a function
     Call 1 of 'func'
     Call 2 of 'func'


Descriptors
----------------------------

ุชูุตูโฺฏุฑ (Descriptor) ฺฉูุงุณ ุงุณุช ฺฉู ฺฉูุชุฑู ุนููุงุชโูุง ุฏุฑุงูุช (get)ุ ุชูุธู (set) ู ุญุฐู (delete) ุฑุง ุจุฑ ุฑู ฺฉ attribute ุงุฒ ุดโุง ุฏฺฏุฑ ุฑุง ูุฑุงูู ูโฺฉูุฏ. Descriptor ฺฉ ุฑุงูฺฉุงุฑ ูพุงุชูู (Pythonic) ุจุฑุง ุงุฌุงุฏ ูฺฉุงูุฒู get & set ุฑุงุฌ ุฏุฑ ุฏฺฏุฑ ุฒุจุงูโูุง ุจุฑูุงููโููุณ ูโุจุงุดุฏ.

**ฺฺฏููู ูโุชูุงู ฺฉ Descriptor ุฏุฑ ูพุงุชูู ุงุฌุงุฏ ฺฉุฑุฏุ** [`ุงุณูุงุฏ ูพุงุชูู <https://docs.python.org/3/reference/datamodel.html#implementing-descriptors>`__]

ฑ- ฺฉ ฺฉูุงุณ ุงุฌุงุฏ ฺฉูู ฺฉู ุฏุฑ ุขู ุญุฏุงูู ฺฉ ุงุฒ ูุชุฏูุง ุฎุงุต ``__set__`` ุ``__get__`` ู ``__delete__`` ุจุงุฒูพุงุฏูโุณุงุฒ (ุง ุจูุชุฑ ุงุณุช ุจฺฏูู Override) ุดูุฏ.

ฒ- ุงุฒ ุด ุงู ฺฉูุงุณ ุจู ุนููุงู ููุฏุงุฑ attribute ููุงุณุจ ุงุฒ ฺฉูุงุณ ููุฑุฏ ูุธุฑ ุงุณุชูุงุฏู ฺฉูู.


**ฺฉุงุฑุจุฑุฏ Descriptor ูพุงุชูู ฺุณุชุ**

ูุฑ ุฒูุงู ุจุฎูุงูู ุฑูุฏุงุฏูุง ููฺูู ุฏุฑุงูุช (get)ุ ุชูุธู (set) ู ุญุฐู (delete) ุฑุง ุจุฑ ุฑู ฺฉ attribute ฺฉูุชุฑู ฺฉูู. ุจุฑุง ูุซุงู ฺฉูุงุณ ุดุงูู ฺฉ attribute ุจุง ูุงู ุงูู (email) ุงุณุชุ ูโุฎูุงูู ูพุด ุงุฒ ุชูุธู ููุฏุงุฑ ุจุฑ ุฑู ุงู ููุฏุ ููุฏุงุฑ ุฌุฏุฏ ุจู ุตูุฑุช ุฎูุฏฺฉุงุฑ ุงุนุชุจุงุฑุณูุฌ (Validation) ุดูุฏ ู ุฏุฑ ุตูุฑุช ุตุญุช ุนููุงุช ุงูุฌุงู ุดูุฏ:


.. code-block:: python
    :linenos:


    import re

    class EmailField:

        def __init__(self, email=None):
            self.email = email

        def __get__(self, instance, owner=None):
            print('-' * 10, 'CALLED[__get__]')
            print('instance:', instance)
            print('owner:', owner)
            print('-' * 30)
            print()

            return self.email

        def __set__(self, instance, value):
            print('-' * 10, 'CALLED[__set__]')
            print('instance:', instance)
            print('value:', value)
            print('-' * 30)

            if re.match('^[a-zA-Z0-9_.+-]+@[a-zA-Z0-9-]+.[a-zA-Z0-9-.]+$', value):
                self.email = value
                print('Successful!\n')
            else:
                print(f'{value} is not a valid email!\n')


    class Student:
        email = EmailField()


    obj = Student()

    email = obj.email               # CALLED[__get__]

    obj.email = 'python$$1400'      # CALLED[__set__]

    obj.email = 'python@coderz.ir'  # CALLED[__set__]

    print(obj.email)                # CALLED[__get__]


::

    ---------- CALLED[__get__]
    instance: <__main__.Student object at 0x7f828bb9f4e0>
    owner: <class '__main__.Student'>
    ------------------------------

    ---------- CALLED[__set__]
    instance: <__main__.Student object at 0x7f828bb9f4e0>
    value: python$$1400
    ------------------------------
    python$$1400 is not a valid email!

    ---------- CALLED[__set__]
    instance: <__main__.Student object at 0x7f828bb9f4e0>
    value: python@coderz.ir
    ------------------------------
    Successful!

    ---------- CALLED[__get__]
    instance: <__main__.Student object at 0x7f62e42c64e0>
    owner: <class '__main__.Student'>
    ------------------------------

    python@coderz.ir


ุฏุฑ ููููู ฺฉุฏุ ุจุงูุง ฺฉูุงุณ ``EmailField`` ฺฉ Descriptor ุจุฑุง ุงุชุฑุจูุช ``email`` ุงุฒ ฺฉูุงุณ ``Student`` ูโุจุงุดุฏ. ููุงูุทูุฑ ฺฉู ูุดุงูุฏู ูโุดูุฏุ ูุฑฺฏุงู ููุฏุงุฑ ุจู ``email`` ุงูุชุณุงุจ ุฏุงุฏู ูโุดูุฏ (ุณุทุฑูุง ณธ ู ดฐ)ุ ุจู ุตูุฑุช ุฎูุฏฺฉุงุฑ ูุชุฏ ``__set__`` ุงุฒ ฺฉูุงุณ Descriptor ุขู ูุฑุงุฎูุงู ูโฺฏุฑุฏุฏ ู ุจู ููู ุชุฑุชุจ ูุฑฺฏุงู ููุฏุงุฑ ุขู ุฏุฑุฎูุงุณุช ูโฺฏุฑุฏุฏ (ุณุทุฑูุง ณถ ู ดฒ)ุ ูุชุฏ ``__get__`` ูุฑุงุฎูุงู ูโฺฏุฑุฏุฏ.

ูพุดููุงุฏ ูโุดูุฏ ุฏุฑ ุตูุฑุช ุงูฺฉุงู ููุฏุงุฑ attribute ุฑุง ุชูุณุท Descriptor ูฺฏูุฏุงุฑ ูฺฉูุฏ ู ุงุฒ Descriptor ุชููุง ุจุฑุง ุงูุฌุงู ุนููุงุชโ ูุฑุจูุทู ุงุณุชูุงุฏู ููุงุฏ. ุจูุงุจุฑุงู ูุซุงู ูุจู ุฑุง ูโุชูุงูู ุจู ุตูุฑุช ุฒุฑ ุจุงุฒููุณ ููุงู:


.. code-block:: python
    :linenos:

    import re

    class EmailField:

        def __init__(self, attr_name):
            self.attr_name = attr_name

        def __get__(self, instance, owner=None):
            return instance.__dict__.get(self.attr_name)

        def __set__(self, instance, value):
            if re.match('^[a-zA-Z0-9_.+-]+@[a-zA-Z0-9-]+.[a-zA-Z0-9-.]+$', value):
                instance.__dict__[self.attr_name] = value


    class Student:
        email = EmailField('email')


    obj = Student()
    obj.email = 'python@coderz.ir'

    print(obj.email)


::

    python@coderz.ir


ุฏุฑ ุงู ุฑูุด ุชููุง ูุงู attribute ูฺฏูุฏุงุฑ ู ุงุฒ ุขู ุจุฑุง ุฏุณุชุงุจ ุจู ููุฏุงุฑ ุขู attributeุ ุงุฒ ุทุฑู ุฎูุฏ ุด ุงูุฏุงู ฺฉุฑุฏู.

ุงฺฏุฑ ุงุฒ **ูุณุฎู 3.6 ุจู ุจุนุฏ ูพุงุชูู** ุจูุฑูโููุฏ ูุณุชุฏุโ ุจุง ุงุณุชูุงุฏู ุงุฒ ูุชุฏ ``__set_name__`` [`ุงุณูุงุฏ ูพุงุชูู <https://docs.python.org/3/reference/datamodel.html#object.__set_name__>`__] ุฏุฑ ฺฉูุงุณ Descriptorุ ุฏฺฏุฑ ุญุช ูุงุฒ ุจู ูพุงุฏูโุณุงุฒ ูุชุฏ ``__init__`` ู ุงุฑุณุงู ุฏุณุช ูุงู attribute ูู ูุฎูุงูุฏ ุจูุฏ:


.. code-block:: python
    :linenos:

    import re

    class EmailField:

        def __set_name__(self, owner, name):
            self.attr_name = name

        def __get__(self, instance, owner=None):
            return instance.__dict__.get(self.attr_name)

        def __set__(self, instance, value):
            if re.match('^[a-zA-Z0-9_.+-]+@[a-zA-Z0-9-]+.[a-zA-Z0-9-.]+$', value):
                instance.__dict__[self.attr_name] = value


    class Student:
        email = EmailField()


.. tip:: 

  ุงุฒ Descriptor ุชููุง ุจุฑุง Class Attributeูุง ูโุชูุงู ุงุณุชูุงุฏู ฺฉุฑุฏ.




property@
----------------------------

ุฎู ุณุงุฏูุ ุงู ุฏฺฉูุฑุงุชูุฑ (``property@``) ุฑุง ูโุชูุงู ฺฉ Descriptor ุณุทุญ ุจุงูุง ุฏุงูุณุช ฺฉู ุชูุณุท ฺฉุชุงุจุฎุงูู ุงุณุชุงูุฏุงุฑุฏ ูพุงุชูู ุจุฑุง Instance Attributeูุง ูุฑุงูู ุขูุฑุฏู ุดุฏู ุงุณุช. ุจู ููููู ฺฉุฏ ุฒุฑ ุชูุฌู ููุงุฏ:

.. code-block:: python
    :linenos:

    import re

    class Contact:

        def __init__(self, name, phone):
            self._name = name
            self._phone = phone

        @property
        def name(self):
            return self._name
	
        @name.setter
        def name(self, new_name):
            if new_name and len(new_name) > 0:
                self._name = new_name
            else:
                print("Please enter a valid name")

        @name.deleter
        def name(self):
            del self._name

        @property
        def phone(self):
            return self._phone


        @phone.setter
        def phone(self, new_phone):
            if re.match(r'^09\d{9}$', new_phone):
                self._phone = new_phone
            else:
                print("Please enter a valid phone")

        @phone.deleter
        def phone(self):
            del self._phone


    obj = Contact(name='Saeid', phone='09999999999')

    obj.phone = '09123456'
    print('-' * 30)
    print(obj.name)
    print(obj.phone)


::

     Please enter a valid phone
     ------------------------------
     Saeid
     09999999999


ุฏุฑ ุงู ูุซุงูุ ฺฉูุงุณ ``Contact`` ุญุงู ุฏู Instance Attribute ุจุง ูุงูโูุง ``name`` ู ``phone`` ูโุจุงุดุฏ. ุจุฑุง ุงูฺฉู ุจุชูุงูู ุฑูุฏุงุฏูุง ููฺูู ุฏุฑุงูุช (get)ุ ุชูุธู (set) ู ุญุฐู (delete) ุฑุง ุจุฑ ุฑู ุขูโูุง ฺฉูุชุฑู ฺฉููุ ุงุฒ ุฏฺฉูุฑุงุชูุฑ ``property@`` ุงุณุชูุงุฏู ฺฉุฑุฏู. ุจู ุงู ุตูุฑุช ฺฉู:

**ฑ-** ูุฎุณุช ุจุงุฏ ุชูุฌู ุฏุงุดุช ฺฉู ูุงู Attributeูุง ุจุง ฺฉ ฺฉุงุฑุงฺฉุชุฑ ``_`` ุดุฑูุน ฺฉุฑุฏู. ุจุง ุงู ฺฉุงุฑ ุจู ุฏฺฏุฑ ุจุฑูุงููโููุณุงู ุฎูุงูู ฺฏูุช ฺฉู ุงู Attribute ุจุง ุณุทุญ ุฏุณุชุฑุณ protected ูโุจุงุดุฏ (ุฏุฑุณ ุจุณุชู)::

    def __init__(self, name, phone):
        self._name = name
        self._phone = phone

**ฒ-** ุจุฑุง ูุฑ ฺฉุฏุงู ฺฉ ูุชุฏ getter ุณุงุฎุชู ู ุจู ุขู ุฏฺฉูุฑุงุชูุฑ ``property@`` ุงูุชุณุงุจ ุฏุงุฏู. ูุงู ุงู ูุชุฏ ุฑุง ูููุงู ุจุง Attributeูุง ูู ุจุฏูู ``_`` ุงูุชุฎุงุจ ฺฉุฑุฏู::

    @property
    def name(self):
        return self._name

    @property
    def phone(self):
        return self._phone   


ูุงู ุงู ูุชุฏ ูุฑ ฺุฒ ุงูุชุฎุงุจ ุดูุฏุ ุฏุฑ ุฒูุงู ุฏุฑุฎูุงุณุช ููุฏุงุฑ Attribute ุจุงุฏ ุงุฒ ุงู ูุงู (ุจู ุฌุง ูุงู ุงุตู Attribute) ุงุณุชูุงุฏู ฺฏุฑุฏุฏ (ุณุทุฑูุง ดต ู ดถ).

**ณ-** ุงฺฉููู ูโุชูุงูู ุฏู ูุชุฏ ุฏฺฏุฑ ุจุฑุง ุนููุงุช set ู delete ูพุงุฏูโุณุงุฒ ฺฉูู ู ุจู ุขูโูุง ุฏฺฉูุฑุงุชูุฑูุง ุฒุฑ ุฑุง ุงูุชุณุงุจ ุฏูู::

     @<property_getter_method_name>.setter
     @<property_getter_method_name>.deleter


ุจุฎุด ูุฎุณุช ุงุฒ ูุงู ุฏฺฉูุฑุงุชูุฑ (property_getter_method_name) ูโุจุงุณุช ููุงู ูุงู ูุชุฏ getter ุจุงุดุฏ.

ุฏุฑ ุงู ูุซุงู ูุง ุงุฒ ููุงู ูุงู ูุชุฏ getter ุจุฑุง ูุงูโฺฏุฐุงุฑ ุงู ุฏู ูุชุฏ ุงุณุชูุงุฏู ฺฉุฑุฏู. ูู ุจุงุฏ ุชูุฌู ุฏุงุดุชู ุจุงุดุฏ ฺฉู ูุงู ุงู ุฏู ูุชุฏ ูุฑ ฺุฒ ุงูุชุฎุงุจ ุดูุฏุ ุฏุฑ ุฒูุงู ุชูุธู ููุฏุงุฑ (ุณุทุฑ ดณ) ุง ุญุฐู Attribute ุจุงุฏ ุงุฒ ุงู ูุงู (ุจู ุฌุง ูุงู ุงุตู Attribute) ุงุณุชูุงุฏู ฺฏุฑุฏุฏ.



.. tip:: 

  ุงุฒ ``property@`` ุชููุง ุจุฑุง Instance Attributeูุง ูโุชูุงู ุงุณุชูุงุฏู ฺฉุฑุฏ.


ฺฉ ฺฉุงุฑุจุฑุฏ ูพููุงู ุฏุฑ ุงุณุชูุงุฏู ุงุฒ ``property@``ุ ุงูฺฉุงู ุงุฌุงุฏ Attributeูุง **read-only** ู ุบุฑูุงุจู ุชุบุฑ ูพุณ ุงุฒ ูููููโุณุงุฒ ุด ุฎูุงูุฏ ุจูุฏ. ุจุฑุง ุงู ููุธูุฑ ุชููุง ฺฉุงู ุงุณุช ุงุฒ ูพุงุฏูโุณุงุฒ ูุชุฏ setter ุตุฑูโูุธุฑ ฺฉูู! ุจู ููููู ฺฉุฏ ูพุงู ุชูุฌู ููุงุฏ:


.. code-block:: python
    :linenos:

    class StaticNumber:

        def __init__(self, number):
            self._number = number

        @property
        def number(self):
            return self._number



    obj = StaticNumber(number='000111')

    obj.number = '000222'

::

    Traceback (most recent call last):
      File "sample.py", line 14, in <module>
        obj.number = '000222'
    AttributeError: can't set attribute




  
  
Context Manager ู ุฏุณุชูุฑ ``with/as``
------------------------------------------

ฺฉ ุฏฺฏุฑ ุงุฒ ูุงุจูุชโูุง ฺฉูุชุฑ ุดูุงุฎุชู ุดุฏู ุฏุฑ ุฒุจุงู ุจุฑูุงููโููุณ ูพุงุชููุ Context Manager ูโุจุงุดุฏ [`ุงุณูุงุฏ ูพุงุชูู <http://docs.python.org/3/library/stdtypes.html#typecontextmanager>`__]. ุจุง ุงู ุญุงู ุงฺฉุซุฑ ุจุฑูุงููโููุณุงู ูพุงุชูู ุจู ุตูุฑุช ูุฏุงูู ุงุฒ ุขู ุจูุฑู ูโฺฏุฑูุฏ. ุงฺฏุฑ ุฏุฑุณ ุฏูู ุฑุง ุจู ุงุฏ ุฏุงุดุชู ุจุงุดูุ ุงุฒ ุฏุณุชูุฑ ``with/as`` ุจุฑุง ฺฉุงุฑ ุจุง ูุงูโูุง ุฏุฑ ูพุงุชูู ุงุณุชูุงุฏู ูโฺฉุฑุฏู ู ุดุงูุฏ ุฑุงุญุช ู ุฒุจุง ฺฉุงุฑูุง ูุณุจุช ุจู ูุจู ุจูุฏู. ุฏุฑ ุขู ุฒูุงู ุชููุง ุงุดุงุฑู ุดุฏ ฺฉู ุด ูุงู ูพุงุชูู ุฑุง ูโุชูุงู ุจุง ุฏุณุชูุฑ ``with/as`` ุงุณุชูุงุฏู ฺฉุฑุฏ ฺูู ุงู ุด ุงุฒ ูุงุจูุช Context Manager ูพุดุชุจุงู ูโฺฉูุฏ.

ุจู ุตูุฑุช ฺฉู Context Manager ุฏุฑ ุฒุจุงู ุจุฑูุงููโููุณ ูพุงุชูู ูุงุจูุช ุจุฑุง ูุฏุฑุช ููุงุจุน (ูุงูโูุงุ ุฏุชุงุจุณุ ุงุฑุชุจุงุท ู ุณุงุฑ ููุงุจุน) ูโุจุงุดุฏุ ููุงุจุน ฺฉู ฺฉุงุฑ ฺฉุฑุฏู ุจุง ุขูโูุง ูููุงุฑู ูุงุฒููุฏ ุนููุงุชโ ุซุงุจุช ููฺูู ุจุงุฒ (Open) ู ุจุณุชู (Close) - Start/Stop, Lock/Release, Change/Reset - ฺฉุฑุฏู ูุณุชูุฏ. 

ุฏุฑ ุงู ุจุฎุด ูโุฎูุงูู ุจู ุจุฑุฑุณ ฺฺฏููฺฏ ุงุฌุงุฏ ฺฉ ฺฉูุงุณ ุจู ููุฑุงู ูุงุจูุช  Context Manager ุจูพุฑุฏุงุฒู ฺฉู ุฏุฑ ููุงุช ุงุฒ ุงุดุง ุขู ุจุชูุงูู ุฏุฑ ฺฉูุงุฑ ุฏุณุชูุฑ ``with/as`` ุงุณุชูุงุฏู ููุงู. ุงุจุชุฏุง ุงุฌุงุฒู ุฏูุฏ ุจุงุฑ ุฏฺฏุฑ ุณุงุฎุชุงุฑ ุฏุณุชูุฑ ``with/as`` ุฑุง ุจุฑุฑุณ ููุงู::

    with context_expression [as target]:
        with_statement_body

ุฏุฑ ุงู ุณุงุฎุชุงุฑ ุจุฎุด ``as`` ุงุฎุชุงุฑ ุจูุฏู ู ุชููุง ุฒูุงู ฺฉู ุฏุฑ ุฏุงุฎู ุจุฏูู ุฏุณุชูุฑ ``with`` ุจู ุด ุชููุฏ ุดุฏู ุชูุณุท ``context_expression`` ูุงุฒ ุฏุงุดุชู ุจุงุดูุ ุงุณุชูุงุฏู ูโฺฏุฑุฏุฏุ ุฏุฑ ุงู ุตูุฑุช ฺฉ ุงุฑุฌุงุน ุงุฒ ุด ููุฑุฏ ูุงุฒ ุจู ูุงู ุฏูุฎูุงู ``target`` ุงุฌุงุฏ ู ุฏุฑ ุฏุณุชุฑุณ ูุฑุงุฑ ูโฺฏุฑุฏ. ``context_expression`` ูุฒ ูุนุฑู ฺฉ ุดโุง ุงุณุช ฺฉู ุชูุงูุง ูุฏุฑุช ุง handle ฺฉุฑุฏู ุฏู ูุถุนุช ยซูุฑูุฏ ุจูยป (entry into) ู ยซุฎุฑูุฌ ุงุฒยป (exit from) ุฑุง ุฏุงุดุชู ุจุงุดุฏ. ุจุฑุง ุงุฌุงุฏ ููฺู ุดโุง ูโุจุงุณุช ุฏู ูุชุฏ ุฎุงุต ``__enter__`` 	[`ุงุณูุงุฏ ูพุงุชูู <https://docs.python.domainunion.de/3/reference/datamodel.html#object.__enter__>`__] ู ``__exit__`` [`ุงุณูุงุฏ ูพุงุชูู <https://docs.python.domainunion.de/3/reference/datamodel.html#object.__exit__>`__] ุฑุง ุฏุฑ ฺฉูุงุณ ููุฑุฏ ูุธุฑ ุฎูุฏ ูพุงุฏูโุณุงุฒ ฺฉูู:

.. code-block:: python
    :linenos:
    
    class SampleContextManager:
        def __enter__(self):
            print('---> Entered into context manager!')

        def __exit__(self, *args):
            print('<--- Exiting from context manager!')


    with SampleContextManager():
        print('Inside context manager!')

::

    ---> Entered into context manager!
    Inside context manager!
    <--- Exiting from context manager!

ููุงูุทูุฑ ฺฉู ุงุฒ ุฎุฑูุฌ ููููู ฺฉุฏ ุจุงูุง ูุงุจู ูุดุงูุฏู ูโุจุงุดุฏุ ุฏุฑ ููฺฏุงู ุงุฌุฑุง ุฏุณุชูุฑ ``with``ุ ุงุจุชุฏุง ูุชุฏ ``__enter__`` ุงุฒ ุด Context Manager ู ุณูพุณ ุฏุณุชูุฑุงุช ุฏุงุฎู ุจุฏูู ุฏุณุชูุฑ ``with`` ู ุฏุฑ ููุงุช ูุฒ ูุชุฏ ``__exit__`` ุงุฒ ุด Context Manager ุงุฌุฑุง ูโฺฏุฑุฏุฏ.


ุงฺฏุฑ ุจุฎูุงูู ฺฉู ุนููโุชุฑ ุจู ูุงุฌุฑุง ูฺฏุงู ฺฉูู:

* ุงุฌุฑุง ูุชุฏ ``__enter__`` ุฒูุงู ุงุณุช ฺฉู ุฎุท ุงุฌุฑุง ุจุฑูุงูู ูโุฎูุงูุฏ ูุงุฑุฏ ุงุฌุฑุง ุฏุณุชูุฑุงุช ุฏุงุฎู ``with`` ุง ุจู ุงุตุทูุงุญ  ูุงุฑุฏ runtime context ุดูุฏ ู ุฎุฑูุฌ ุงู ูุชุฏ ูโุจุงุณุช ุดโุง ุจุงุดุฏ ฺฉู ูโุฎูุงูู ุฏุฑ ุทูู ุงุฌุฑุง ุฏุณุชูุฑ  ``with`` ุง ุจู ุงุตุทูุงุญ contextุ ุจุง ุขู ฺฉุงุฑ ฺฉูู. ุงูุจุชู ุฎุฑูุฌ ูโุชูุงูุฏ ``None`` ุจุงุดุฏ ูู ุจุงุฏ ุชูุฌู ุฏุงุดุช ฺฉู ุฎุฑูุฌ ุงู ูุชุฏ ุงุณุช ฺฉู ุชูุณุท ุฏุณุชูุฑ ``as`` ุจู ูุงู ``target`` ุงุฑุฌุงุน ูโุฎูุฑุฏ!

* ุงุฌุฑุง ูุชุฏ ``__exit__`` ุฒูุงู ุงุณุช ฺฉู ุงูุฌุงู ฺฉุงุฑ ุฏุณุชูุฑุงุช ``with`` ุง ุงุฌุฑุง context ุจู ูพุงุงู ุฑุณุฏู ุงุณุช. ุงู ูุชุฏ ุฏุฑ ูุงูุน  ูุฑุตุช ุจุฑุง ุชูุฒฺฉุงุฑ ุง ุจู ุงุตุทูุงุญ clean up ฺฉุฑุฏู ุขุซุงุฑ ุงุฌุฑุง context ูโุจุงุดุฏ. ุจู ูุงููุฏ ูพุงฺฉ ฺฉุฑุฏู ูุงูโูุง ฺฉู ูููุช ุงุฌุงุฏ ุดุฏูโุงูุฏุ ุญุฐู ุงุดุง ุงุถุงู ุจุงูโูุงูุฏู ุง ุงูุฌุงู ุนูู ุจุณุชู ฺฉ ูุงู ุง ูพุงุงู ุฏุงุฏู ฺฉ ุงุฑุชุจุงุท (Connection) ุง...

ุจุฑุง ุขุดูุง ุจุดุชุฑ ุฏุฑ ููููู ฺฉุฏ ุฒุฑ ฺฉ Wrapper ุจุฑุง ุด ูุงู ุงุฌุงุฏ ฺฉุฑุฏูโุงู:

.. code-block:: python
    :linenos:
    
    class FileWritterWrapper:
        def __init__(self, filename):
            self.filename = filename
        
        def __enter__(self):
            self.opened_file = open(self.filename, 'a')
            self.opened_file.write('====== OPEN FILE ======\n')
            return self.opened_file
    
        def __exit__(self, *args):
            self.opened_file.write('\n====== CLOSE FILE ======\n')
            self.opened_file.close()


    with FileWritterWrapper('test_log.txt') as managed_file:
        managed_file.write('Inside context manager!')

ูุญุชูุงุช ูุงู test_log.txtุ ูพุณ ุงุฒ ุงุฌุฑุง ฺฉุฏ ุจุงูุง:

::

    
    ====== OPEN FILE ======
    Inside context manager!
    ====== CLOSE FILE ======

ุจู ูุชุฏ ``__exit__`` ุจุฑฺฏุฑุฏูุ ุจุฑุงุณุงุณ ูุณุชูุฏุงุช ูพุงุชูู ุชุนุฑู ฺฉุงูู ุงู ูุชุฏ ุจู ุดฺฉู ุฒุฑ ุงุณุช::

    __exit__(self, exc_type, exc_value, traceback)

ุณู ูพุงุฑุงูุชุฑ ุงูุชูุง ุฏุฑ ุตูุฑุช ุจุฑูุฒ Exception ููฺฏุงู ุงุฌุฑุง context (ุฏุณุชูุฑุงุช ุฏุงุฎู ุจุฏูู ``with``) ุฏุงุฑุง ููุฏุงุฑ ุบุฑ ``None`` ู ุฏุฑ ุบุฑ ุงู ุตูุฑุช ุจุฑุงุจุฑ ุจุง ููุฏุงุฑ ``None`` ุฎูุงููุฏ ุจูุฏ. ูุฌูุฏ ุงู ููุงุฏุฑ ุจู ูุนู ุนุฏู ูพุงุงู ุตุญุญ context ูโุจุงุดุฏ ฺฉู ููฺฉู ุงุณุช ุจุชูุงูุฏ ุฏุฑ ฺฏุฑูุชู ุชุตูู ุดูุง ุฏุฑ ุฒูุงู ุฎุฑูุฌ ุงุฒ context ุชุงุซุฑ ุฏุงุดุชู ุจุงุดุฏ.

.. code-block:: python
    :linenos:

    class SampleContextManager:
        def __enter__(self):
            print('---> Entered into context manager!')

        def __exit__(self, exc_type, exc_value, traceback):
            print('exc_type:', exc_type)
            print('exc_value:', exc_value)
            print('traceback:', traceback)
            print('<--- Exiting from context manager!')


    with SampleContextManager():
        print('|||||||||Inside context manager! - Top')
        a = 8 / 0
        print('|||||||||Inside context manager! - Bottom')


    print('***FINISH***')

::

     ---> Entered into context manager!
     |||||||||Inside context manager! - Top
     exc_type: <class 'ZeroDivisionError'>
     exc_value: division by zero
     traceback: <traceback object at 0x7f1c8aebd0c8>
     <--- Exiting from context manager!
     Traceback (most recent call last):
       File "sample.py", line 14, in <module>
         a = 8 / 0
     ZeroDivisionError: division by zero


ููุงูโุทูุฑ ฺฉู ุงุฒ ููููู ฺฉุฏ ุจุงูุง ูุงุจู ูุดุงูุฏู ุงุณุชุ ุฏุฑ ุฒูุงู ุงุฌุฑุง ุฏุณุชูุฑุงุช context ฺฉ ุฎุทุง (ุชูุณู ุจุฑ ุตูุฑ) ``ZeroDivisionError`` ุฑุฎ ุฏุงุฏู ุงุณุช. ูฺฉุชู ูุงุจู ุชูุฌู ุงู ุงุณุช ฺฉู ุญุช ุจุง ูุฌูุฏ ุจุฑูุฒ ุฎุทุง ู ูุงุชูุงู ูุงูุฏู ุงุฌุฑุง contextุ ูู ุจุฏูู ูุชุฏ ``__exit__`` ุจู ุตูุฑุช ฺฉุงูู ุงุฌุฑุง ุดุฏู ุงุณุช. ุฏุฑ ูุงูุน ููุณุฑ ูพุงุชูู ุงุนูุงู Exception ุฑุง ฺฉู ูโุชูุงูุฏ ููุฌุฑ ุจู ุชููู ฺฉู ุจุฑูุงูู ุดูุฏ ุฑุง ุจู ุตูุฑุช ูููุช ุชุง ูพุงุงู ุงุฌุฑุง ``__exit__`` ูุนูู ูฺฏู ูโุฏุงุฑุฏ.

ุฏุฑ ฺูู ุญุงูุช ุงฺฏุฑ ูุชุฏ ``__exit__`` ููุฏุงุฑ ``True`` ุฑุง ุจุฑฺฏุฑุฏุงูุฏุ ููุณุฑ ูพุงุชูู ุงุฒ ุจุฑูุฒ Exception ุฎูุฏุฏุงุฑ ุฎูุงูุฏ ฺฉุฑุฏ:

.. code-block:: python
    :linenos:

    class SampleContextManager:
        def __enter__(self):
            print('---> Entered into context manager!')

        def __exit__(self, exc_type, exc_value, traceback):
            print('exc_type:', exc_type)
            print('exc_value:', exc_value)
            print('traceback:', traceback)
            print('<--- Exiting from context manager!')
            return True


    with SampleContextManager():
        print('|||||||||Inside context manager! - Top')
        a = 8 / 0
        print('|||||||||Inside context manager! - Bottom')


    print('***FINISH***')

::

    ---> Entered into context manager!
    |||||||||Inside context manager! - Top
    exc_type: <class 'ZeroDivisionError'>
    exc_value: division by zero
    traceback: <traceback object at 0x7f4b3d520048>
    <--- Exiting from context manager!
    ***FINISH***

ุงุฏุขูุฑ:โ ูโุฏุงูู ฺฉู ุฎุฑูุฌ ูุฑ ุชุงุจุน ุง ูุชุฏ ุจู ุตูุฑุช ูพุดโูุฑุถ ุจุฑุง ``None`` ูโุจุงุดุฏ ู ุงู ููุฏุงุฑ ุฏุฑ ููุงู ุงุฑุฒุดโุณูุฌ ุจูููุ ุงุฑุฒุด ุจุฑุงุจุฑ ุจุง ููุฏุงุฑ ``False`` ุฏุงุฑุฏ.

*ุฏุฑ ุท ุฏุฑูุณ ุขูุฏู ุจู ูุจุญุซ Exception ู ูุฏุฑุช ุขู ุฎูุงูู ูพุฑุฏุงุฎุช.*

 



|

----

:emoji-size:`๐` ุงูุฏูุงุฑู ููุฏ ุจูุฏู ุจุงุดู

`ูุทูุง ุฏุฏฺฏุงู ู ุณูุงูโูุง ูุฑุชุจุท ุจุง ุงู ุฏุฑุณ ุฎูุฏ ุฑุง ุฏุฑ ฺฉุฏุฑุฒ ูุทุฑุญ ููุงุฏ. <https://www.coderz.ir/python-tutorial-oop-slots-descriptors-property>`_



